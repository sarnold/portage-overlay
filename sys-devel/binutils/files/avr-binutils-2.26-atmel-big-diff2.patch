diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/archive.c binutils-2.26-avr/bfd/archive.c
--- binutils-2.26.1-src/bfd/archive.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/archive.c	2016-11-16 03:51:00.000000000 -0800
@@ -802,7 +802,7 @@
 	     Note that last_file->origin can be odd in the case of
 	     BSD-4.4-style element with a long odd size.  */
 	  filestart += filestart % 2;
-	  if (filestart < last_file->proxy_origin)
+	  if (filestart <= last_file->proxy_origin)
 	    {
 	      /* Prevent looping.  See PR19256.  */
 	      bfd_set_error (bfd_error_malformed_archive);
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/ChangeLog binutils-2.26-avr/bfd/ChangeLog
--- binutils-2.26.1-src/bfd/ChangeLog	2016-06-29 00:59:48.000000000 -0700
+++ binutils-2.26-avr/bfd/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -1,300 +1,43 @@
-2016-06-29  Tristan Gingold  <gingold@adacore.com>
+2016-11-15  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
 
-	* version.m4: Bump version to 2.26.1
-	* configure: Regenerate.
-
-2016-06-29  Tristan Gingold  <gingold@adacore.com>
-
-	* development.sh: Set development to false.
-
-2016-06-28  Alan Modra  <amodra@gmail.com>
-
-	Apply from master
-	2016-05-19  Alan Modra  <amodra@gmail.com>
-	* elf64-ppc.c (ppc64_elf_branch_reloc): Check for NULL owner
-	before dereferencing.
-
-2016-06-28  Alan Modra  <amodra@gmail.com>
-
-	PR ld/19264
-	* elf64-ppc.c (STUB_SHRINK_ITER): Define.
-	(ppc64_elf_size_stubs): Exit stub sizing loop past STUB_SHRINK_ITER
-	if shrinking stubs.
-	(ppc64_elf_size_stubs): Adjust to suit.
+	PR ld/20789
+	* bfd/elf32-avr.c (elf32_avr_adjust_diff_reloc_value): Do signed
+	manipulation of diff value, and don't assume sym2 is less than sym1.
+	(elf32_avr_adjust_reloc_if_spans_insn): New function.
+	(elf32_avr_relax_delete_bytes): Use elf32_avr_adjust_diff_reloc_value,
+	and remove redundant did_pad.
+
+
+2016-09-02  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
+
+	PR ld/20545
+	* elf32-avr.c (elf32_avr_relax_delete_bytes): Add parameter
+	delete_shrinks_insn. Modify computation of shrinked_insn_address.
+	Compute shrink_boundary and adjust addend only if
+	addend_within_shrink_boundary.
+	(elf32_avr_relax_section): Modify calls to
+	elf32_avr_relax_delete_bytes to pass extra parameter.
 
 2016-06-14  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
 
-	Backport from master
-	2016-06-14  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
-
 	PR ld/20254
 	* elf32-avr.c (elf32_avr_relax_delete_bytes): Adjust reloc
 	offsets until reloc_toaddr.
 
-2016-06-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-06-13  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/20244
-	* elf32-i386.c (elf_i386_relocate_section): Add the .got.plt
-	section address for R_386_GOT32/R_386_GOT32X relocations against
-	IFUNC symbols if there is no base register and return error for
-	PIC.
-
-	2016-06-13  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf32-i386.c (elf_i386_relocate_section): Simplify IFUNC
-	GOT32 adjustment for static executables.
-
-2016-06-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-06-11  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/20244
-	* elf32-i386.c (elf_i386_relocate_section): When relocating
-	R_386_GOT32, return error without a base register for PIC and
-	subtract the .got.plt section address only with a base register.
-
-2016-06-13  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
-
-	Backport from master
-	2016-06-08  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
+2016-06-08  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
 
 	PR ld/20221
 	* elf32-avr.c (elf32_avr_relax_delete_bytes): Adjust syms
 	and relocs only if shrinking occurred.
 
-2016-06-09  Alan Modra  <amodra@gmail.com>
-
-	PR ld/20159
-	PR ld/16467
-	* elflink.c (_bfd_elf_merge_symbol): Revert PR16467 change.
-	(_bfd_elf_add_default_symbol): Don't indirect to/from defined
-	symbol given a version by a script different to the version
-	of the symbol being added.
-	(elf_link_add_object_symbols): Use _bfd_elf_strtab_save and
-	_bfd_elf_strtab_restore.  Don't fudge dynstr references.
-	* elf-strtab.c (_bfd_elf_strtab_restore_size): Delete.
-	(struct strtab_save): New.
-	(_bfd_elf_strtab_save, _bfd_elf_strtab_restore): New functions.
-	* elf-bfd.h (_bfd_elf_strtab_restore_size): Delete.
-	(_bfd_elf_strtab_save, _bfd_elf_strtab_restore): Declare.
-
-2016-05-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-05-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf32-i386.c (elf_i386_check_relocs): Don't check R_386_GOT32
-	when setting need_convert_load.
-
-	2016-05-19  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/20117
-	* elf32-i386.c (elf_i386_convert_load): Don't convert
-	R_386_GOT32.
-
-2016-05-18  Christophe Monat  <christophe.monat@st.com>
-
-	Backport from master
-	2016-05-09  Christophe Monat  <christophe.monat@st.com>
-
-	PR ld/20030
-	* elf32-arm.c (is_thumb2_vldm): Account for T1 (DP) encoding.
-	(stm32l4xx_need_create_replacing_stub): Rename ambiguous nb_regs
-	to nb_words.
-	(create_instruction_vldmia): Add is_dp to disambiguate SP/DP
-	encoding.
-	(create_instruction_vldmdb): Likewise.
-	(stm32l4xx_create_replacing_stub_vldm): is_dp detects DP encoding,
-	uses it to re-encode.
-
-2016-05-15  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-05-13  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/20093
-	* elf64-x86-64.c (elf_x86_64_convert_load_reloc): Don't convert
-	GOTPCREL relocation against large section.
-
-	* elflink.c (bfd_elf_final_link): Likewise.
-
-2016-05-11  Alan Modra  <amodra@gmail.com>
-
-	PR 20060
-	* elf64-ppc.c (ppc64_elf_tls_setup): Clear forced_local.
-	* elf32-ppc.c (ppc_elf_tls_setup): Likewise.
-
-2016-04-30  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-04-27  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/20006
-	* elf64-x86-64.c (elf_x86_64_convert_load): Skip debug sections
-	when estimating distances between output sections.
-
-2016-03-29  Toni Spets  <toni.spets@iki.fi>
-
-	PR 19878
-	* coffcode.h (coff_write_object_contents): Revert accidental
-	2014-11-10 change.
-
-2016-03-17  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-03-15  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19827
-	* elf32-i386.c (elf_i386_check_relocs): Bind defined symbol
-	locally in PIE.
-	(elf_i386_relocate_section): Likewise.
-	* elf64-x86-64.c (elf_x86_64_check_relocs): Likewise.
-	(elf_x86_64_relocate_section): Likewise.
-
-2016-03-15  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-01-30  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19539
-	* elf32-i386.c (elf_i386_reloc_type_class): Check relocation
-	against STT_GNU_IFUNC symbol only with dynamic symbols.
-	* elf64-x86-64.c (elf_x86_64_reloc_type_class): Likewise.
-
-2016-03-15  Nick Clifton  <nickc@redhat.com>
-
-	Backport from master:
-	2016-03-09  Leon Winter  <winter-gcc@bfw-online.de>
-
-	PR ld/19623
-	* cofflink.c (_bfd_coff_generic_relocate_section): Do not apply
-	relocations against absolute symbols.
-
-2016-03-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-01-28  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/19523
-	* dwarf2.c (_bfd_dwarf2_slurp_debug_info): Set BFD_DECOMPRESS to
-	decompress debug sections.
-
-2016-03-09  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19579
-	Backport from master
-	2016-03-08  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elflink.c (_bfd_elf_merge_symbol): Group common symbol checking
-	together.
-
-	2016-03-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elflink.c (_bfd_elf_merge_symbol): Treat common symbol in
-	executable as definition if the new definition comes from a
-	shared library.
-
-2016-03-09  Nick Clifton  <nickc@redhat.com>
-	    Alan Modra  <amodra@gmail.com>
-
-	PR binutils/19775
-	* archive.c (bfd_generic_openr_next_archived_file): Allow zero
-	length elements in the archive.
-	* coff-alpha.c (alpha_ecoff_openr_next_archived_file): Likewise.
-
-2016-03-01  H.J. Lu  <hongjiu.lu@intel.com>
+2015-11-17  Pitchumani Sivanupandi <pitchumani.s@atmel.com>
 
-	PR ld/19752
-	Backport from master
-	2015-12-18  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* coff-x86_64.c (coff_amd64_reloc): Fix formatting.
-
-	2015-12-18  Nick Clifton  <nickc@redhat.com>
-
-	* coff-i386.c (coff_i386_reloc): Fix formatting.
-
-2016-02-26  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-24  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19698
-	* elflink.c (bfd_elf_record_link_assignment): Set versioned if
-	symbol version is unknown.
-
-2016-02-26  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-01  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19553
-	* elflink.c (elf_link_add_object_symbols): Don't add DT_NEEDED
-	if a symbol from a library loaded via DT_NEEDED doesn't match
-	the symbol referenced by regular object.
-
-2016-02-26  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-24  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf32-i386.c (elf_i386_allocate_dynrelocs): Set plt_got.offset
-	to (bfd_vma) -1 when setting needs_plt to 0.
-	* elf64-x86-64.c (elf_x86_64_allocate_dynrelocs): Likewise.
-
-2016-02-26  Alan Modra  <amodra@gmail.com>
-
-	* elf64-ppc.c (create_linkage_sections): Create sfpr when
-	save_restore_funcs, rest of sections when not relocatable.
-	(ppc64_elf_init_stub_bfd): Always call create_linkage_sections.
-	(sfpr_define): Define all symbols on emitted code.
-	(ppc64_elf_func_desc_adjust): Adjust for sfpr now being created
-	when relocatable.  Move sfpr_define loop earlier.
-
-2016-02-25  Jiong Wang  <jiong.wang@arm.com>
-
-	Backport from master
-	2016-01-21  Jiong Wang  <jiong.wang@arm.com>
-
-	* elfnn-aarch64.c (aarch64_type_of_stub): Allow insert long branch
-	veneer for sym_sec != input_sec.
-	(elfNN_aarch64_size_stub): Support STT_SECTION symbol.
-	(elfNN_aarch64_final_link_relocate): Take rela addend into account when
-	calculation destination.
-
-2016-02-10  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-10  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19601
-	* elf32-i386.c (elf_i386_relocate_section): Mask off the least
-	significant bit in GOT offset for R_386_GOT32X.
-
-2016-02-02  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-02  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19542
-	* elf64-x86-64.c (elf_x86_64_convert_load): Store the estimated
-	distances in the compressed_size field of the output section.
-
-2016-02-01  John David Anglin  <danglin@gcc.gnu.org>
-
-	PR ld/19526
-	* elf32-hppa.c (elf32_hppa_final_link): Don't sort non-regular output
-	files.
-	* elf64-hppa.c (elf32_hppa_final_link): Likewise.  Remove retval.
-
-2016-01-25  Tristan Gingold  <gingold@adacore.com>
-
-	* version.m4: Bump version to 2.26.0
-	* configure: Regenerate.
+	* elf32-avr.c: declare avr_non_bit_addressable_registers_mask.
+	(avr_final_link_relocate): Return out of range if register operand for
+	R_AVR_PORT5 relocation is not bit addressable.
+	(elf32_avr_setup_params): Add parameter for non bit addressable regsiters
+	mask and use that to define the mask.
+	* elf32-avr.h: Update prototype for elf32_avr_setup_params.
 
 2016-01-25  Tristan Gingold  <gingold@adacore.com>
 
@@ -417,7 +160,7 @@
 	* configure: Regenerate.
 
 2015-11-11  Alan Modra  <amodra@gmail.com>
-	    Peter Bergner <bergner@vnet.ibm.com>
+            Peter Bergner <bergner@vnet.ibm.com>
 
 	* elf32-ppc.c (ppc_elf_howto_raw): Add R_PPC_REL16DX_HA.
 	(ppc_elf_reloc_type_lookup): Handle R_PPC_REL16DX_HA.
@@ -477,8 +220,8 @@
 
 2015-10-29  Catherine Moore  <clm@codesourcery.com>
 
-	* elfxx-mips.c (mips_elf_check_mips16_stubs): Set a stub's output
-	section to bfd_abs_section_ptr if the stub is discarded.
+    	* elfxx-mips.c (mips_elf_check_mips16_stubs): Set a stub's output
+    	section to bfd_abs_section_ptr if the stub is discarded.
 
 2015-10-29  Ed Schouten  <ed@nuxi.nl>
 
@@ -530,7 +273,7 @@
 	* bfd-in2.h: Regenerate.
 
 2015-10-27  Laurent Alfonsi <laurent.alfonsi@st.com>
-	    Christophe Monat <christophe.monat@st.com>
+            Christophe Monat <christophe.monat@st.com>
 
 	* bfd-in2.h: Regenerate.
 	* bfd-in.h (bfd_arm_stm32l4xx_fix): New enum. Specify how
@@ -1523,115 +1266,115 @@
 
 2015-08-18  H.J. Lu  <hongjiu.lu@intel.com>
 
-	* aoutx.h: Replace shared, executable, relocatable and pie
+	* bfd/aoutx.h: Replace shared, executable, relocatable and pie
 	fields with bfd_link_executable, bfd_link_dll,
 	bfd_link_relocatable, bfd_link_pic and bfd_link_pie.
-	* bout.c: Likewise.
-	* coff-alpha.c: Likewise.
-	* coff-arm.c: Likewise.
-	* coff-i386.c: Likewise.
-	* coff-i960.c: Likewise.
-	* coff-m68k.c: Likewise.
-	* coff-mcore.c: Likewise.
-	* coff-mips.c: Likewise.
-	* coff-ppc.c: Likewise.
-	* coff-rs6000.c: Likewise.
-	* coff-sh.c: Likewise.
-	* coff-tic80.c: Likewise.
-	* coff-x86_64.c: Likewise.
-	* coff64-rs6000.c: Likewise.
-	* coffgen.c: Likewise.
-	* cofflink.c: Likewise.
-	* ecoff.c: Likewise.
-	* ecofflink.c: Likewise.
-	* elf-bfd.h: Likewise.
-	* elf-eh-frame.c: Likewise.
-	* elf-ifunc.c: Likewise.
-	* elf-m10200.c: Likewise.
-	* elf-m10300.c: Likewise.
-	* elf-s390-common.c: Likewise.
-	* elf-vxworks.c: Likewise.
-	* elf.c: Likewise.
-	* elf32-arm.c: Likewise.
-	* elf32-avr.c: Likewise.
-	* elf32-bfin.c: Likewise.
-	* elf32-cr16.c: Likewise.
-	* elf32-cr16c.c: Likewise.
-	* elf32-cris.c: Likewise.
-	* elf32-crx.c: Likewise.
-	* elf32-d10v.c: Likewise.
-	* elf32-dlx.c: Likewise.
-	* elf32-epiphany.c: Likewise.
-	* elf32-fr30.c: Likewise.
-	* elf32-frv.c: Likewise.
-	* elf32-ft32.c: Likewise.
-	* elf32-h8300.c: Likewise.
-	* elf32-hppa.c: Likewise.
-	* elf32-i370.c: Likewise.
-	* elf32-i386.c: Likewise.
-	* elf32-i860.c: Likewise.
-	* elf32-ip2k.c: Likewise.
-	* elf32-iq2000.c: Likewise.
-	* elf32-lm32.c: Likewise.
-	* elf32-m32c.c: Likewise.
-	* elf32-m32r.c: Likewise.
-	* elf32-m68hc11.c: Likewise.
-	* elf32-m68hc1x.c: Likewise.
-	* elf32-m68k.c: Likewise.
-	* elf32-mcore.c: Likewise.
-	* elf32-mep.c: Likewise.
-	* elf32-metag.c: Likewise.
-	* elf32-microblaze.c: Likewise.
-	* elf32-moxie.c: Likewise.
-	* elf32-msp430.c: Likewise.
-	* elf32-mt.c: Likewise.
-	* elf32-nds32.c: Likewise.
-	* elf32-nios2.c: Likewise.
-	* elf32-or1k.c: Likewise.
-	* elf32-ppc.c: Likewise.
-	* elf32-rl78.c: Likewise.
-	* elf32-rx.c: Likewise.
-	* elf32-s390.c: Likewise.
-	* elf32-score.c: Likewise.
-	* elf32-score7.c: Likewise.
-	* elf32-sh-symbian.c: Likewise.
-	* elf32-sh.c: Likewise.
-	* elf32-sh64.c: Likewise.
-	* elf32-spu.c: Likewise.
-	* elf32-tic6x.c: Likewise.
-	* elf32-tilepro.c: Likewise.
-	* elf32-v850.c: Likewise.
-	* elf32-vax.c: Likewise.
-	* elf32-visium.c: Likewise.
-	* elf32-xc16x.c: Likewise.
-	* elf32-xstormy16.c: Likewise.
-	* elf32-xtensa.c: Likewise.
-	* elf64-alpha.c: Likewise.
-	* elf64-hppa.c: Likewise.
-	* elf64-ia64-vms.c: Likewise.
-	* elf64-mmix.c: Likewise.
-	* elf64-ppc.c: Likewise.
-	* elf64-s390.c: Likewise.
-	* elf64-sh64.c: Likewise.
-	* elf64-x86-64.c: Likewise.
-	* elflink.c: Likewise.
-	* elfnn-aarch64.c: Likewise.
-	* elfnn-ia64.c: Likewise.
-	* elfxx-mips.c: Likewise.
-	* elfxx-sparc.c: Likewise.
-	* elfxx-tilegx.c: Likewise.
-	* i386linux.c: Likewise.
-	* linker.c: Likewise.
-	* m68klinux.c: Likewise.
-	* pdp11.c: Likewise.
-	* pe-mips.c: Likewise.
-	* peXXigen.c: Likewise.
-	* reloc.c: Likewise.
-	* reloc16.c: Likewise.
-	* sparclinux.c: Likewise.
-	* sunos.c: Likewise.
-	* vms-alpha.c: Likewise.
-	* xcofflink.c: Likewise.
+	* bfd/bout.c: Likewise.
+	* bfd/coff-alpha.c: Likewise.
+	* bfd/coff-arm.c: Likewise.
+	* bfd/coff-i386.c: Likewise.
+	* bfd/coff-i960.c: Likewise.
+	* bfd/coff-m68k.c: Likewise.
+	* bfd/coff-mcore.c: Likewise.
+	* bfd/coff-mips.c: Likewise.
+	* bfd/coff-ppc.c: Likewise.
+	* bfd/coff-rs6000.c: Likewise.
+	* bfd/coff-sh.c: Likewise.
+	* bfd/coff-tic80.c: Likewise.
+	* bfd/coff-x86_64.c: Likewise.
+	* bfd/coff64-rs6000.c: Likewise.
+	* bfd/coffgen.c: Likewise.
+	* bfd/cofflink.c: Likewise.
+	* bfd/ecoff.c: Likewise.
+	* bfd/ecofflink.c: Likewise.
+	* bfd/elf-bfd.h: Likewise.
+	* bfd/elf-eh-frame.c: Likewise.
+	* bfd/elf-ifunc.c: Likewise.
+	* bfd/elf-m10200.c: Likewise.
+	* bfd/elf-m10300.c: Likewise.
+	* bfd/elf-s390-common.c: Likewise.
+	* bfd/elf-vxworks.c: Likewise.
+	* bfd/elf.c: Likewise.
+	* bfd/elf32-arm.c: Likewise.
+	* bfd/elf32-avr.c: Likewise.
+	* bfd/elf32-bfin.c: Likewise.
+	* bfd/elf32-cr16.c: Likewise.
+	* bfd/elf32-cr16c.c: Likewise.
+	* bfd/elf32-cris.c: Likewise.
+	* bfd/elf32-crx.c: Likewise.
+	* bfd/elf32-d10v.c: Likewise.
+	* bfd/elf32-dlx.c: Likewise.
+	* bfd/elf32-epiphany.c: Likewise.
+	* bfd/elf32-fr30.c: Likewise.
+	* bfd/elf32-frv.c: Likewise.
+	* bfd/elf32-ft32.c: Likewise.
+	* bfd/elf32-h8300.c: Likewise.
+	* bfd/elf32-hppa.c: Likewise.
+	* bfd/elf32-i370.c: Likewise.
+	* bfd/elf32-i386.c: Likewise.
+	* bfd/elf32-i860.c: Likewise.
+	* bfd/elf32-ip2k.c: Likewise.
+	* bfd/elf32-iq2000.c: Likewise.
+	* bfd/elf32-lm32.c: Likewise.
+	* bfd/elf32-m32c.c: Likewise.
+	* bfd/elf32-m32r.c: Likewise.
+	* bfd/elf32-m68hc11.c: Likewise.
+	* bfd/elf32-m68hc1x.c: Likewise.
+	* bfd/elf32-m68k.c: Likewise.
+	* bfd/elf32-mcore.c: Likewise.
+	* bfd/elf32-mep.c: Likewise.
+	* bfd/elf32-metag.c: Likewise.
+	* bfd/elf32-microblaze.c: Likewise.
+	* bfd/elf32-moxie.c: Likewise.
+	* bfd/elf32-msp430.c: Likewise.
+	* bfd/elf32-mt.c: Likewise.
+	* bfd/elf32-nds32.c: Likewise.
+	* bfd/elf32-nios2.c: Likewise.
+	* bfd/elf32-or1k.c: Likewise.
+	* bfd/elf32-ppc.c: Likewise.
+	* bfd/elf32-rl78.c: Likewise.
+	* bfd/elf32-rx.c: Likewise.
+	* bfd/elf32-s390.c: Likewise.
+	* bfd/elf32-score.c: Likewise.
+	* bfd/elf32-score7.c: Likewise.
+	* bfd/elf32-sh-symbian.c: Likewise.
+	* bfd/elf32-sh.c: Likewise.
+	* bfd/elf32-sh64.c: Likewise.
+	* bfd/elf32-spu.c: Likewise.
+	* bfd/elf32-tic6x.c: Likewise.
+	* bfd/elf32-tilepro.c: Likewise.
+	* bfd/elf32-v850.c: Likewise.
+	* bfd/elf32-vax.c: Likewise.
+	* bfd/elf32-visium.c: Likewise.
+	* bfd/elf32-xc16x.c: Likewise.
+	* bfd/elf32-xstormy16.c: Likewise.
+	* bfd/elf32-xtensa.c: Likewise.
+	* bfd/elf64-alpha.c: Likewise.
+	* bfd/elf64-hppa.c: Likewise.
+	* bfd/elf64-ia64-vms.c: Likewise.
+	* bfd/elf64-mmix.c: Likewise.
+	* bfd/elf64-ppc.c: Likewise.
+	* bfd/elf64-s390.c: Likewise.
+	* bfd/elf64-sh64.c: Likewise.
+	* bfd/elf64-x86-64.c: Likewise.
+	* bfd/elflink.c: Likewise.
+	* bfd/elfnn-aarch64.c: Likewise.
+	* bfd/elfnn-ia64.c: Likewise.
+	* bfd/elfxx-mips.c: Likewise.
+	* bfd/elfxx-sparc.c: Likewise.
+	* bfd/elfxx-tilegx.c: Likewise.
+	* bfd/i386linux.c: Likewise.
+	* bfd/linker.c: Likewise.
+	* bfd/m68klinux.c: Likewise.
+	* bfd/pdp11.c: Likewise.
+	* bfd/pe-mips.c: Likewise.
+	* bfd/peXXigen.c: Likewise.
+	* bfd/reloc.c: Likewise.
+	* bfd/reloc16.c: Likewise.
+	* bfd/sparclinux.c: Likewise.
+	* bfd/sunos.c: Likewise.
+	* bfd/vms-alpha.c: Likewise.
+	* bfd/xcofflink.c: Likewise.
 
 2015-08-18  Alan Modra  <amodra@gmail.com>
 
@@ -1685,7 +1428,7 @@
 
 2015-08-11  Jiong Wang  <jiong.wang@arm.com>
 
-	* elfnn-aarch64.c (aarch64_type_of_stub): New parameter "sym_sec".
+	* bfd/elfnn-aarch64.c (aarch64_type_of_stub): New parameter "sym_sec".
 	Loose the check for symbol from ABS section.
 	(elfNN_aarch64_size_stubs): Pass sym_sec.
 
@@ -1986,10 +1729,10 @@
 
 2015-07-10  H.J. Lu  <hongjiu.lu@intel.com>
 
-	PR binutils/18656
-	* bfd.c (bfd_convert_section_size): New function.
-	(bfd_convert_section_contents): Likewise.
-	* bfd-in2.h: Regenerated.
+	 PR binutils/18656
+	 * bfd.c (bfd_convert_section_size): New function.
+	 (bfd_convert_section_contents): Likewise.
+	 * bfd-in2.h: Regenerated.
 
 2015-07-09  Catherine Moore  <clm@codesourcery.com>
 
@@ -2302,6 +2045,7 @@
 	    Bernd Schmidt <bernds@codesourcery.com>
 	    Paul Brook <paul@codesourcery.com>
 
+	bfd/
 	* bfd-in2.h: Regenerated.
 	* elf-bfd.h (DWARF2_EH_HDR, COMPACT_EH_HDR): Define.
 	(COMPACT_EH_CANT_UNWIND_OPCODE): Define.
@@ -3210,7 +2954,7 @@
 2015-03-18  H.J. Lu  <hongjiu.lu@intel.com>
 
 	* compress.c (bfd_compress_section_contents): Make it static.
-	* bfd-in2.h: Regenerated.
+	* bfd/bfd-in2.h: Regenerated.
 
 2015-03-18  Eric Youngdale  <eyoungdale@ptc.com>
 
@@ -3359,8 +3103,8 @@
 
 2015-02-27  Marcus Shawcroft  <marcus.shawcroft@arm.com>
 
-	* bfd-in2.h: Regenerate.
-	* libbfd.h: Regenerate.
+	* bfd/bfd-in2.h: Regenerate.
+	* bfd/libbfd.h: Regenerate.
 
 2015-02-26  Marcus Shawcroft  <marcus.shawcroft@arm.com>
 
@@ -3831,7 +3575,7 @@
 	is weak or pointer_equality_needed is FALSE.
 
 	* elf32-arm.c (elf32_arm_finish_dynamic_symbol): Improve
-	comment discussing why we clear st_value for some symbols.
+	  comment discussing why we clear st_value for some symbols.
 
 2015-02-02  Kuan-Lin Chen  <kuanlinchentw@gmail.com>
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/coff-alpha.c binutils-2.26-avr/bfd/coff-alpha.c
--- binutils-2.26.1-src/bfd/coff-alpha.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/coff-alpha.c	2016-11-16 03:51:00.000000000 -0800
@@ -2208,7 +2208,7 @@
 	 BSD-4.4-style element with a long odd size.  */
       filestart = last_file->proxy_origin + size;
       filestart += filestart % 2;
-      if (filestart < last_file->proxy_origin)
+      if (filestart <= last_file->proxy_origin)
 	{
 	  /* Prevent looping.  See PR19256.  */
 	  bfd_set_error (bfd_error_malformed_archive);
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/coffcode.h binutils-2.26-avr/bfd/coffcode.h
--- binutils-2.26.1-src/bfd/coffcode.h	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/coffcode.h	2016-11-16 03:51:00.000000000 -0800
@@ -4076,8 +4076,6 @@
     internal_f.f_flags |= F_DYNLOAD;
 #endif
 
-  memset (&internal_a, 0, sizeof internal_a);
-
   /* Set up architecture-dependent stuff.  */
   {
     unsigned int magic = 0;
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/coff-i386.c binutils-2.26-avr/bfd/coff-i386.c
--- binutils-2.26.1-src/bfd/coff-i386.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/coff-i386.c	2016-11-16 03:51:00.000000000 -0800
@@ -139,41 +139,41 @@
 #define DOIT(x) \
   x = ((x & ~howto->dst_mask) | (((x & howto->src_mask) + diff) & howto->dst_mask))
 
-  if (diff != 0)
-    {
-      reloc_howto_type *howto = reloc_entry->howto;
-      unsigned char *addr = (unsigned char *) data + reloc_entry->address;
-
-      switch (howto->size)
-	{
-	case 0:
-	  {
-	    char x = bfd_get_8 (abfd, addr);
-	    DOIT (x);
-	    bfd_put_8 (abfd, x, addr);
-	  }
-	  break;
+    if (diff != 0)
+      {
+	reloc_howto_type *howto = reloc_entry->howto;
+	unsigned char *addr = (unsigned char *) data + reloc_entry->address;
 
-	case 1:
+	switch (howto->size)
 	  {
-	    short x = bfd_get_16 (abfd, addr);
-	    DOIT (x);
-	    bfd_put_16 (abfd, (bfd_vma) x, addr);
-	  }
-	  break;
+	  case 0:
+	    {
+	      char x = bfd_get_8 (abfd, addr);
+	      DOIT (x);
+	      bfd_put_8 (abfd, x, addr);
+	    }
+	    break;
+
+	  case 1:
+	    {
+	      short x = bfd_get_16 (abfd, addr);
+	      DOIT (x);
+	      bfd_put_16 (abfd, (bfd_vma) x, addr);
+	    }
+	    break;
+
+	  case 2:
+	    {
+	      long x = bfd_get_32 (abfd, addr);
+	      DOIT (x);
+	      bfd_put_32 (abfd, (bfd_vma) x, addr);
+	    }
+	    break;
 
-	case 2:
-	  {
-	    long x = bfd_get_32 (abfd, addr);
-	    DOIT (x);
-	    bfd_put_32 (abfd, (bfd_vma) x, addr);
+	  default:
+	    abort ();
 	  }
-	  break;
-
-	default:
-	  abort ();
-	}
-    }
+      }
 
   /* Now let bfd_perform_relocation finish everything up.  */
   return bfd_reloc_continue;
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/cofflink.c binutils-2.26-avr/bfd/cofflink.c
--- binutils-2.26.1-src/bfd/cofflink.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/cofflink.c	2016-11-16 03:51:00.000000000 -0800
@@ -2977,12 +2977,6 @@
 	  else
 	    {
 	      sec = sections[symndx];
-
-	      /* PR 19623: Relocations against symbols in
-		 the absolute sections should ignored.  */
-              if (bfd_is_abs_section (sec))
-		continue;
-
               val = (sec->output_section->vma
 		     + sec->output_offset
 		     + sym->n_value);
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/coff-x86_64.c binutils-2.26-avr/bfd/coff-x86_64.c
--- binutils-2.26.1-src/bfd/coff-x86_64.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/coff-x86_64.c	2016-11-16 03:51:00.000000000 -0800
@@ -138,61 +138,59 @@
 #define DOIT(x) \
   x = ((x & ~howto->dst_mask) | (((x & howto->src_mask) + diff) & howto->dst_mask))
 
-  if (diff != 0)
-    {
-      reloc_howto_type *howto = reloc_entry->howto;
-      unsigned char *addr = (unsigned char *) data + reloc_entry->address;
-
-      /* FIXME: We do not have an end address for data, so we cannot
-	 accurately range check any addresses computed against it.
-	 cf: PR binutils/17512: file: 1085-1761-0.004.
-	 For now we do the best that we can.  */
-      if (addr < (unsigned char *) data
-	  || addr > ((unsigned char *) data) + input_section->size)
-	{
-	  bfd_set_error (bfd_error_bad_value);
-	  return bfd_reloc_notsupported;
-	}
-
-      switch (howto->size)
-	{
-	case 0:
+    if (diff != 0)
+      {
+	reloc_howto_type *howto = reloc_entry->howto;
+	unsigned char *addr = (unsigned char *) data + reloc_entry->address;
+
+	/* FIXME: We do not have an end address for data, so we cannot
+	   accurately range check any addresses computed against it.
+	   cf: PR binutils/17512: file: 1085-1761-0.004.
+	   For now we do the best that we can.  */
+	if (addr < (unsigned char *) data || addr > ((unsigned char *) data) + input_section->size)
 	  {
-	    char x = bfd_get_8 (abfd, addr);
-	    DOIT (x);
-	    bfd_put_8 (abfd, x, addr);
+	    bfd_set_error (bfd_error_bad_value);
+	    return bfd_reloc_notsupported;
 	  }
-	  break;
 
-	case 1:
+	switch (howto->size)
 	  {
-	    short x = bfd_get_16 (abfd, addr);
-	    DOIT (x);
-	    bfd_put_16 (abfd, (bfd_vma) x, addr);
+	  case 0:
+	    {
+	      char x = bfd_get_8 (abfd, addr);
+	      DOIT (x);
+	      bfd_put_8 (abfd, x, addr);
+	    }
+	    break;
+
+	  case 1:
+	    {
+	      short x = bfd_get_16 (abfd, addr);
+	      DOIT (x);
+	      bfd_put_16 (abfd, (bfd_vma) x, addr);
+	    }
+	    break;
+
+	  case 2:
+	    {
+	      long x = bfd_get_32 (abfd, addr);
+	      DOIT (x);
+	      bfd_put_32 (abfd, (bfd_vma) x, addr);
+	    }
+	    break;
+	  case 4:
+	    {
+	      long long x = bfd_get_64 (abfd, addr);
+	      DOIT (x);
+	      bfd_put_64 (abfd, (bfd_vma) x, addr);
+	    }
+	    break;
+
+	  default:
+	    bfd_set_error (bfd_error_bad_value);
+	    return bfd_reloc_notsupported;
 	  }
-	  break;
-
-	case 2:
-	  {
-	    long x = bfd_get_32 (abfd, addr);
-	    DOIT (x);
-	    bfd_put_32 (abfd, (bfd_vma) x, addr);
-	  }
-	  break;
-
-	case 4:
-	  {
-	    long long x = bfd_get_64 (abfd, addr);
-	    DOIT (x);
-	    bfd_put_64 (abfd, (bfd_vma) x, addr);
-	  }
-	  break;
-
-	default:
-	  bfd_set_error (bfd_error_bad_value);
-	  return bfd_reloc_notsupported;
-	}
-    }
+      }
 
   /* Now let bfd_perform_relocation finish everything up.  */
   return bfd_reloc_continue;
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/configure binutils-2.26-avr/bfd/configure
--- binutils-2.26.1-src/bfd/configure	2016-06-29 00:59:48.000000000 -0700
+++ binutils-2.26-avr/bfd/configure	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.64 for bfd 2.26.1.
+# Generated by GNU Autoconf 2.64 for bfd 2.26.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software
@@ -556,8 +556,8 @@
 # Identity of this package.
 PACKAGE_NAME='bfd'
 PACKAGE_TARNAME='bfd'
-PACKAGE_VERSION='2.26.1'
-PACKAGE_STRING='bfd 2.26.1'
+PACKAGE_VERSION='2.26'
+PACKAGE_STRING='bfd 2.26'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
@@ -1351,7 +1351,7 @@
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures bfd 2.26.1 to adapt to many kinds of systems.
+\`configure' configures bfd 2.26 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1422,7 +1422,7 @@
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of bfd 2.26.1:";;
+     short | recursive ) echo "Configuration of bfd 2.26:";;
    esac
   cat <<\_ACEOF
 
@@ -1543,7 +1543,7 @@
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-bfd configure 2.26.1
+bfd configure 2.26
 generated by GNU Autoconf 2.64
 
 Copyright (C) 2009 Free Software Foundation, Inc.
@@ -2185,7 +2185,7 @@
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by bfd $as_me 2.26.1, which was
+It was created by bfd $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   $ $0 $@
@@ -3993,7 +3993,7 @@
 
 # Define the identity of the package.
  PACKAGE='bfd'
- VERSION='2.26.1'
+ VERSION='2.26'
 
 
 cat >>confdefs.h <<_ACEOF
@@ -16533,7 +16533,7 @@
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by bfd $as_me 2.26.1, which was
+This file was extended by bfd $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -16597,7 +16597,7 @@
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_version="\\
-bfd config.status 2.26.1
+bfd config.status 2.26
 configured by $0, generated by GNU Autoconf 2.64,
   with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/development.sh binutils-2.26-avr/bfd/development.sh
--- binutils-2.26.1-src/bfd/development.sh	2016-06-29 00:59:46.000000000 -0700
+++ binutils-2.26-avr/bfd/development.sh	2016-11-16 03:51:00.000000000 -0800
@@ -16,4 +16,4 @@
 # along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
 # Controls whether to enable development-mode features by default.
-development=false
+development=true
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/dwarf2.c binutils-2.26-avr/bfd/dwarf2.c
--- binutils-2.26.1-src/bfd/dwarf2.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/dwarf2.c	2016-11-16 03:51:00.000000000 -0800
@@ -3706,10 +3706,8 @@
 	   fail more quickly.  */
 	return FALSE;
 
-      /* Set BFD_DECOMPRESS to decompress debug sections.  */
       if ((debug_bfd = bfd_openr (debug_filename, NULL)) == NULL
-	  || !(debug_bfd->flags |= BFD_DECOMPRESS,
-	       bfd_check_format (debug_bfd, bfd_object))
+	  || ! bfd_check_format (debug_bfd, bfd_object)
 	  || (msec = find_debug_info (debug_bfd,
 				      debug_sections, NULL)) == NULL
 	  || !bfd_generic_link_read_symbols (debug_bfd))
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf32-arm.c binutils-2.26-avr/bfd/elf32-arm.c
--- binutils-2.26.1-src/bfd/elf32-arm.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf32-arm.c	2016-11-16 03:51:00.000000000 -0800
@@ -7374,21 +7374,18 @@
 {
   /* A6.5 Extension register load or store instruction
      A7.7.229
-     We look for SP 32-bit and DP 64-bit registers.
-     Encoding T1 VLDM{mode}<c> <Rn>{!}, <list>
-     <list> is consecutive 64-bit registers
-     1110 - 110P - UDW1 - rrrr - vvvv - 1011 - iiii - iiii
+     We look only for the 32-bit registers case since the DP (64-bit
+     registers) are not supported for STM32L4XX
      Encoding T2 VLDM{mode}<c> <Rn>{!}, <list>
      <list> is consecutive 32-bit registers
      1110 - 110P - UDW1 - rrrr - vvvv - 1010 - iiii - iiii
      if P==0 && U==1 && W==1 && Rn=1101 VPOP
      if PUW=010 || PUW=011 || PUW=101 VLDM.  */
   return
-    (((insn & 0xfe100f00) == 0xec100b00) ||
-     ((insn & 0xfe100f00) == 0xec100a00))
+    ((insn & 0xfe100f00) == 0xec100a00)
     && /* (IA without !).  */
     (((((insn << 7) >> 28) & 0xd) == 0x4)
-     /* (IA with !), includes VPOP (when reg number is SP).  */
+     /* (IA with !), includes VPOP (when reg number is SP).  */     
      || ((((insn << 7) >> 28) & 0xd) == 0x5)
      /* (DB with !).  */
      || ((((insn << 7) >> 28) & 0xd) == 0x9));
@@ -7405,19 +7402,19 @@
 stm32l4xx_need_create_replacing_stub (const insn32 insn,
 				      bfd_arm_stm32l4xx_fix stm32l4xx_fix)
 {
-  int nb_words = 0;
+  int nb_regs = 0;
 
   /* The field encoding the register list is the same for both LDMIA
      and LDMDB encodings.  */
   if (is_thumb2_ldmia (insn) || is_thumb2_ldmdb (insn))
-    nb_words = popcount (insn & 0x0000ffff);
+    nb_regs = popcount (insn & 0x0000ffff);
   else if (is_thumb2_vldm (insn))
-   nb_words = (insn & 0xff);
+   nb_regs = (insn & 0xff);
 
   /* DEFAULT mode accounts for the real bug condition situation,
      ALL mode inserts stubs for each LDM/VLDM instruction (testing).  */
   return
-    (stm32l4xx_fix == BFD_ARM_STM32L4XX_FIX_DEFAULT) ? nb_words > 8 :
+    (stm32l4xx_fix == BFD_ARM_STM32L4XX_FIX_DEFAULT) ? nb_regs > 8 :
     (stm32l4xx_fix == BFD_ARM_STM32L4XX_FIX_ALL) ? TRUE : FALSE;
 }
 
@@ -16245,31 +16242,30 @@
 }
 
 static inline bfd_vma
-create_instruction_vldmia (int base_reg, int is_dp, int wback, int num_words,
+create_instruction_vldmia (int base_reg, int wback, int num_regs,
 			   int first_reg)
 {
   /* A8.8.332 VLDM (A8-922)
-     VLMD{MODE} Rn{!}, {list} (Encoding T1 or T2).  */
-  bfd_vma patched_inst = (is_dp ? 0xec900b00 : 0xec900a00)
+     VLMD{MODE} Rn{!}, {list} (Encoding T2).  */
+  bfd_vma patched_inst = 0xec900a00
     | (/*W=*/wback << 21)
     | (base_reg << 16)
-    | (num_words & 0x000000ff)
-    | (((unsigned)first_reg >> 1) & 0x0000000f) << 12
+    | (num_regs & 0x000000ff)
+    | (((unsigned)first_reg>>1) & 0x0000000f) << 12
     | (first_reg & 0x00000001) << 22;
 
   return patched_inst;
 }
 
 static inline bfd_vma
-create_instruction_vldmdb (int base_reg, int is_dp, int num_words,
-			   int first_reg)
+create_instruction_vldmdb (int base_reg, int num_regs, int first_reg)
 {
   /* A8.8.332 VLDM (A8-922)
-     VLMD{MODE} Rn!, {} (Encoding T1 or T2).  */
-  bfd_vma patched_inst = (is_dp ? 0xed300b00 : 0xed300a00)
+     VLMD{MODE} Rn!, {} (Encoding T2).  */
+  bfd_vma patched_inst = 0xed300a00
     | (base_reg << 16)
-    | (num_words & 0x000000ff)
-    | (((unsigned)first_reg >>1 ) & 0x0000000f) << 12
+    | (num_regs & 0x000000ff)
+    | (((unsigned)first_reg>>1) & 0x0000000f) << 12
     | (first_reg & 0x00000001) << 22;
 
   return patched_inst;
@@ -16749,15 +16745,15 @@
 				      const bfd_byte *const initial_insn_addr,
 				      bfd_byte *const base_stub_contents)
 {
-  int num_words = ((unsigned int) initial_insn << 24) >> 24;
+  int num_regs = ((unsigned int)initial_insn << 24) >> 24;
   bfd_byte *current_stub_contents = base_stub_contents;
 
   BFD_ASSERT (is_thumb2_vldm (initial_insn));
 
   /* In BFD_ARM_STM32L4XX_FIX_ALL mode we may have to deal with
-     smaller than 8 words load sequences that do not cause the
+     smaller than 8 registers load sequences that do not cause the
      hardware issue.  */
-  if (num_words <= 8)
+  if (num_regs <= 8)
     {
       /* Untouched instruction.  */
       current_stub_contents =
@@ -16772,30 +16768,28 @@
     }
   else
     {
-      bfd_boolean is_dp = /* DP encoding. */
-	(initial_insn & 0xfe100f00) == 0xec100b00;
       bfd_boolean is_ia_nobang = /* (IA without !).  */
 	(((initial_insn << 7) >> 28) & 0xd) == 0x4;
       bfd_boolean is_ia_bang = /* (IA with !) - includes VPOP.  */
 	(((initial_insn << 7) >> 28) & 0xd) == 0x5;
       bfd_boolean is_db_bang = /* (DB with !).  */
 	(((initial_insn << 7) >> 28) & 0xd) == 0x9;
-      int base_reg = ((unsigned int) initial_insn << 12) >> 28;
+      int base_reg = ((unsigned int)initial_insn << 12) >> 28;
       /* d = UInt (Vd:D);.  */
-      int first_reg = ((((unsigned int) initial_insn << 16) >> 28) << 1)
+      int first_reg = ((((unsigned int)initial_insn << 16) >> 28) << 1)
 	| (((unsigned int)initial_insn << 9) >> 31);
 
-      /* Compute the number of 8-words chunks needed to split.  */
-      int chunks = (num_words % 8) ? (num_words / 8 + 1) : (num_words / 8);
+      /* Compute the number of 8-register chunks needed to split.  */
+      int chunks = (num_regs%8) ? (num_regs/8 + 1) : (num_regs/8);
       int chunk;
 
       /* The test coverage has been done assuming the following
 	 hypothesis that exactly one of the previous is_ predicates is
 	 true.  */
-      BFD_ASSERT (    (is_ia_nobang ^ is_ia_bang ^ is_db_bang)
-		  && !(is_ia_nobang & is_ia_bang & is_db_bang));
+      BFD_ASSERT ((is_ia_nobang ^ is_ia_bang ^ is_db_bang) &&
+		  !(is_ia_nobang & is_ia_bang & is_db_bang));
 
-      /* We treat the cutting of the words in one pass for all
+      /* We treat the cutting of the register in one pass for all
 	 cases, then we emit the adjustments:
 
 	 vldm rx, {...}
@@ -16808,34 +16802,29 @@
 
 	 vldmd rx!, {...}
 	 -> vldmb rx!, {8_words_or_less} for each needed 8_word.  */
-      for (chunk = 0; chunk < chunks; ++chunk)
+      for (chunk = 0; chunk<chunks; ++chunk)
 	{
-	  bfd_vma new_insn = 0;
-
 	  if (is_ia_nobang || is_ia_bang)
 	    {
-	      new_insn = create_instruction_vldmia
-		(base_reg,
-		 is_dp,
-		 /*wback= .  */1,
-		 chunks - (chunk + 1) ?
-		 8 : num_words - chunk * 8,
-		 first_reg + chunk * 8);
+	      current_stub_contents =
+		push_thumb2_insn32 (htab, output_bfd, current_stub_contents,
+				    create_instruction_vldmia
+				    (base_reg,
+				     /*wback= .  */1,
+				     chunks - (chunk + 1) ?
+				     8 : num_regs - chunk * 8,
+				     first_reg + chunk * 8));
 	    }
 	  else if (is_db_bang)
 	    {
-	      new_insn = create_instruction_vldmdb
-		(base_reg,
-		 is_dp,
-		 chunks - (chunk + 1) ?
-		 8 : num_words - chunk * 8,
-		 first_reg + chunk * 8);
+	      current_stub_contents =
+		push_thumb2_insn32 (htab, output_bfd, current_stub_contents,
+				    create_instruction_vldmdb
+				    (base_reg,
+				     chunks - (chunk + 1) ?
+				     8 : num_regs - chunk * 8,
+				     first_reg + chunk * 8));
 	    }
-
-	  if (new_insn)
-	    current_stub_contents =
-	      push_thumb2_insn32 (htab, output_bfd, current_stub_contents,
-				  new_insn);
 	}
 
       /* Only this case requires the base register compensation
@@ -16845,7 +16834,7 @@
 	  current_stub_contents =
 	    push_thumb2_insn32 (htab, output_bfd, current_stub_contents,
 				create_instruction_sub
-				(base_reg, base_reg, 4*num_words));
+				(base_reg, base_reg, 4*num_regs));
 	}
 
       /* B initial_insn_addr+4.  */
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf32-avr.c binutils-2.26-avr/bfd/elf32-avr.c
--- binutils-2.26.1-src/bfd/elf32-avr.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf32-avr.c	2016-11-16 03:51:00.000000000 -0800
@@ -722,6 +722,11 @@
    machine will try to optimize call/ret sequences by a single jump
    instruction. This option could be switched off by a linker switch.  */
 static int avr_replace_call_ret_sequences = 1;
+
+/* Non bit addressable registers mask.
+  Resolve BFD_RELOC_AVR_PORT5 by checking this mask in addition to out of
+  range limit.  */
+static unsigned int avr_non_bit_addressable_registers_mask = 0;
 
 
 /* Per-section relaxation related information for avr.  */
@@ -1024,6 +1029,7 @@
   bfd_boolean           use_stubs = FALSE;
   /* Usually is 0, unless we are generating code for a bootloader.  */
   bfd_signed_vma        base_addr = htab->vector_base;
+  unsigned int		lregnumber;
 
   /* Absolute addr of the reloc in the final excecutable.  */
   reloc_addr = rel->r_offset + input_section->output_section->vma
@@ -1388,7 +1394,9 @@
     case R_AVR_PORT5:
       contents += rel->r_offset;
       srel = (bfd_signed_vma) relocation + rel->r_addend;
-      if ((srel & 0xffff) > 0x1f)
+      lregnumber = srel & 0xffff;
+      if ((lregnumber > 0x1f) ||
+          ((1 << lregnumber) & avr_non_bit_addressable_registers_mask))
         return bfd_reloc_outofrange;
       x = bfd_get_16 (input_bfd, contents);
       x = (x & 0xff07) | ((srel & 0x1f) << 3);
@@ -1745,22 +1753,22 @@
   reloc_contents = isec_contents + irel->r_offset;
 
   /* Read value written in object file. */
- bfd_vma x = 0;
+  bfd_signed_vma x = 0;
   switch (ELF32_R_TYPE (irel->r_info))
   {
   case R_AVR_DIFF8:
     {
-      x = *reloc_contents;
+      x = bfd_get_signed_8 (abfd, reloc_contents);
       break;
     }
   case R_AVR_DIFF16:
     {
-      x = bfd_get_16 (abfd, reloc_contents);
+      x = bfd_get_signed_16 (abfd, reloc_contents);
       break;
     }
   case R_AVR_DIFF32:
     {
-      x = bfd_get_32 (abfd, reloc_contents);
+      x = bfd_get_signed_32 (abfd, reloc_contents);
       break;
     }
   default:
@@ -1774,30 +1782,41 @@
      symval (<start_of_section>) + reloc addend. Compute the start and end
      addresses and check if the shrinked insn falls between sym1 and sym2. */
 
-  bfd_vma end_address = symval + irel->r_addend;
-  bfd_vma start_address = end_address - x;
+  bfd_vma sym2_address = symval + irel->r_addend;
+  bfd_vma sym1_address = sym2_address - x;
+
+  /* Don't assume sym2 is bigger than sym1 - the difference
+     could be negative. Compute start and end addresses, and
+     use those to see if they span shrinked_insn_address. */
+
+  bfd_vma start_address = sym1_address < sym2_address
+    ? sym1_address : sym2_address;
+  bfd_vma end_address = sym1_address > sym2_address
+    ? sym1_address : sym2_address;
 
-  /* Reduce the diff value by count bytes and write it back into section
-    contents. */
 
   if (shrinked_insn_address >= start_address
       && shrinked_insn_address <= end_address)
   {
+    /* Reduce the diff value by count bytes and write it back into section
+       contents. */
+    bfd_signed_vma new_diff = x < 0 ? x + count : x - count;
+
     switch (ELF32_R_TYPE (irel->r_info))
     {
     case R_AVR_DIFF8:
       {
-        *reloc_contents = (x - count);
+        bfd_put_signed_8 (abfd, new_diff, reloc_contents);
         break;
       }
     case R_AVR_DIFF16:
       {
-        bfd_put_16 (abfd, (x - count) & 0xFFFF, reloc_contents);
+        bfd_put_signed_16 (abfd, new_diff & 0xFFFF, reloc_contents);
         break;
       }
     case R_AVR_DIFF32:
       {
-        bfd_put_32 (abfd, (x - count) & 0xFFFFFFFF, reloc_contents);
+        bfd_put_signed_32 (abfd, new_diff & 0xFFFFFFFF, reloc_contents);
         break;
       }
     default:
@@ -1809,16 +1828,57 @@
   }
 }
 
+static void
+elf32_avr_adjust_reloc_if_spans_insn (bfd *abfd,
+                                      asection *isec,
+                                      Elf_Internal_Rela *irel,  bfd_vma symval,
+                                      bfd_vma shrinked_insn_address,
+                                      bfd_vma shrink_boundary,
+                                      int count)
+{
+
+  if (elf32_avr_is_diff_reloc (irel))
+    {
+      elf32_avr_adjust_diff_reloc_value (abfd, isec, irel,
+                                         symval,
+                                         shrinked_insn_address,
+                                         count);
+    }
+  else
+    {
+      bfd_vma reloc_value = symval + irel->r_addend;
+      bfd_boolean addend_within_shrink_boundary =
+        (reloc_value <= shrink_boundary);
+
+      bfd_boolean reloc_spans_insn =
+        (symval <= shrinked_insn_address
+         && reloc_value > shrinked_insn_address
+         && addend_within_shrink_boundary);
+
+      if (! reloc_spans_insn)
+        return;
+
+      irel->r_addend -= count;
+
+      if (debug_relax)
+        printf ("Relocation's addend needed to be fixed \n");
+    }
+}
+
 /* Delete some bytes from a section while changing the size of an instruction.
    The parameter "addr" denotes the section-relative offset pointing just
    behind the shrinked instruction. "addr+count" point at the first
-   byte just behind the original unshrinked instruction.  */
+   byte just behind the original unshrinked instruction. If delete_shrinks_insn
+   is FALSE, we are deleting redundant padding bytes from relax_info prop
+   record handling. In that case, addr is section-relative offset of start
+   of padding, and count is the number of padding bytes to delete. */
 
 static bfd_boolean
 elf32_avr_relax_delete_bytes (bfd *abfd,
                               asection *sec,
                               bfd_vma addr,
-                              int count)
+                              int count,
+                              bfd_boolean delete_shrinks_insn)
 {
   Elf_Internal_Shdr *symtab_hdr;
   unsigned int sec_shndx;
@@ -1969,7 +2029,9 @@
 	 continue;
 
        shrinked_insn_address = (sec->output_section->vma
-                                + sec->output_offset + addr - count);
+                                + sec->output_offset + addr);
+       if (delete_shrinks_insn)
+         shrinked_insn_address -= count;
 
        irel = elf_section_data (isec)->relocs;
        /* PR 12161: Read in the relocs for this section if necessary.  */
@@ -2006,6 +2068,12 @@
                   a symbol or section associated with it.  */
                if (sym_sec == sec)
                  {
+                   /* If there is an alignment boundary, we only need to
+                      adjust addends that end up below the boundary. */
+                   bfd_vma shrink_boundary = (reloc_toaddr
+                                              + sec->output_section->vma
+                                              + sec->output_offset);
+
                    symval += sym_sec->output_section->vma
                              + sym_sec->output_offset;
 
@@ -2019,22 +2087,11 @@
                              (unsigned int) (symval + irel->r_addend),
                              (unsigned int) shrinked_insn_address);
 
-                   if (symval <= shrinked_insn_address
-                       && (symval + irel->r_addend) > shrinked_insn_address)
-                     {
-                       if (elf32_avr_is_diff_reloc (irel))
-                         {
-                           elf32_avr_adjust_diff_reloc_value (abfd, isec, irel,
+                   elf32_avr_adjust_reloc_if_spans_insn (abfd, isec, irel,
                                                          symval,
                                                          shrinked_insn_address,
-                                                        count);
-                         }
-
-                       irel->r_addend -= count;
-
-                       if (debug_relax)
-                         printf ("Relocation's addend needed to be fixed \n");
-                     }
+                                                         shrink_boundary,
+                                                         count);
                  }
 	       /* else...Reference symbol is absolute.  No adjustment needed.  */
 	     }
@@ -2652,7 +2709,8 @@
                   {
                     /* Delete two bytes of data.  */
                     if (!elf32_avr_relax_delete_bytes (abfd, sec,
-                                                       irel->r_offset + 2, 2))
+                                                       irel->r_offset + 2, 2,
+                                                       TRUE))
                       goto error_return;
 
                     /* That will change things, so, we should relax again.
@@ -2976,7 +3034,8 @@
 
 			    /* Delete two bytes of data.  */
 			    if (!elf32_avr_relax_delete_bytes (abfd, sec,
-							       irel->r_offset + insn_size, 2))
+							       irel->r_offset + insn_size, 2,
+							       TRUE))
 			      goto error_return;
 
 			    /* That will change things, so, we should relax
@@ -3044,7 +3103,7 @@
                         record->offset -= count;
                         elf32_avr_relax_delete_bytes (abfd, sec,
                                                       addr - count,
-                                                      count);
+                                                      count, FALSE);
                         *again = TRUE;
                       }
                   }
@@ -3362,7 +3421,8 @@
                         bfd_boolean deb_stubs,
                         bfd_boolean deb_relax,
                         bfd_vma pc_wrap_around,
-                        bfd_boolean call_ret_replacement)
+                        bfd_boolean call_ret_replacement,
+                        unsigned int non_bit_addressable_reg_mask)
 {
   struct elf32_avr_link_hash_table *htab = avr_link_hash_table (info);
 
@@ -3376,6 +3436,7 @@
   debug_stubs = deb_stubs;
   avr_pc_wrap_around = pc_wrap_around;
   avr_replace_call_ret_sequences = call_ret_replacement;
+  avr_non_bit_addressable_registers_mask = non_bit_addressable_reg_mask;
 }
 
 
@@ -4094,11 +4155,13 @@
     }
 
   free (contents);
-  free (internal_relocs);
+  if (elf_section_data (sec)->relocs != internal_relocs)
+    free (internal_relocs);
   return r_list;
 
  load_failed:
-  free (internal_relocs);
+  if (elf_section_data (sec)->relocs != internal_relocs)
+    free (internal_relocs);
   free (contents);
   free (r_list);
   return NULL;
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf32-avr.h binutils-2.26-avr/bfd/elf32-avr.h
--- binutils-2.26.1-src/bfd/elf32-avr.h	2015-11-13 00:27:40.000000000 -0800
+++ binutils-2.26-avr/bfd/elf32-avr.h	2016-11-16 03:51:00.000000000 -0800
@@ -26,7 +26,7 @@
 extern void
 elf32_avr_setup_params (struct bfd_link_info *, bfd *, asection *,
                         bfd_boolean, bfd_boolean, bfd_boolean,
-                        bfd_vma, bfd_boolean);
+                        bfd_vma, bfd_boolean, unsigned int);
 
 extern int
 elf32_avr_setup_section_lists (bfd *, struct bfd_link_info *);
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf32-hppa.c binutils-2.26-avr/bfd/elf32-hppa.c
--- binutils-2.26.1-src/bfd/elf32-hppa.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf32-hppa.c	2016-11-16 03:51:00.000000000 -0800
@@ -3245,8 +3245,6 @@
 static bfd_boolean
 elf32_hppa_final_link (bfd *abfd, struct bfd_link_info *info)
 {
-  struct stat buf;
-
   /* Invoke the regular ELF linker to do all the work.  */
   if (!bfd_elf_final_link (abfd, info))
     return FALSE;
@@ -3256,13 +3254,6 @@
   if (bfd_link_relocatable (info))
     return TRUE;
 
-  /* Do not attempt to sort non-regular files.  This is here
-     especially for configure scripts and kernel builds which run
-     tests with "ld [...] -o /dev/null".  */
-  if (stat (abfd->filename, &buf) != 0
-      || !S_ISREG(buf.st_mode))
-    return TRUE;
-
   return elf_hppa_sort_unwind (abfd);
 }
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf32-i386.c binutils-2.26-avr/bfd/elf32-i386.c
--- binutils-2.26.1-src/bfd/elf32-i386.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf32-i386.c	2016-11-16 03:51:00.000000000 -0800
@@ -1830,8 +1830,7 @@
 	       && (sec->flags & SEC_ALLOC) != 0
 	       && (r_type != R_386_PC32
 		   || (h != NULL
-		       && (! (bfd_link_pie (info)
-			      || SYMBOLIC_BIND (info, h))
+		       && (! SYMBOLIC_BIND (info, h)
 			   || h->root.type == bfd_link_hash_defweak
 			   || !h->def_regular))))
 	      || (ELIMINATE_COPY_RELOCS
@@ -1962,7 +1961,7 @@
 	    return FALSE;
 	}
 
-      if (r_type == R_386_GOT32X
+      if ((r_type == R_386_GOT32 || r_type == R_386_GOT32X)
 	  && (h == NULL || h->type != STT_GNU_IFUNC))
 	sec->need_convert_load = 1;
     }
@@ -2491,14 +2490,12 @@
 	}
       else
 	{
-	  eh->plt_got.offset = (bfd_vma) -1;
 	  h->plt.offset = (bfd_vma) -1;
 	  h->needs_plt = 0;
 	}
     }
   else
     {
-      eh->plt_got.offset = (bfd_vma) -1;
       h->plt.offset = (bfd_vma) -1;
       h->needs_plt = 0;
     }
@@ -2816,16 +2813,14 @@
       unsigned int nop;
       bfd_vma nop_offset;
 
-      /* Don't convert R_386_GOT32 since we can't tell if it is applied
-	 to "mov $foo@GOT, %reg" which isn't a load via GOT.  */
-      if (r_type != R_386_GOT32X)
+      if (r_type != R_386_GOT32 && r_type != R_386_GOT32X)
 	continue;
 
       roff = irel->r_offset;
       if (roff < 2)
 	continue;
 
-      /* Addend for R_386_GOT32X relocation must be 0.  */
+      /* Addend for R_386_GOT32 and R_386_GOT32X relocations must be 0.  */
       addend = bfd_get_32 (abfd, contents + roff);
       if (addend != 0)
 	continue;
@@ -2833,11 +2828,13 @@
       modrm = bfd_get_8 (abfd, contents + roff - 1);
       baseless = (modrm & 0xc7) == 0x5;
 
-      if (baseless
+      if (r_type == R_386_GOT32X
+	  && baseless
 	  && bfd_link_pic (link_info))
 	{
 	  /* For PIC, disallow R_386_GOT32X without a base register
-	     since we don't know what the GOT base is.  */
+	     since we don't know what the GOT base is.   Allow
+	     R_386_GOT32 for existing object files.  */
 	  const char *name;
 
 	  if (r_symndx < symtab_hdr->sh_info)
@@ -2865,6 +2862,12 @@
       /* It is OK to convert mov to lea.  */
       if (opcode != 0x8b)
 	{
+	  /* Only convert R_386_GOT32X relocation for call, jmp or
+	     one of adc, add, and, cmp, or, sbb, sub, test, xor
+	     instructions.  */
+	  if (r_type != R_386_GOT32X)
+	    continue;
+
 	  /* It is OK to convert indirect branch to direct branch.  It
 	     is OK to convert adc, add, and, cmp, or, sbb, sub, test,
 	     xor only when PIC is false.   */
@@ -2872,8 +2875,8 @@
 	    continue;
 	}
 
-      /* Try to convert R_386_GOT32X.  Get the symbol referred to by
-         the reloc.  */
+      /* Try to convert R_386_GOT32 and R_386_GOT32X.  Get the symbol
+	 referred to by the reloc.  */
       if (r_symndx < symtab_hdr->sh_info)
 	{
 	  isym = bfd_sym_from_r_symndx (&htab->sym_cache,
@@ -2985,7 +2988,8 @@
 		{
 		  /* Convert "mov foo@GOT(%reg1), %reg2" to
 		     "lea foo@GOTOFF(%reg1), %reg2".  */
-		  if (baseless || !bfd_link_pic (link_info))
+		  if (r_type == R_386_GOT32X
+		      && (baseless || !bfd_link_pic (link_info)))
 		    {
 		      r_type = R_386_32;
 		      /* For R_386_32, convert
@@ -3949,26 +3953,20 @@
 		    }
 
 		  relocation = off;
-		}
-	      else
-		relocation = (base_got->output_section->vma
-			      + base_got->output_offset + off
-			      - gotplt->output_section->vma
-			      - gotplt->output_offset);
-
-	      if ((*(contents + rel->r_offset - 1) & 0xc7) == 0x5)
-		{
-		  if (bfd_link_pic (info))
-		    goto disallow_got32;
 
-		  /* Add the GOT base if there is no base register.  */
-		  relocation += (gotplt->output_section->vma
-				 + gotplt->output_offset);
+		  /* Adjust for static executables.  */
+		  if (htab->elf.splt == NULL)
+		    relocation += gotplt->output_offset;
 		}
-	      else if (htab->elf.splt == NULL)
+	      else
 		{
+		  relocation = (base_got->output_section->vma
+				+ base_got->output_offset + off
+				- gotplt->output_section->vma
+				- gotplt->output_offset);
 		  /* Adjust for static executables.  */
-		  relocation += gotplt->output_offset;
+		  if (htab->elf.splt == NULL)
+		    relocation += gotplt->output_offset;
 		}
 
 	      goto do_relocation;
@@ -4018,12 +4016,10 @@
 
 	  /* It is relative to .got.plt section.  */
 	  if (h->got.offset != (bfd_vma) -1)
-	    /* Use GOT entry.  Mask off the least significant bit in
-	       GOT offset which may be set by R_386_GOT32 processing
-	       below.  */
+	    /* Use GOT entry.  */
 	    relocation = (htab->elf.sgot->output_section->vma
 			  + htab->elf.sgot->output_offset
-			  + (h->got.offset & ~1) - offplt);
+			  + h->got.offset - offplt);
 	  else
 	    /* Use GOTPLT entry.  */
 	    relocation = (h->plt.offset / plt_entry_size - 1 + 3) * 4;
@@ -4126,39 +4122,10 @@
 	  if (off >= (bfd_vma) -2)
 	    abort ();
 
-	  relocation = (htab->elf.sgot->output_section->vma
-			+ htab->elf.sgot->output_offset + off);
-	  if ((*(contents + rel->r_offset - 1) & 0xc7) == 0x5)
-	    {
-	      if (bfd_link_pic (info))
-		{
-		  /* For PIC, disallow R_386_GOT32 without a base
-		     register since we don't know what the GOT base
-		     is.  */
-		  const char *name;
-
-disallow_got32:
-		  if (h == NULL)
-		    name = bfd_elf_sym_name (input_bfd, symtab_hdr, sym,
-					     NULL);
-		  else
-		    name = h->root.root.string;
-
-		  (*_bfd_error_handler)
-		    (_("%B: direct GOT relocation %s against `%s' without base register can not be used when making a shared object"),
-		     input_bfd, howto->name, name);
-		  bfd_set_error (bfd_error_bad_value);
-		  return FALSE;
-		}
-	    }
-	  else
-	    {
-	      /* Subtract the .got.plt section address only with a base
-		 register.  */
-	      relocation -= (htab->elf.sgotplt->output_section->vma
-			     + htab->elf.sgotplt->output_offset);
-	    }
-
+	  relocation = htab->elf.sgot->output_section->vma
+		       + htab->elf.sgot->output_offset + off
+		       - htab->elf.sgotplt->output_section->vma
+		       - htab->elf.sgotplt->output_offset;
 	  break;
 
 	case R_386_GOTOFF:
@@ -4318,8 +4285,8 @@
 	      else if (h != NULL
 		       && h->dynindx != -1
 		       && (r_type == R_386_PC32
-			   || !(bfd_link_executable (info)
-				|| SYMBOLIC_BIND (info, h))
+			   || !bfd_link_pic (info)
+			   || !SYMBOLIC_BIND (info, h)
 			   || !h->def_regular))
 		outrel.r_info = ELF32_R_INFO (h->dynindx, r_type);
 	      else
@@ -5388,23 +5355,19 @@
   bfd *abfd = info->output_bfd;
   const struct elf_backend_data *bed = get_elf_backend_data (abfd);
   struct elf_link_hash_table *htab = elf_hash_table (info);
+  unsigned long r_symndx = ELF32_R_SYM (rela->r_info);
+  Elf_Internal_Sym sym;
 
-  if (htab->dynsym != NULL
-      && htab->dynsym->contents != NULL)
-    {
-      /* Check relocation against STT_GNU_IFUNC symbol if there are
-         dynamic symbols.  */
-      unsigned long r_symndx = ELF32_R_SYM (rela->r_info);
-      Elf_Internal_Sym sym;
-      if (!bed->s->swap_symbol_in (abfd,
-				   (htab->dynsym->contents
-				    + r_symndx * sizeof (Elf32_External_Sym)),
-				   0, &sym))
-	abort ();
+  if (htab->dynsym == NULL
+      || !bed->s->swap_symbol_in (abfd,
+				  (htab->dynsym->contents
+				   + r_symndx * sizeof (Elf32_External_Sym)),
+				  0, &sym))
+    abort ();
 
-      if (ELF32_ST_TYPE (sym.st_info) == STT_GNU_IFUNC)
-	return reloc_class_ifunc;
-    }
+  /* Check relocation against STT_GNU_IFUNC symbol.  */
+  if (ELF32_ST_TYPE (sym.st_info) == STT_GNU_IFUNC)
+    return reloc_class_ifunc;
 
   switch (ELF32_R_TYPE (rela->r_info))
     {
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf32-ppc.c binutils-2.26-avr/bfd/elf32-ppc.c
--- binutils-2.26.1-src/bfd/elf32-ppc.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf32-ppc.c	2016-11-16 03:51:00.000000000 -0800
@@ -5166,7 +5166,6 @@
 		  tga->root.type = bfd_link_hash_indirect;
 		  tga->root.u.i.link = &opt->root;
 		  ppc_elf_copy_indirect_symbol (info, opt, tga);
-		  opt->forced_local = 0;
 		  if (opt->dynindx != -1)
 		    {
 		      /* Use __tls_get_addr_opt in dynamic relocations.  */
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf64-hppa.c binutils-2.26-avr/bfd/elf64-hppa.c
--- binutils-2.26.1-src/bfd/elf64-hppa.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf64-hppa.c	2016-11-16 03:51:00.000000000 -0800
@@ -2945,7 +2945,7 @@
 static bfd_boolean
 elf_hppa_final_link (bfd *abfd, struct bfd_link_info *info)
 {
-  struct stat buf;
+  bfd_boolean retval;
   struct elf64_hppa_link_hash_table *hppa_info = hppa_link_hash_table (info);
 
   if (hppa_info == NULL)
@@ -3029,8 +3029,7 @@
 			  info);
 
   /* Invoke the regular ELF backend linker to do all the work.  */
-  if (!bfd_elf_final_link (abfd, info))
-    return FALSE;
+  retval = bfd_elf_final_link (abfd, info);
 
   elf_link_hash_traverse (elf_hash_table (info),
 			  elf_hppa_remark_useless_dynamic_symbols,
@@ -3038,17 +3037,10 @@
 
   /* If we're producing a final executable, sort the contents of the
      unwind section. */
-  if (bfd_link_relocatable (info))
-    return TRUE;
-
-  /* Do not attempt to sort non-regular files.  This is here
-     especially for configure scripts and kernel builds which run
-     tests with "ld [...] -o /dev/null".  */
-  if (stat (abfd->filename, &buf) != 0
-      || !S_ISREG(buf.st_mode))
-    return TRUE;
+  if (retval && !bfd_link_relocatable (info))
+    retval = elf_hppa_sort_unwind (abfd);
 
-  return elf_hppa_sort_unwind (abfd);
+  return retval;
 }
 
 /* Relocate the given INSN.  VALUE should be the actual value we want
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf64-ppc.c binutils-2.26-avr/bfd/elf64-ppc.c
--- binutils-2.26.1-src/bfd/elf64-ppc.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf64-ppc.c	2016-11-16 03:51:00.000000000 -0800
@@ -2570,7 +2570,6 @@
       elf_symbol_type *elfsym = (elf_symbol_type *) symbol;
 
       if (symbol->section->owner != abfd
-	  && symbol->section->owner != NULL
 	  && abiversion (symbol->section->owner) >= 2)
 	{
 	  unsigned int i;
@@ -4345,20 +4344,14 @@
 
   htab = ppc_hash_table (info);
 
+  /* Create .sfpr for code to save and restore fp regs.  */
   flags = (SEC_ALLOC | SEC_LOAD | SEC_CODE | SEC_READONLY
 	   | SEC_HAS_CONTENTS | SEC_IN_MEMORY | SEC_LINKER_CREATED);
-  if (htab->params->save_restore_funcs)
-    {
-      /* Create .sfpr for code to save and restore fp regs.  */
-      htab->sfpr = bfd_make_section_anyway_with_flags (dynobj, ".sfpr",
-						       flags);
-      if (htab->sfpr == NULL
-	  || ! bfd_set_section_alignment (dynobj, htab->sfpr, 2))
-	return FALSE;
-    }
-
-  if (bfd_link_relocatable (info))
-    return TRUE;
+  htab->sfpr = bfd_make_section_anyway_with_flags (dynobj, ".sfpr",
+						   flags);
+  if (htab->sfpr == NULL
+      || ! bfd_set_section_alignment (dynobj, htab->sfpr, 2))
+    return FALSE;
 
   /* Create .glink for lazy dynamic linking support.  */
   htab->glink = bfd_make_section_anyway_with_flags (dynobj, ".glink",
@@ -4436,6 +4429,9 @@
   htab->elf.dynobj = params->stub_bfd;
   htab->params = params;
 
+  if (bfd_link_relocatable (info))
+    return TRUE;
+
   return create_linkage_sections (htab->elf.dynobj, info);
 }
 
@@ -6669,7 +6665,7 @@
       sym[len + 0] = i / 10 + '0';
       sym[len + 1] = i % 10 + '0';
       h = (struct ppc_link_hash_entry *)
-	elf_link_hash_lookup (&htab->elf, sym, writing, TRUE, TRUE);
+	elf_link_hash_lookup (&htab->elf, sym, FALSE, FALSE, TRUE);
       if (stub_sec != NULL)
 	{
 	  if (h != NULL
@@ -6710,7 +6706,6 @@
 	      h->elf.root.u.def.value = htab->sfpr->size;
 	      h->elf.type = STT_FUNC;
 	      h->elf.def_regular = 1;
-	      h->elf.non_elf = 0;
 	      _bfd_elf_link_hash_hide_symbol (info, &h->elf, TRUE);
 	      writing = TRUE;
 	      if (htab->sfpr->contents == NULL)
@@ -7055,28 +7050,14 @@
 			    struct bfd_link_info *info)
 {
   struct ppc_link_hash_table *htab;
+  unsigned int i;
 
   htab = ppc_hash_table (info);
   if (htab == NULL)
     return FALSE;
 
-  /* Provide any missing _save* and _rest* functions.  */
-  if (htab->sfpr != NULL)
-    {
-      unsigned int i;
-
-      htab->sfpr->size = 0;
-      for (i = 0; i < ARRAY_SIZE (save_res_funcs); i++)
-	if (!sfpr_define (info, &save_res_funcs[i], NULL))
-	  return FALSE;
-      if (htab->sfpr->size == 0)
-	htab->sfpr->flags |= SEC_EXCLUDE;
-    }
-
-  if (bfd_link_relocatable (info))
-    return TRUE;
-
-  if (htab->elf.hgot != NULL)
+  if (!bfd_link_relocatable (info)
+      && htab->elf.hgot != NULL)
     {
       _bfd_elf_link_hash_hide_symbol (info, htab->elf.hgot, TRUE);
       /* Make .TOC. defined so as to prevent it being made dynamic.
@@ -7095,8 +7076,22 @@
 			       | STV_HIDDEN);
     }
 
+  if (htab->sfpr == NULL)
+    /* We don't have any relocs.  */
+    return TRUE;
+
+  /* Provide any missing _save* and _rest* functions.  */
+  htab->sfpr->size = 0;
+  if (htab->params->save_restore_funcs)
+    for (i = 0; i < ARRAY_SIZE (save_res_funcs); i++)
+      if (!sfpr_define (info, &save_res_funcs[i], NULL))
+	return FALSE;
+
   elf_link_hash_traverse (&htab->elf, func_desc_adjust, info);
 
+  if (htab->sfpr->size == 0)
+    htab->sfpr->flags |= SEC_EXCLUDE;
+
   return TRUE;
 }
 
@@ -8229,7 +8224,6 @@
 		  tga_fd->root.type = bfd_link_hash_indirect;
 		  tga_fd->root.u.i.link = &opt_fd->root;
 		  ppc64_elf_copy_indirect_symbol (info, opt_fd, tga_fd);
-		  opt_fd->forced_local = 0;
 		  if (opt_fd->dynindx != -1)
 		    {
 		      /* Use __tls_get_addr_opt in dynamic relocations.  */
@@ -8246,7 +8240,6 @@
 		      tga->root.type = bfd_link_hash_indirect;
 		      tga->root.u.i.link = &opt->root;
 		      ppc64_elf_copy_indirect_symbol (info, opt, tga);
-		      opt->forced_local = 0;
 		      _bfd_elf_link_hash_hide_symbol (info, opt,
 						      tga->forced_local);
 		      htab->tls_get_addr = (struct ppc_link_hash_entry *) opt;
@@ -12184,13 +12177,6 @@
   if (!group_sections (info, stub_group_size, stubs_always_before_branch))
     return FALSE;
 
-#define STUB_SHRINK_ITER 20
-  /* Loop until no stubs added.  After iteration 20 of this loop we may
-     exit on a stub section shrinking.  This is to break out of a
-     pathological case where adding stubs on one iteration decreases
-     section gaps (perhaps due to alignment), which then requires
-     fewer or smaller stubs on the next iteration.  */
-
   while (1)
     {
       bfd *input_bfd;
@@ -12572,11 +12558,11 @@
 	   stub_sec != NULL;
 	   stub_sec = stub_sec->next)
 	if ((stub_sec->flags & SEC_LINKER_CREATED) == 0
-	    && stub_sec->rawsize != stub_sec->size
-	    && (htab->stub_iteration <= STUB_SHRINK_ITER
-		|| stub_sec->rawsize < stub_sec->size))
+	    && stub_sec->rawsize != stub_sec->size)
 	  break;
 
+      /* Exit from this loop when no stubs have been added, and no stubs
+	 have changed size.  */
       if (stub_sec == NULL
 	  && (htab->glink_eh_frame == NULL
 	      || htab->glink_eh_frame->rawsize == htab->glink_eh_frame->size))
@@ -12907,6 +12893,9 @@
 	stub_sec->contents = bfd_zalloc (htab->params->stub_bfd, stub_sec->size);
 	if (stub_sec->contents == NULL)
 	  return FALSE;
+	/* We want to check that built size is the same as calculated
+	   size.  rawsize is a convenient location to use.  */
+	stub_sec->rawsize = stub_sec->size;
 	stub_sec->size = 0;
       }
 
@@ -13095,9 +13084,7 @@
     if ((stub_sec->flags & SEC_LINKER_CREATED) == 0)
       {
 	stub_sec_count += 1;
-	if (stub_sec->rawsize != stub_sec->size
-	    && (htab->stub_iteration <= STUB_SHRINK_ITER
-		|| stub_sec->rawsize < stub_sec->size))
+	if (stub_sec->rawsize != stub_sec->size)
 	  break;
       }
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf64-x86-64.c binutils-2.26-avr/bfd/elf64-x86-64.c
--- binutils-2.26.1-src/bfd/elf64-x86-64.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf64-x86-64.c	2016-11-16 03:51:00.000000000 -0800
@@ -2029,8 +2029,7 @@
 	       && (sec->flags & SEC_ALLOC) != 0
 	       && (! IS_X86_64_PCREL_TYPE (r_type)
 		   || (h != NULL
-		       && (! (bfd_link_pie (info)
-			      || SYMBOLIC_BIND (info, h))
+		       && (! SYMBOLIC_BIND (info, h)
 			   || h->root.type == bfd_link_hash_defweak
 			   || !h->def_regular))))
 	      || (ELIMINATE_COPY_RELOCS
@@ -2724,14 +2723,12 @@
 	}
       else
 	{
-	  eh->plt_got.offset = (bfd_vma) -1;
 	  h->plt.offset = (bfd_vma) -1;
 	  h->needs_plt = 0;
 	}
     }
   else
     {
-      eh->plt_got.offset = (bfd_vma) -1;
       h->plt.offset = (bfd_vma) -1;
       h->needs_plt = 0;
     }
@@ -3154,11 +3151,6 @@
 	    continue;
 	}
 
-      /* Don't convert GOTPCREL relocation against large section.  */
-      if (elf_section_data (tsec) !=  NULL
-	  && (elf_section_flags (tsec) & SHF_X86_64_LARGE) != 0)
-	continue;
-
       if (tsec->sec_info_type == SEC_INFO_TYPE_MERGE)
 	{
 	  /* At this stage in linking, no SEC_MERGE symbol has been
@@ -3198,46 +3190,35 @@
 	}
       else
 	{
-	  bfd_signed_vma distance;
+	  asection *asect;
+	  bfd_size_type size;
 
 	  /* At this point, we don't know the load addresses of TSEC
 	     section nor SEC section.  We estimate the distrance between
-	     SEC and TSEC.  We store the estimated distances in the
-	     compressed_size field of the output section, which is only
-	     used to decompress the compressed input section.  */
-	  if (sec->output_section->compressed_size == 0)
-	    {
-	      asection *asect;
-	      bfd_size_type size = 0;
-	      for (asect = link_info->output_bfd->sections;
-		   asect != NULL;
-		   asect = asect->next)
-		/* Skip debug sections since compressed_size is used to
-		   compress debug sections.  */
-		if ((asect->flags & SEC_DEBUGGING) == 0)
-		  {
-		    asection *i;
-		    for (i = asect->map_head.s;
-			 i != NULL;
-			 i = i->map_head.s)
-		      {
-			size = align_power (size, i->alignment_power);
-			size += i->size;
-		      }
-		    asect->compressed_size = size;
-		  }
+	     SEC and TSEC.  */
+	  size = 0;
+	  for (asect = sec->output_section;
+	       asect != NULL && asect != tsec->output_section;
+	       asect = asect->next)
+	    {
+	      asection *i;
+	      for (i = asect->output_section->map_head.s;
+		   i != NULL;
+		   i = i->map_head.s)
+		{
+		  size = align_power (size, i->alignment_power);
+		  size += i->size;
+		}
 	    }
 
 	  /* Don't convert GOTPCREL relocations if TSEC isn't placed
 	     after SEC.  */
-	  distance = (tsec->output_section->compressed_size
-		      - sec->output_section->compressed_size);
-	  if (distance < 0)
+	  if (asect == NULL)
 	    continue;
 
 	  /* Take PT_GNU_RELRO segment into account by adding
 	     maxpagesize.  */
-	  if ((toff + distance + maxpagesize - roff + 0x80000000)
+	  if ((toff + size + maxpagesize - roff + 0x80000000)
 	      > 0xffffffff)
 	    continue;
 	}
@@ -4650,8 +4631,8 @@
 	      else if (h != NULL
 		       && h->dynindx != -1
 		       && (IS_X86_64_PCREL_TYPE (r_type)
-			   || !(bfd_link_executable (info)
-				|| SYMBOLIC_BIND (info, h))
+			   || ! bfd_link_pic (info)
+			   || ! SYMBOLIC_BIND (info, h)
 			   || ! h->def_regular))
 		{
 		  outrel.r_info = htab->r_info (h->dynindx, r_type);
@@ -5747,23 +5728,19 @@
   bfd *abfd = info->output_bfd;
   const struct elf_backend_data *bed = get_elf_backend_data (abfd);
   struct elf_x86_64_link_hash_table *htab = elf_x86_64_hash_table (info);
+  unsigned long r_symndx = htab->r_sym (rela->r_info);
+  Elf_Internal_Sym sym;
 
-  if (htab->elf.dynsym != NULL
-      && htab->elf.dynsym->contents != NULL)
-    {
-      /* Check relocation against STT_GNU_IFUNC symbol if there are
-         dynamic symbols.  */
-      unsigned long r_symndx = htab->r_sym (rela->r_info);
-      Elf_Internal_Sym sym;
-      if (!bed->s->swap_symbol_in (abfd,
-				   (htab->elf.dynsym->contents
-				    + r_symndx * bed->s->sizeof_sym),
-				   0, &sym))
-	abort ();
+  if (htab->elf.dynsym == NULL
+      || !bed->s->swap_symbol_in (abfd,
+				  (htab->elf.dynsym->contents
+				   + r_symndx * bed->s->sizeof_sym),
+				  0, &sym))
+    abort ();
 
-      if (ELF_ST_TYPE (sym.st_info) == STT_GNU_IFUNC)
-	return reloc_class_ifunc;
-    }
+  /* Check relocation against STT_GNU_IFUNC symbol.  */
+  if (ELF_ST_TYPE (sym.st_info) == STT_GNU_IFUNC)
+    return reloc_class_ifunc;
 
   switch ((int) ELF32_R_TYPE (rela->r_info))
     {
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf-bfd.h binutils-2.26-avr/bfd/elf-bfd.h
--- binutils-2.26.1-src/bfd/elf-bfd.h	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf-bfd.h	2016-11-16 03:51:00.000000000 -0800
@@ -2039,11 +2039,9 @@
 extern unsigned int _bfd_elf_strtab_refcount
   (struct elf_strtab_hash *, bfd_size_type);
 extern void _bfd_elf_strtab_clear_all_refs
-  (struct elf_strtab_hash *);
-extern void *_bfd_elf_strtab_save
-  (struct elf_strtab_hash *);
-extern void _bfd_elf_strtab_restore
-  (struct elf_strtab_hash *, void *);
+  (struct elf_strtab_hash *tab);
+extern void _bfd_elf_strtab_restore_size
+  (struct elf_strtab_hash *, bfd_size_type);
 extern bfd_size_type _bfd_elf_strtab_size
   (struct elf_strtab_hash *);
 extern bfd_size_type _bfd_elf_strtab_offset
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elflink.c binutils-2.26-avr/bfd/elflink.c
--- binutils-2.26.1-src/bfd/elflink.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elflink.c	2016-11-16 03:51:00.000000000 -0800
@@ -555,19 +555,6 @@
   if (h == NULL)
     return provide;
 
-  if (h->versioned == unknown)
-    {
-      /* Set versioned if symbol version is unknown.  */
-      char *version = strrchr (name, ELF_VER_CHR);
-      if (version)
-	{
-	  if (version > name && version[-1] != ELF_VER_CHR)
-	    h->versioned = versioned_hidden;
-	  else
-	    h->versioned = versioned;
-	}
-    }
-
   switch (h->root.type)
     {
     case bfd_link_hash_defined:
@@ -1184,20 +1171,21 @@
   oldfunc = (h->type != STT_NOTYPE
 	     && bed->is_function_type (h->type));
 
-  /* If creating a default indirect symbol ("foo" or "foo@") from a
-     dynamic versioned definition ("foo@@") skip doing so if there is
-     an existing regular definition with a different type.  We don't
-     want, for example, a "time" variable in the executable overriding
-     a "time" function in a shared library.  */
+  /* When we try to create a default indirect symbol from the dynamic
+     definition with the default version, we skip it if its type and
+     the type of existing regular definition mismatch.  */
   if (pold_alignment == NULL
       && newdyn
       && newdef
       && !olddyn
-      && (olddef || h->root.type == bfd_link_hash_common)
-      && ELF_ST_TYPE (sym->st_info) != h->type
-      && ELF_ST_TYPE (sym->st_info) != STT_NOTYPE
-      && h->type != STT_NOTYPE
-      && !(newfunc && oldfunc))
+      && (((olddef || h->root.type == bfd_link_hash_common)
+	   && ELF_ST_TYPE (sym->st_info) != h->type
+	   && ELF_ST_TYPE (sym->st_info) != STT_NOTYPE
+	   && h->type != STT_NOTYPE
+	   && !(newfunc && oldfunc))
+	  || (olddef
+	      && ((h->type == STT_GNU_IFUNC)
+		  != (ELF_ST_TYPE (sym->st_info) == STT_GNU_IFUNC)))))
     {
       *skip = TRUE;
       return TRUE;
@@ -1484,16 +1472,13 @@
      represent variables; this can cause confusion in principle, but
      any such confusion would seem to indicate an erroneous program or
      shared library.  We also permit a common symbol in a regular
-     object to override a weak symbol in a shared object.  A common
-     symbol in executable also overrides a symbol in a shared object.  */
+     object to override a weak symbol in a shared object.  */
 
   if (newdyn
       && newdef
       && (olddef
 	  || (h->root.type == bfd_link_hash_common
-	      && (newweak
-		  || newfunc
-		  || (!olddyn && bfd_link_executable (info))))))
+	      && (newweak || newfunc))))
     {
       *override = TRUE;
       newdef = FALSE;
@@ -1765,31 +1750,6 @@
   if (skip)
     goto nondefault;
 
-  if (hi->def_regular)
-    {
-      /* If the undecorated symbol will have a version added by a
-	 script different to H, then don't indirect to/from the
-	 undecorated symbol.  This isn't ideal because we may not yet
-	 have seen symbol versions, if given by a script on the
-	 command line rather than via --version-script.  */
-      if (hi->verinfo.vertree == NULL && info->version_info != NULL)
-	{
-	  bfd_boolean hide;
-
-	  hi->verinfo.vertree
-	    = bfd_find_version_for_sym (info->version_info,
-					hi->root.root.string, &hide);
-	  if (hi->verinfo.vertree != NULL && hide)
-	    {
-	      (*bed->elf_backend_hide_symbol) (info, hi, TRUE);
-	      goto nondefault;
-	    }
-	}
-      if (hi->verinfo.vertree != NULL
-	  && strcmp (p + 1 + (p[1] == '@'), hi->verinfo.vertree->name) != 0)
-	goto nondefault;
-    }
-
   if (! override)
     {
       /* Add the default symbol if not performing a relocatable link.  */
@@ -3521,7 +3481,8 @@
   void *old_ent;
   struct bfd_link_hash_entry *old_undefs = NULL;
   struct bfd_link_hash_entry *old_undefs_tail = NULL;
-  void *old_strtab = NULL;
+  long old_dynsymcount = 0;
+  bfd_size_type old_dynstr_size = 0;
   size_t tabsize = 0;
   asection *s;
   bfd_boolean just_syms;
@@ -3962,9 +3923,8 @@
       old_table = htab->root.table.table;
       old_size = htab->root.table.size;
       old_count = htab->root.table.count;
-      old_strtab = _bfd_elf_strtab_save (htab->dynstr);
-      if (old_strtab == NULL)
-	goto error_free_vers;
+      old_dynsymcount = htab->dynsymcount;
+      old_dynstr_size = _bfd_elf_strtab_size (htab->dynstr);
 
       for (i = 0; i < htab->root.table.size; i++)
 	{
@@ -4602,10 +4562,8 @@
 		break;
 	      }
 
-	  /* Don't add DT_NEEDED for references from the dummy bfd nor
-	     for unmatched symbol.  */
+	  /* Don't add DT_NEEDED for references from the dummy bfd.  */
 	  if (!add_needed
-	      && matched
 	      && definition
 	      && ((dynsym
 		   && h->ref_regular_nonweak
@@ -4675,9 +4633,7 @@
       memcpy (htab->root.table.table, old_tab, tabsize);
       htab->root.undefs = old_undefs;
       htab->root.undefs_tail = old_undefs_tail;
-      _bfd_elf_strtab_restore (htab->dynstr, old_strtab);
-      free (old_strtab);
-      old_strtab = NULL;
+      _bfd_elf_strtab_restore_size (htab->dynstr, old_dynstr_size);
       for (i = 0; i < htab->root.table.size; i++)
 	{
 	  struct bfd_hash_entry *p;
@@ -4690,6 +4646,9 @@
 	      h = (struct elf_link_hash_entry *) p;
 	      if (h->root.type == bfd_link_hash_warning)
 		h = (struct elf_link_hash_entry *) h->root.u.i.link;
+	      if (h->dynindx >= old_dynsymcount
+		  && h->dynstr_index < old_dynstr_size)
+		_bfd_elf_strtab_delref (htab->dynstr, h->dynstr_index);
 
 	      /* Preserve the maximum alignment and size for common
 		 symbols even if this dynamic lib isn't on DT_NEEDED
@@ -5059,8 +5018,6 @@
  error_free_vers:
   if (old_tab != NULL)
     free (old_tab);
-  if (old_strtab != NULL)
-    free (old_strtab);
   if (nondeflt_vers != NULL)
     free (nondeflt_vers);
   if (extversym != NULL)
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elfnn-aarch64.c binutils-2.26-avr/bfd/elfnn-aarch64.c
--- binutils-2.26.1-src/bfd/elfnn-aarch64.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elfnn-aarch64.c	2016-11-16 03:51:00.000000000 -0800
@@ -2655,7 +2655,7 @@
   bfd_boolean via_plt_p;
 
   if (st_type != STT_FUNC
-      && (sym_sec == input_sec))
+      && (sym_sec != bfd_abs_section_ptr))
     return stub_type;
 
   globals = elf_aarch64_hash_table (info);
@@ -4174,7 +4174,7 @@
 		      goto error_ret_free_internal;
 		    }
 
-		  stub_entry->target_value = sym_value + irela->r_addend;
+		  stub_entry->target_value = sym_value;
 		  stub_entry->target_section = sym_sec;
 		  stub_entry->stub_type = stub_type;
 		  stub_entry->h = hash;
@@ -5280,28 +5280,15 @@
 	/* Check if a stub has to be inserted because the destination
 	   is too far away.  */
 	struct elf_aarch64_stub_hash_entry *stub_entry = NULL;
-
-	/* If the branch destination is directed to plt stub, "value" will be
-	   the final destination, otherwise we should plus signed_addend, it may
-	   contain non-zero value, for example call to local function symbol
-	   which are turned into "sec_sym + sec_off", and sec_off is kept in
-	   signed_addend.  */
-	if (! aarch64_valid_branch_p (via_plt_p ? value : value + signed_addend,
-				      place))
+	if (! aarch64_valid_branch_p (value, place))
 	  /* The target is out of reach, so redirect the branch to
 	     the local stub for this function.  */
 	stub_entry = elfNN_aarch64_get_stub_entry (input_section, sym_sec, h,
 						   rel, globals);
 	if (stub_entry != NULL)
-	  {
-	    value = (stub_entry->stub_offset
-		     + stub_entry->stub_sec->output_offset
-		     + stub_entry->stub_sec->output_section->vma);
-
-	    /* We have redirected the destination to stub entry address,
-	       so ignore any addend record in the original rela entry.  */
-	    signed_addend = 0;
-	  }
+	  value = (stub_entry->stub_offset
+		   + stub_entry->stub_sec->output_offset
+		   + stub_entry->stub_sec->output_section->vma);
       }
       value = _bfd_aarch64_elf_resolve_relocation (bfd_r_type, place, value,
 						   signed_addend, weak_undef_p);
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/elf-strtab.c binutils-2.26-avr/bfd/elf-strtab.c
--- binutils-2.26.1-src/bfd/elf-strtab.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/elf-strtab.c	2016-11-16 03:51:00.000000000 -0800
@@ -215,45 +215,16 @@
     tab->array[idx]->refcount = 0;
 }
 
-/* Save strtab refcounts prior to adding --as-needed library.  */
-
-struct strtab_save
-{
-  bfd_size_type size;
-  unsigned int refcount[1];
-};
-
-void *
-_bfd_elf_strtab_save (struct elf_strtab_hash *tab)
-{
-  struct strtab_save *save;
-  bfd_size_type idx, size;
-
-  size = sizeof (*save) + (tab->size - 1) * sizeof (save->refcount[0]);
-  save = bfd_malloc (size);
-  if (save == NULL)
-    return save;
-
-  save->size = tab->size;
-  for (idx = 1; idx < tab->size; idx++)
-    save->refcount[idx] = tab->array[idx]->refcount;
-  return save;
-}
-
-/* Restore strtab refcounts on finding --as-needed library not needed.  */
-
+/* Downsizes strtab.  Entries from IDX up to the current size are
+   removed from the array.  */
 void
-_bfd_elf_strtab_restore (struct elf_strtab_hash *tab, void *buf)
+_bfd_elf_strtab_restore_size (struct elf_strtab_hash *tab, bfd_size_type idx)
 {
-  bfd_size_type idx, curr_size = tab->size;
-  struct strtab_save *save = (struct strtab_save *) buf;
+  bfd_size_type curr_size = tab->size;
 
   BFD_ASSERT (tab->sec_size == 0);
-  BFD_ASSERT (save->size <= curr_size);
-  tab->size = save->size;
-  for (idx = 1; idx < save->size; ++idx)
-    tab->array[idx]->refcount = save->refcount[idx];
-
+  BFD_ASSERT (idx <= curr_size);
+  tab->size = idx;
   for (; idx < curr_size; ++idx)
     {
       /* We don't remove entries from the hash table, just set their
Only in binutils-2.26-avr/bfd/po: .cvsignore
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/version.h binutils-2.26-avr/bfd/version.h
--- binutils-2.26.1-src/bfd/version.h	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/bfd/version.h	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
-#define BFD_VERSION_DATE 20160629
+#define BFD_VERSION_DATE 20160125
 #define BFD_VERSION @bfd_version@
 #define BFD_VERSION_STRING  @bfd_version_package@ @bfd_version_string@
 #define REPORT_BUGS_TO @report_bugs_to@
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/bfd/version.m4 binutils-2.26-avr/bfd/version.m4
--- binutils-2.26.1-src/bfd/version.m4	2016-06-29 00:59:46.000000000 -0700
+++ binutils-2.26-avr/bfd/version.m4	2016-11-16 03:51:00.000000000 -0800
@@ -1 +1 @@
-m4_define([BFD_VERSION], [2.26.1])
+m4_define([BFD_VERSION], [2.26])
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/ChangeLog binutils-2.26-avr/binutils/ChangeLog
--- binutils-2.26.1-src/binutils/ChangeLog	2016-06-29 00:59:50.000000000 -0700
+++ binutils-2.26-avr/binutils/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -1,47 +1,13 @@
-2016-06-29  Tristan Gingold  <gingold@adacore.com>
+2016-05-04  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
 
-	* configure: Regenerate.
-
-2016-06-28  Alan Modra  <amodra@gmail.com>
-
-	PR 20304
-	* objdump.c (objdump_print_symname): Don't attempt to retrieve
-	version info from synthetic symbols.
-
-2016-06-13  Alan Modra  <amodra@gmail.com>
-
-	* objcopy.c (copy_main): Init newsym->othersym.
-
-2016-03-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-01-28  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/19523
-	* Makefile.am (check-DEJAGNU): Pass CC and CC_FOR_BUILD to
-	runtest.
-	* Makefile.in: Regenerated.
-	* testsuite/binutils-all/compress.exp (test_gnu_debuglink): New
-	proc.
-	Run test_gnu_debuglink for native ELF build.
-
-2016-03-09  Nick Clifton  <nickc@redhat.com>
-
-	PR binutils/19775
-	* testsuite/binutils-all/ar.exp (proc empty_archive): New proc.
-	Run the new proc.
-	* testsuite/binutils-all/empty: New, empty, file.
-
-2016-02-12  H.J. Lu  <hongjiu.lu@intel.com>
+	* testsuite/lib/binutils-common.exp (is_elf_format): Add avr-*-*.
 
-	Backport from master
-	2016-02-12  H.J. Lu  <hongjiu.lu@intel.com>
+2016-04-29  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
 
-	* doc/binutils.texi: Fix a typo.
-
-2016-01-25  Tristan Gingold  <gingold@adacore.com>
-
-	* configure: Regenerate.
+	* readelf.c (is_32bit_pcrel_reloc): Return true if reloc is 32-bit
+	PC relocation for AVR target.
+	(is_none_reloc): Return true if reloc is any of AVR diff
+	relocations.
 
 2016-01-25  Tristan Gingold  <gingold@adacore.com>
 
@@ -283,12 +249,12 @@
 
 2015-07-10  H.J. Lu  <hongjiu.lu@intel.com>
 
-	PR binutils/18656
-	* objcopy.c (setup_section): Call bfd_convert_section_size
-	to get the output section size.
-	(copy_section): Get the section size from the output section
-	and call bfd_get_full_section_contents to convert section
-	contents for output.
+	 PR binutils/18656
+	 * objcopy.c (setup_section): Call bfd_convert_section_size
+	 to get the output section size.
+	 (copy_section): Get the section size from the output section
+	 and call bfd_get_full_section_contents to convert section
+	 contents for output.
 
 2015-07-10  H.J. Lu  <hongjiu.lu@intel.com>
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/configure binutils-2.26-avr/binutils/configure
--- binutils-2.26.1-src/binutils/configure	2016-06-29 00:59:50.000000000 -0700
+++ binutils-2.26-avr/binutils/configure	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.64 for binutils 2.26.1.
+# Generated by GNU Autoconf 2.64 for binutils 2.26.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software
@@ -556,8 +556,8 @@
 # Identity of this package.
 PACKAGE_NAME='binutils'
 PACKAGE_TARNAME='binutils'
-PACKAGE_VERSION='2.26.1'
-PACKAGE_STRING='binutils 2.26.1'
+PACKAGE_VERSION='2.26'
+PACKAGE_STRING='binutils 2.26'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
@@ -1335,7 +1335,7 @@
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures binutils 2.26.1 to adapt to many kinds of systems.
+\`configure' configures binutils 2.26 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1406,7 +1406,7 @@
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of binutils 2.26.1:";;
+     short | recursive ) echo "Configuration of binutils 2.26:";;
    esac
   cat <<\_ACEOF
 
@@ -1527,7 +1527,7 @@
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-binutils configure 2.26.1
+binutils configure 2.26
 generated by GNU Autoconf 2.64
 
 Copyright (C) 2009 Free Software Foundation, Inc.
@@ -2169,7 +2169,7 @@
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by binutils $as_me 2.26.1, which was
+It was created by binutils $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   $ $0 $@
@@ -3977,7 +3977,7 @@
 
 # Define the identity of the package.
  PACKAGE='binutils'
- VERSION='2.26.1'
+ VERSION='2.26'
 
 
 cat >>confdefs.h <<_ACEOF
@@ -15142,7 +15142,7 @@
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by binutils $as_me 2.26.1, which was
+This file was extended by binutils $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -15206,7 +15206,7 @@
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_version="\\
-binutils config.status 2.26.1
+binutils config.status 2.26
 configured by $0, generated by GNU Autoconf 2.64,
   with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/addr2line.1 binutils-2.26-avr/binutils/doc/addr2line.1
--- binutils-2.26.1-src/binutils/doc/addr2line.1	2016-06-29 01:03:40.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/addr2line.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "ADDR2LINE 1"
-.TH ADDR2LINE 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH ADDR2LINE 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/ar.1 binutils-2.26-avr/binutils/doc/ar.1
--- binutils-2.26.1-src/binutils/doc/ar.1	2016-06-29 01:03:40.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/ar.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "AR 1"
-.TH AR 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH AR 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/binutils.info binutils-2.26-avr/binutils/doc/binutils.info
--- binutils-2.26.1-src/binutils/doc/binutils.info	2016-06-29 01:03:40.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/binutils.info	2016-11-16 03:51:00.000000000 -0800
@@ -1627,7 +1627,7 @@
 `--compress-debug-sections=zlib-gabi'
      For ELF files, these options control how DWARF debug sections are
      compressed.  `--compress-debug-sections=none' is equivalent to
-     `--decompress-debug-sections'.  `--compress-debug-sections=zlib'
+     `--nocompress-debug-sections'.  `--compress-debug-sections=zlib'
      and `--compress-debug-sections=zlib-gabi' are equivalent to
      `--compress-debug-sections'.  `--compress-debug-sections=zlib-gnu'
      compresses DWARF debug sections using zlib.  The debug sections
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/binutils.texi binutils-2.26-avr/binutils/doc/binutils.texi
--- binutils-2.26.1-src/binutils/doc/binutils.texi	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/binutils.texi	2016-11-16 03:51:00.000000000 -0800
@@ -1872,7 +1872,7 @@
 @itemx --compress-debug-sections=zlib-gabi
 For ELF files, these options control how DWARF debug sections are
 compressed.  @option{--compress-debug-sections=none} is equivalent
-to @option{--decompress-debug-sections}.
+to @option{--nocompress-debug-sections}.
 @option{--compress-debug-sections=zlib} and
 @option{--compress-debug-sections=zlib-gabi} are equivalent to
 @option{--compress-debug-sections}.
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/cxxfilt.man binutils-2.26-avr/binutils/doc/cxxfilt.man
--- binutils-2.26.1-src/binutils/doc/cxxfilt.man	2016-06-29 01:03:42.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/cxxfilt.man	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "C++FILT 1"
-.TH C++FILT 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH C++FILT 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/dlltool.1 binutils-2.26-avr/binutils/doc/dlltool.1
--- binutils-2.26.1-src/binutils/doc/dlltool.1	2016-06-29 01:03:40.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/dlltool.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "DLLTOOL 1"
-.TH DLLTOOL 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH DLLTOOL 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/elfedit.1 binutils-2.26-avr/binutils/doc/elfedit.1
--- binutils-2.26.1-src/binutils/doc/elfedit.1	2016-06-29 01:03:42.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/elfedit.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "ELFEDIT 1"
-.TH ELFEDIT 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH ELFEDIT 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/nlmconv.1 binutils-2.26-avr/binutils/doc/nlmconv.1
--- binutils-2.26.1-src/binutils/doc/nlmconv.1	2016-06-29 01:03:41.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/nlmconv.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "NLMCONV 1"
-.TH NLMCONV 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH NLMCONV 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/nm.1 binutils-2.26-avr/binutils/doc/nm.1
--- binutils-2.26.1-src/binutils/doc/nm.1	2016-06-29 01:03:41.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/nm.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "NM 1"
-.TH NM 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH NM 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/objcopy.1 binutils-2.26-avr/binutils/doc/objcopy.1
--- binutils-2.26.1-src/binutils/doc/objcopy.1	2016-06-29 01:03:41.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/objcopy.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "OBJCOPY 1"
-.TH OBJCOPY 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH OBJCOPY 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
@@ -1070,7 +1070,7 @@
 .PD
 For \s-1ELF\s0 files, these options control how \s-1DWARF\s0 debug sections are
 compressed.  \fB\-\-compress\-debug\-sections=none\fR is equivalent
-to \fB\-\-decompress\-debug\-sections\fR.
+to \fB\-\-nocompress\-debug\-sections\fR.
 \&\fB\-\-compress\-debug\-sections=zlib\fR and
 \&\fB\-\-compress\-debug\-sections=zlib\-gabi\fR are equivalent to
 \&\fB\-\-compress\-debug\-sections\fR.
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/objdump.1 binutils-2.26-avr/binutils/doc/objdump.1
--- binutils-2.26.1-src/binutils/doc/objdump.1	2016-06-29 01:03:41.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/objdump.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "OBJDUMP 1"
-.TH OBJDUMP 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH OBJDUMP 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/ranlib.1 binutils-2.26-avr/binutils/doc/ranlib.1
--- binutils-2.26.1-src/binutils/doc/ranlib.1	2016-06-29 01:03:41.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/ranlib.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "RANLIB 1"
-.TH RANLIB 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH RANLIB 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/readelf.1 binutils-2.26-avr/binutils/doc/readelf.1
--- binutils-2.26.1-src/binutils/doc/readelf.1	2016-06-29 01:03:41.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/readelf.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "READELF 1"
-.TH READELF 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH READELF 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/size.1 binutils-2.26-avr/binutils/doc/size.1
--- binutils-2.26.1-src/binutils/doc/size.1	2016-06-29 01:03:41.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/size.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "SIZE 1"
-.TH SIZE 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH SIZE 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/strings.1 binutils-2.26-avr/binutils/doc/strings.1
--- binutils-2.26.1-src/binutils/doc/strings.1	2016-06-29 01:03:41.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/strings.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "STRINGS 1"
-.TH STRINGS 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH STRINGS 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/strip.1 binutils-2.26-avr/binutils/doc/strip.1
--- binutils-2.26.1-src/binutils/doc/strip.1	2016-06-29 01:03:42.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/strip.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "STRIP 1"
-.TH STRIP 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH STRIP 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/windmc.1 binutils-2.26-avr/binutils/doc/windmc.1
--- binutils-2.26.1-src/binutils/doc/windmc.1	2016-06-29 01:03:42.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/windmc.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "WINDMC 1"
-.TH WINDMC 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH WINDMC 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/doc/windres.1 binutils-2.26-avr/binutils/doc/windres.1
--- binutils-2.26.1-src/binutils/doc/windres.1	2016-06-29 01:03:42.000000000 -0700
+++ binutils-2.26-avr/binutils/doc/windres.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "WINDRES 1"
-.TH WINDRES 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH WINDRES 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/Makefile.am binutils-2.26-avr/binutils/Makefile.am
--- binutils-2.26.1-src/binutils/Makefile.am	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/binutils/Makefile.am	2016-11-16 03:51:00.000000000 -0800
@@ -192,7 +192,6 @@
 	EXPECT=$(EXPECT); export EXPECT; \
 	runtest=$(RUNTEST); \
 	if $(SHELL) -c "$$runtest --version" > /dev/null 2>&1; then \
-	  CC="$(CC)" CC_FOR_BUILD="$(CC_FOR_BUILD)" \
 	  CC_FOR_TARGET="$(CC_FOR_TARGET)" CFLAGS_FOR_TARGET="$(CFLAGS)" \
 		$$runtest --tool $(DEJATOOL) --srcdir $${srcdir}/testsuite \
 			$(RUNTESTFLAGS); \
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/Makefile.in binutils-2.26-avr/binutils/Makefile.in
--- binutils-2.26.1-src/binutils/Makefile.in	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/binutils/Makefile.in	2016-11-16 03:51:00.000000000 -0800
@@ -1290,7 +1290,6 @@
 	EXPECT=$(EXPECT); export EXPECT; \
 	runtest=$(RUNTEST); \
 	if $(SHELL) -c "$$runtest --version" > /dev/null 2>&1; then \
-	  CC="$(CC)" CC_FOR_BUILD="$(CC_FOR_BUILD)" \
 	  CC_FOR_TARGET="$(CC_FOR_TARGET)" CFLAGS_FOR_TARGET="$(CFLAGS)" \
 		$$runtest --tool $(DEJATOOL) --srcdir $${srcdir}/testsuite \
 			$(RUNTESTFLAGS); \
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/objcopy.c binutils-2.26-avr/binutils/objcopy.c
--- binutils-2.26.1-src/binutils/objcopy.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/binutils/objcopy.c	2016-11-16 03:51:00.000000000 -0800
@@ -4096,7 +4096,6 @@
 	      }
 
 	    t = strchr (t + 1, ',');
-	    newsym->othersym = NULL;
 	    if (t)
 	      newsym->flags = parse_symflags (t+1, &newsym->othersym);
 	    else
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/objdump.c binutils-2.26-avr/binutils/objdump.c
--- binutils-2.26.1-src/binutils/objdump.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/binutils/objdump.c	2016-11-16 03:51:00.000000000 -0800
@@ -809,8 +809,7 @@
 	name = alloc;
     }
 
-  if ((sym->flags & BSF_SYNTHETIC) == 0)
-    version_string = bfd_get_symbol_version_string (abfd, sym, &hidden);
+  version_string = bfd_get_symbol_version_string (abfd, sym, &hidden);
 
   if (bfd_is_und_section (bfd_get_section (sym)))
     hidden = TRUE;
Only in binutils-2.26-avr/binutils/po: .cvsignore
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/readelf.c binutils-2.26-avr/binutils/readelf.c
--- binutils-2.26.1-src/binutils/readelf.c	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/binutils/readelf.c	2016-11-16 03:51:00.000000000 -0800
@@ -11318,6 +11318,7 @@
 static bfd_boolean
 is_32bit_abs_reloc (unsigned int reloc_type)
 {
+  /* Please keep this table alpha-sorted for ease of visual lookup.  */
   switch (elf_header.e_machine)
     {
     case EM_386:
@@ -11331,6 +11332,8 @@
       return reloc_type == 2; /* R_960_32.  */
     case EM_AARCH64:
       return reloc_type == 258; /* R_AARCH64_ABS32 */
+    case EM_ADAPTEVA_EPIPHANY:
+      return reloc_type == 3;
     case EM_ALPHA:
       return reloc_type == 1; /* R_ALPHA_REFLONG.  */
     case EM_ARC:
@@ -11343,8 +11346,6 @@
     case EM_AVR_OLD:
     case EM_AVR:
       return reloc_type == 1;
-    case EM_ADAPTEVA_EPIPHANY:
-      return reloc_type == 3;
     case EM_BLACKFIN:
       return reloc_type == 0x12; /* R_byte4_data.  */
     case EM_CRIS:
@@ -11500,6 +11501,7 @@
 is_32bit_pcrel_reloc (unsigned int reloc_type)
 {
   switch (elf_header.e_machine)
+  /* Please keep this table alpha-sorted for ease of visual lookup.  */
     {
     case EM_386:
     case EM_IAMCU:
@@ -11514,6 +11516,9 @@
       return reloc_type == 10; /* R_ALPHA_SREL32.  */
     case EM_ARM:
       return reloc_type == 3;  /* R_ARM_REL32 */
+    case EM_AVR_OLD:
+    case EM_AVR:
+      return reloc_type == 36; /* R_AVR_32_PCREL.  */
     case EM_MICROBLAZE:
       return reloc_type == 2;  /* R_MICROBLAZE_32_PCREL.  */
     case EM_OR1K:
@@ -11654,17 +11659,18 @@
 static bfd_boolean
 is_16bit_abs_reloc (unsigned int reloc_type)
 {
+  /* Please keep this table alpha-sorted for ease of visual lookup.  */
   switch (elf_header.e_machine)
     {
     case EM_ARC:
     case EM_ARC_COMPACT:
     case EM_ARC_COMPACT2:
       return reloc_type == 2; /* R_ARC_16.  */
+    case EM_ADAPTEVA_EPIPHANY:
+      return reloc_type == 5;
     case EM_AVR_OLD:
     case EM_AVR:
       return reloc_type == 4; /* R_AVR_16.  */
-    case EM_ADAPTEVA_EPIPHANY:
-      return reloc_type == 5;
     case EM_CYGNUS_D10V:
     case EM_D10V:
       return reloc_type == 3; /* R_D10V_16.  */
@@ -11678,6 +11684,12 @@
     case EM_M32C_OLD:
     case EM_M32C:
       return reloc_type == 1; /* R_M32C_16 */
+    case EM_CYGNUS_MN10200:
+    case EM_MN10200:
+      return reloc_type == 2; /* R_MN10200_16.  */
+    case EM_CYGNUS_MN10300:
+    case EM_MN10300:
+      return reloc_type == 2; /* R_MN10300_16.  */
     case EM_MSP430:
       if (uses_msp430x_relocs ())
 	return reloc_type == 2; /* R_MSP430_ABS16.  */
@@ -11693,17 +11705,11 @@
       return reloc_type == 2; /* R_OR1K_16.  */
     case EM_TI_C6000:
       return reloc_type == 2; /* R_C6000_ABS16.  */
+    case EM_VISIUM:
+      return reloc_type == 2; /* R_VISIUM_16. */
     case EM_XC16X:
     case EM_C166:
       return reloc_type == 2; /* R_XC16C_ABS_16.  */
-    case EM_CYGNUS_MN10200:
-    case EM_MN10200:
-      return reloc_type == 2; /* R_MN10200_16.  */
-    case EM_CYGNUS_MN10300:
-    case EM_MN10300:
-      return reloc_type == 2; /* R_MN10300_16.  */
-    case EM_VISIUM:
-      return reloc_type == 2; /* R_VISIUM_16. */
     case EM_XGATE:
       return reloc_type == 3; /* R_XGATE_16.  */
     default:
@@ -11719,44 +11725,53 @@
 {
   switch (elf_header.e_machine)
     {
-    case EM_68K:     /* R_68K_NONE.  */
     case EM_386:     /* R_386_NONE.  */
-    case EM_SPARC32PLUS:
-    case EM_SPARCV9:
-    case EM_SPARC:   /* R_SPARC_NONE.  */
-    case EM_MIPS:    /* R_MIPS_NONE.  */
-    case EM_PARISC:  /* R_PARISC_NONE.  */
-    case EM_ALPHA:   /* R_ALPHA_NONE.  */
+    case EM_68K:     /* R_68K_NONE.  */
     case EM_ADAPTEVA_EPIPHANY:
-    case EM_PPC:     /* R_PPC_NONE.  */
-    case EM_PPC64:   /* R_PPC64_NONE.  */
+    case EM_ALPHA:   /* R_ALPHA_NONE.  */
+    case EM_ALTERA_NIOS2: /* R_NIOS2_NONE.  */
     case EM_ARC:     /* R_ARC_NONE.  */
-    case EM_ARC_COMPACT: /* R_ARC_NONE.  */
     case EM_ARC_COMPACT2: /* R_ARC_NONE.  */
+    case EM_ARC_COMPACT: /* R_ARC_NONE.  */
     case EM_ARM:     /* R_ARM_NONE.  */
-    case EM_IA_64:   /* R_IA64_NONE.  */
-    case EM_SH:      /* R_SH_NONE.  */
-    case EM_S390_OLD:
-    case EM_S390:    /* R_390_NONE.  */
+    case EM_C166:    /* R_XC16X_NONE.  */
     case EM_CRIS:    /* R_CRIS_NONE.  */
-    case EM_X86_64:  /* R_X86_64_NONE.  */
-    case EM_L1OM:    /* R_X86_64_NONE.  */
+    case EM_FT32:    /* R_FT32_NONE.  */
+    case EM_IA_64:   /* R_IA64_NONE.  */
     case EM_K1OM:    /* R_X86_64_NONE.  */
+    case EM_L1OM:    /* R_X86_64_NONE.  */
+    case EM_M32R:    /* R_M32R_NONE.  */
+    case EM_MIPS:    /* R_MIPS_NONE.  */
     case EM_MN10300: /* R_MN10300_NONE.  */
-    case EM_FT32:    /* R_FT32_NONE.  */
     case EM_MOXIE:   /* R_MOXIE_NONE.  */
-    case EM_M32R:    /* R_M32R_NONE.  */
-    case EM_TI_C6000:/* R_C6000_NONE.  */
+    case EM_NIOS32:  /* R_NIOS_NONE.  */
+    case EM_OR1K:    /* R_OR1K_NONE. */
+    case EM_PARISC:  /* R_PARISC_NONE.  */
+    case EM_PPC64:   /* R_PPC64_NONE.  */
+    case EM_PPC:     /* R_PPC_NONE.  */
+    case EM_S390:    /* R_390_NONE.  */
+    case EM_S390_OLD:
+    case EM_SH:      /* R_SH_NONE.  */
+    case EM_SPARC32PLUS:
+    case EM_SPARC:   /* R_SPARC_NONE.  */
+    case EM_SPARCV9:
     case EM_TILEGX:  /* R_TILEGX_NONE.  */
     case EM_TILEPRO: /* R_TILEPRO_NONE.  */
+    case EM_TI_C6000:/* R_C6000_NONE.  */
+    case EM_X86_64:  /* R_X86_64_NONE.  */
     case EM_XC16X:
-    case EM_C166:    /* R_XC16X_NONE.  */
-    case EM_ALTERA_NIOS2: /* R_NIOS2_NONE.  */
-    case EM_NIOS32:  /* R_NIOS_NONE.  */
-    case EM_OR1K:    /* R_OR1K_NONE. */
       return reloc_type == 0;
+
     case EM_AARCH64:
       return reloc_type == 0 || reloc_type == 256;
+    case EM_AVR_OLD:
+    case EM_AVR:
+      return (reloc_type == 0 /* R_AVR_NONE.  */
+	      || reloc_type == 30 /* R_AVR_DIFF8.  */
+	      || reloc_type == 31 /* R_AVR_DIFF16.  */
+	      || reloc_type == 32 /* R_AVR_DIFF32.  */);
+    case EM_METAG:
+      return reloc_type == 3; /* R_METAG_NONE.  */
     case EM_NDS32:
       return (reloc_type == 0       /* R_XTENSA_NONE.  */
 	      || reloc_type == 204  /* R_NDS32_DIFF8.  */
@@ -11769,8 +11784,6 @@
 	      || reloc_type == 17  /* R_XTENSA_DIFF8.  */
 	      || reloc_type == 18  /* R_XTENSA_DIFF16.  */
 	      || reloc_type == 19  /* R_XTENSA_DIFF32.  */);
-    case EM_METAG:
-      return reloc_type == 3; /* R_METAG_NONE.  */
     }
   return FALSE;
 }
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/size.c binutils-2.26-avr/binutils/size.c
--- binutils-2.26.1-src/binutils/size.c	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/binutils/size.c	2016-11-16 03:51:00.000000000 -0800
@@ -34,10 +34,31 @@
 #include "getopt.h"
 #include "bucomm.h"
 
-#ifndef BSD_DEFAULT
-#define BSD_DEFAULT 1
+typedef enum
+{
+    format_sysv = 0,
+    format_bsd = 1,
+    format_avr = 2,
+} format_type_t;
+
+
+/* Set the default format. */
+#define FORMAT_DEFAULT_SYSV 0
+#define FORMAT_DEFAULT_BSD 1
+#define FORMAT_DEFAULT_AVR 0
+
+#if FORMAT_DEFAULT_SYSV
+    #define FORMAT_DEFAULT format_sysv
+    #define FORMAT_NAME "sysv"
+#elif FORMAT_DEFAULT_BSD
+    #define FORMAT_DEFAULT format_bsd
+    #define FORMAT_NAME "berkeley"
+#elif FORMAT_DEFAULT_AVR
+    #define FORMAT_DEFAULT format_avr
+    #define FORMAT_NAME "avr"
 #endif
 
+
 /* Program options.  */
 
 static enum
@@ -46,9 +67,8 @@
   }
 radix = decimal;
 
-/* 0 means use AT&T-style output.  */
-static int berkeley_format = BSD_DEFAULT;
 
+format_type_t format = FORMAT_DEFAULT;
 static int show_version = 0;
 static int show_help = 0;
 static int show_totals = 0;
@@ -62,6 +82,309 @@
 /* Program exit status.  */
 static int return_code = 0;
 
+
+/* AVR Size specific stuff */
+
+#define AVR64 64UL
+#define AVR128 128UL
+#define AVR256 256UL
+#define AVR512 512UL
+#define AVR2112 2112UL
+#define AVR1K 1024UL
+#define AVR2K 2048UL
+#define AVR4K 4096UL
+#define AVR8K 8192UL
+#define AVR10K 10240UL
+#define AVR16K 16384UL
+#define AVR20K 20480UL
+#define AVR24K 24576UL
+#define AVR32K 32768UL
+#define AVR36K 36864UL
+#define AVR40K 40960UL
+#define AVR64K 65536UL
+#define AVR68K 69632UL
+#define AVR128K 131072UL
+#define AVR136K 139264UL
+#define AVR200K 204800UL
+#define AVR256K 262144UL
+#define AVR264K 270336UL
+#define AVR384K 393216UL
+#define AVR392K 401408UL
+
+typedef struct
+{
+    char *name;
+	long flash;
+	long ram;
+	long eeprom;
+} avr_device_t;
+
+avr_device_t avr[] =
+{
+  	{"atxmega384c3",  AVR392K, AVR32K, AVR4K},
+ 
+ 	{"atxmega384d3",  AVR384K, AVR16K, AVR4K},
+  
+ 	{"atmega256rfr2", AVR256K, AVR32K, AVR8K},
+ 	{"atmega2564rfr2",AVR256K, AVR32K, AVR8K},
+ 
+  	{"atxmega256a3",  AVR264K, AVR16K, AVR4K},
+ 	{"atxmega256a3u", AVR264K, AVR16K, AVR4K},
+  	{"atxmega256a3b", AVR264K, AVR16K, AVR4K},
+ 	{"atxmega256a3bu",AVR264K, AVR16K, AVR4K},
+ 	{"atxmega256c3",  AVR264K, AVR16K, AVR4K},
+  	{"atxmega256d3",  AVR264K, AVR16K, AVR4K},
+  
+  	{"atmega2560",    AVR256K, AVR8K,  AVR4K},
+  	{"atmega2561",    AVR256K, AVR8K,  AVR4K},
+  
+  	{"atxmega192a3",  AVR200K, AVR16K, AVR2K},
+ 	{"atxmega192a3u", AVR200K, AVR16K, AVR2K},
+ 	{"atxmega192c3",  AVR200K, AVR16K, AVR2K},
+  	{"atxmega192d3",  AVR200K, AVR16K, AVR2K},
+  
+ 	{"atmega128rfr2", AVR128K, AVR16K, AVR4K},
+ 	{"atmega1284rfr2",AVR128K, AVR16K, AVR4K},
+ 
+  	{"atxmega128a1",  AVR136K, AVR8K,  AVR2K},
+  	{"atxmega128a1u", AVR136K, AVR8K,  AVR2K},
+ 	{"atxmega128a4u", AVR136K, AVR8K,  AVR2K},
+  	{"atxmega128a3",  AVR136K, AVR8K,  AVR2K},
+ 	{"atxmega128a3u", AVR136K, AVR8K,  AVR2K},
+ 	{"atxmega128b1",  AVR136K, AVR8K,  AVR2K},
+ 	{"atxmega128b3",  AVR136K, AVR8K,  AVR2K},
+ 	{"atxmega128c3",  AVR136K, AVR8K,  AVR2K},
+  	{"atxmega128d3",  AVR136K, AVR8K,  AVR2K},
+ 	{"atxmega128d4",  AVR136K, AVR8K,  AVR2K},
+  
+  	{"at43usb320",    AVR128K, 608UL,  0UL},
+  	{"at90can128",    AVR128K, AVR4K,  AVR4K},
+  	{"at90usb1286",   AVR128K, AVR8K,  AVR4K},
+  	{"at90usb1287",   AVR128K, AVR8K,  AVR4K},
+  	{"atmega128",     AVR128K, AVR4K,  AVR4K},
+ 	{"atmega128a",    AVR128K, AVR4K,  AVR4K},
+  	{"atmega1280",    AVR128K, AVR8K,  AVR4K},
+  	{"atmega1281",    AVR128K, AVR8K,  AVR4K},
+ 	{"atmega1284",    AVR128K, AVR16K, AVR4K},
+  	{"atmega1284p",   AVR128K, AVR16K, AVR4K},
+  	{"atmega128rfa1", AVR128K, AVR16K, AVR4K},
+  	{"atmega103",     AVR128K, 4000UL, AVR4K},
+
+	{"atxmega64a1",   AVR68K,  AVR4K,  AVR2K},
+	{"atxmega64a1u",  AVR68K,  AVR4K,  AVR2K},
+	{"atxmega64a3",   AVR68K,  AVR4K,  AVR2K},
+	{"atxmega64a3u",  AVR68K,  AVR4K,  AVR2K},
+	{"atxmega64a4u",  AVR68K,  AVR4K,  AVR2K},
+	{"atxmega64b1",   AVR68K,  AVR4K,  AVR2K},
+	{"atxmega64b3",   AVR68K,  AVR4K,  AVR2K},
+	{"atxmega64c3",   AVR68K,  AVR4K,  AVR2K},
+	{"atxmega64d3",   AVR68K,  AVR4K,  AVR2K},
+	{"atxmega64d4",   AVR68K,  AVR4K,  AVR2K},
+
+	{"atmega64rfr2",  AVR64K,  AVR8K,  AVR2K},
+	{"atmega644rfr2", AVR64K,  AVR8K,  AVR2K},
+
+	{"at90can64",     AVR64K,  AVR4K,  AVR2K},
+	{"at90scr100",    AVR64K,  AVR4K,  AVR2K},
+	{"at90usb646",    AVR64K,  AVR4K,  AVR2K},
+	{"at90usb647",    AVR64K,  AVR4K,  AVR2K},
+	{"ata5505",       AVR16K,  AVR512, AVR512},
+	{"ata5790",       AVR16K,  AVR512, AVR2112},
+	{"ata5795",       AVR8K,   AVR512, AVR2112},
+	{"ata5272",       AVR8K,   AVR512, AVR512},
+	{"atmega64",      AVR64K,  AVR4K,  AVR2K},
+	{"atmega64a",     AVR64K,  AVR4K,  AVR2K},
+	{"atmega640",     AVR64K,  AVR8K,  AVR4K},
+	{"atmega644",     AVR64K,  AVR4K,  AVR2K},
+	{"atmega644a",    AVR64K,  AVR4K,  AVR2K},
+	{"atmega644p",    AVR64K,  AVR4K,  AVR2K},
+	{"atmega644pa",   AVR64K,  AVR4K,  AVR2K},
+	{"atmega645",     AVR64K,  AVR4K,  AVR2K},
+	{"atmega645a",    AVR64K,  AVR4K,  AVR2K},
+	{"atmega645p",    AVR64K,  AVR4K,  AVR2K},
+	{"atmega6450",    AVR64K,  AVR4K,  AVR2K},
+	{"atmega6450a",   AVR64K,  AVR4K,  AVR2K},
+	{"atmega6450p",   AVR64K,  AVR4K,  AVR2K},
+	{"atmega649",     AVR64K,  AVR4K,  AVR2K},
+	{"atmega649a",    AVR64K,  AVR4K,  AVR2K},
+	{"atmega649p",    AVR64K,  AVR4K,  AVR2K},
+	{"atmega6490",    AVR64K,  AVR4K,  AVR2K},
+	{"atmega6490a",   AVR64K,  AVR4K,  AVR2K},
+	{"atmega6490p",   AVR64K,  AVR4K,  AVR2K},
+	{"atmega64c1",    AVR64K,  AVR4K,  AVR2K},
+	{"atmega64hve",   AVR64K,  AVR4K,  AVR1K},
+	{"atmega64m1",    AVR64K,  AVR4K,  AVR2K},
+	{"m3000",         AVR64K,  AVR4K,  0UL},
+
+	{"atmega406",     AVR40K,  AVR2K,  AVR512},
+
+	{"atxmega32a4",   AVR36K,  AVR4K,  AVR1K},
+	{"atxmega32a4u",  AVR36K,  AVR4K,  AVR1K},
+	{"atxmega32c4",   AVR36K,  AVR4K,  AVR1K},
+	{"atxmega32d4",   AVR36K,  AVR4K,  AVR1K},
+	{"atxmega32e5",   AVR36K,  AVR4K,  AVR1K},
+	{"atxmega16e5",   AVR20K,  AVR2K,  AVR512},
+	{"atxmega8e5",	  AVR10K,  AVR1K,  AVR512},
+
+	{"at90can32",     AVR32K,  AVR2K,  AVR1K},
+	{"at94k",         AVR32K,  AVR4K,  0UL},
+	{"atmega32",      AVR32K,  AVR2K,  AVR1K},
+	{"atmega32a",     AVR32K,  AVR2K,  AVR1K},
+	{"atmega323",     AVR32K,  AVR2K,  AVR1K},
+	{"atmega324a",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega324p",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega324pa",   AVR32K,  AVR2K,  AVR1K},
+	{"atmega325",     AVR32K,  AVR2K,  AVR1K},
+	{"atmega325a",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega325p",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega325pa",   AVR32K,  AVR2K,  AVR1K},
+	{"atmega3250",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega3250a",   AVR32K,  AVR2K,  AVR1K},
+	{"atmega3250p",   AVR32K,  AVR2K,  AVR1K},
+	{"atmega3250pa",  AVR32K,  AVR2K,  AVR1K},
+	{"atmega328",     AVR32K,  AVR2K,  AVR1K},
+	{"atmega328p",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega329",     AVR32K,  AVR2K,  AVR1K},
+	{"atmega329a",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega329p",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega329pa",   AVR32K,  AVR2K,  AVR1K},
+	{"atmega3290",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega3290a",   AVR32K,  AVR2K,  AVR1K},
+	{"atmega3290p",   AVR32K,  AVR2K,  AVR1K},
+	{"atmega3290pa",  AVR32K,  AVR2K,  AVR1K},
+	{"atmega32hvb",   AVR32K,  AVR2K,  AVR1K},
+	{"atmega32hvbrevb",AVR32K, AVR2K,  AVR1K},
+	{"atmega32c1",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega32m1",    AVR32K,  AVR2K,  AVR1K},
+	{"atmega32u2",    AVR32K,  AVR1K,  AVR1K},
+	{"atmega32u4",    AVR32K,  2560UL, AVR1K},
+	{"atmega32u6",    AVR32K,  2560UL, AVR1K},
+
+	{"at43usb355",    AVR24K,  1120UL,   0UL},
+
+	{"atxmega16a4",   AVR20K,  AVR2K,  AVR1K},
+        {"atxmega16a4u",  AVR20K,  AVR2K,  AVR1K},
+	{"atxmega16c4",   AVR20K,  AVR2K,  AVR1K},
+	{"atxmega16d4",   AVR20K,  AVR2K,  AVR1K},
+
+	{"at76c711",      AVR16K,  AVR2K,  0UL},
+	{"at90pwm161",    AVR16K,  AVR1K,  AVR512},
+	{"at90pwm216",    AVR16K,  AVR1K,  AVR512},
+	{"at90pwm316",    AVR16K,  AVR1K,  AVR512},
+	{"at90usb162",    AVR16K,  AVR512, AVR512},
+	{"atmega16",      AVR16K,  AVR1K,  AVR512},
+	{"atmega16a",     AVR16K,  AVR1K,  AVR512},
+	{"atmega161",     AVR16K,  AVR1K,  AVR512},
+	{"atmega162",     AVR16K,  AVR1K,  AVR512},
+	{"atmega163",     AVR16K,  AVR1K,  AVR512},
+	{"atmega164",     AVR16K,  AVR1K,  AVR512},
+	{"atmega164a",    AVR16K,  AVR1K,  AVR512},
+	{"atmega164p",    AVR16K,  AVR1K,  AVR512},
+	{"atmega164pa",   AVR16K,  AVR1K,  AVR512},
+	{"atmega165a",    AVR16K,  AVR1K,  AVR512},
+	{"atmega165",     AVR16K,  AVR1K,  AVR512},
+	{"atmega165p",    AVR16K,  AVR1K,  AVR512},
+	{"atmega165pa",   AVR16K,  AVR1K,  AVR512},
+	{"atmega168",     AVR16K,  AVR1K,  AVR512},
+	{"atmega168a",    AVR16K,  AVR1K,  AVR512},
+	{"atmega168p",    AVR16K,  AVR1K,  AVR512},
+	{"atmega168pa",   AVR16K,  AVR1K,  AVR512},
+	{"atmega169",     AVR16K,  AVR1K,  AVR512},
+	{"atmega169a",    AVR16K,  AVR1K,  AVR512},
+	{"atmega169p",    AVR16K,  AVR1K,  AVR512},
+	{"atmega169pa",   AVR16K,  AVR1K,  AVR512},
+	{"atmega16hva",   AVR16K,  768UL,  AVR256},
+	{"atmega16hva2",  AVR16K,  AVR1K,  AVR256},
+        {"atmega16hvb",   AVR16K,  AVR1K,  AVR512},
+        {"atmega16hvbrevb",AVR16K, AVR1K,  AVR512},
+	{"atmega16m1",    AVR16K,  AVR1K,  AVR512},
+	{"attiny1634",    AVR16K,  AVR1K,  AVR256},
+	{"atmega16u2",    AVR16K,  AVR512, AVR512},
+	{"atmega16u4",    AVR16K,  1280UL, AVR512},
+	{"attiny167",     AVR16K,  AVR512, AVR512},
+
+	{"at90c8534",     AVR8K,   352UL,  AVR512},
+	{"at90pwm1",      AVR8K,   AVR512, AVR512},
+	{"at90pwm2",      AVR8K,   AVR512, AVR512},
+	{"at90pwm2b",     AVR8K,   AVR512, AVR512},
+	{"at90pwm3",      AVR8K,   AVR512, AVR512},
+	{"at90pwm3b",     AVR8K,   AVR512, AVR512},
+	{"at90pwm81",     AVR8K,   AVR256, AVR512},
+	{"at90s8515",     AVR8K,   AVR512, AVR512},
+	{"at90s8535",     AVR8K,   AVR512, AVR512},
+	{"at90usb82",     AVR8K,   AVR512, AVR512},
+	{"ata6285",       AVR8K,   AVR512, 320UL},
+	{"ata6286",       AVR8K,   AVR512, 320UL},
+	{"ata6289",       AVR8K,   AVR512, 320UL},
+	{"atmega8",       AVR8K,   AVR1K,  AVR512},
+	{"atmega8a",      AVR8K,   AVR1K,  AVR512},
+	{"atmega8515",    AVR8K,   AVR512, AVR512},
+	{"atmega8535",    AVR8K,   AVR512, AVR512},
+	{"atmega88",      AVR8K,   AVR1K,  AVR512},
+	{"atmega88a",     AVR8K,   AVR1K,  AVR512},
+	{"atmega88p",     AVR8K,   AVR1K,  AVR512},
+	{"atmega88pa",    AVR8K,   AVR1K,  AVR512},
+	{"atmega8hva",    AVR8K,   768UL,  AVR256},
+	{"atmega8u2",     AVR8K,   AVR512, AVR512},
+	{"attiny84",      AVR8K,   AVR512, AVR512},
+	{"attiny84a",     AVR8K,   AVR512, AVR512},
+	{"attiny85",      AVR8K,   AVR512, AVR512},
+	{"attiny861",     AVR8K,   AVR512, AVR512},
+	{"attiny861a",    AVR8K,   AVR512, AVR512},
+	{"attiny87",      AVR8K,   AVR512, AVR512},
+	{"attiny88",      AVR8K,   AVR512, AVR64},
+
+	{"at90s4414",     AVR4K,   352UL,  AVR256},
+	{"at90s4433",     AVR4K,   AVR128, AVR256},
+	{"at90s4434",     AVR4K,   352UL,  AVR256},
+	{"atmega48",      AVR4K,   AVR512, AVR256},
+	{"atmega48a",     AVR4K,   AVR512, AVR256},
+	{"atmega48pa",    AVR4K,   AVR512, AVR256},
+	{"atmega48p",     AVR4K,   AVR512, AVR256},
+	{"attiny4313",    AVR4K,   AVR256, AVR256},
+	{"attiny43u",     AVR4K,   AVR256, AVR64},
+	{"attiny44",      AVR4K,   AVR256, AVR256},
+	{"attiny44a",     AVR4K,   AVR256, AVR256},
+	{"attiny45",      AVR4K,   AVR256, AVR256},
+	{"attiny461",     AVR4K,   AVR256, AVR256},
+	{"attiny461a",    AVR4K,   AVR256, AVR256},
+	{"attiny48",      AVR4K,   AVR256, AVR64},
+	{"attiny828",     AVR8K,   AVR512, AVR256},
+
+	{"at86rf401",     AVR2K,   224UL,  AVR128},
+	{"at90s2313",     AVR2K,   AVR128, AVR128},
+	{"at90s2323",     AVR2K,   AVR128, AVR128},
+	{"at90s2333",     AVR2K,   224UL,  AVR128},
+	{"at90s2343",     AVR2K,   AVR128, AVR128},
+	{"attiny20",      AVR2K,   AVR128, 0UL},
+	{"attiny22",      AVR2K,   224UL,  AVR128},
+	{"attiny2313",    AVR2K,   AVR128, AVR128},
+	{"attiny2313a",   AVR2K,   AVR128, AVR128},
+	{"attiny24",      AVR2K,   AVR128, AVR128},
+	{"attiny24a",     AVR2K,   AVR128, AVR128},
+	{"attiny25",      AVR2K,   AVR128, AVR128},
+	{"attiny26",      AVR2K,   AVR128, AVR128},
+	{"attiny261",     AVR2K,   AVR128, AVR128},
+	{"attiny261a",    AVR2K,   AVR128, AVR128},
+	{"attiny28",      AVR2K,   0UL,    0UL},
+	{"attiny40",      AVR2K,   AVR256, 0UL},
+
+	{"at90s1200",     AVR1K,   0UL,    AVR64},
+	{"attiny9",       AVR1K,   32UL,   0UL},
+	{"attiny10",      AVR1K,   32UL,   0UL},
+	{"attiny11",      AVR1K,   0UL,    AVR64},
+	{"attiny12",      AVR1K,   0UL,    AVR64},
+	{"attiny13",      AVR1K,   AVR64,  AVR64},
+	{"attiny13a",     AVR1K,   AVR64,  AVR64},
+	{"attiny15",      AVR1K,   0UL,    AVR64},
+
+	{"attiny4",       AVR512,  32UL,   0UL},
+	{"attiny5",       AVR512,  32UL,   0UL},
+};
+
+static char *avrmcu = NULL;
+
+
 static char *target = NULL;
 
 /* Forward declarations.  */
@@ -77,7 +400,9 @@
   fprintf (stream, _(" Displays the sizes of sections inside binary files\n"));
   fprintf (stream, _(" If no input file(s) are specified, a.out is assumed\n"));
   fprintf (stream, _(" The options are:\n\
-  -A|-B     --format={sysv|berkeley}  Select output style (default is %s)\n\
+  -A|-B|-C  --format={sysv|berkeley|avr}  Select output style (default is %s)\n\
+            --mcu=<avrmcu>            MCU name for AVR format only\n\
+            --mlist-devices           List all supported MCUs\n\
   -o|-d|-x  --radix={8|10|16}         Display numbers in octal, decimal or hex\n\
   -t        --totals                  Display the total sizes (Berkeley only)\n\
             --common                  Display total size for *COM* syms\n\
@@ -86,11 +411,7 @@
   -h        --help                    Display this information\n\
   -v        --version                 Display the program's version\n\
 \n"),
-#if BSD_DEFAULT
-  "berkeley"
-#else
-  "sysv"
-#endif
+FORMAT_NAME
 );
   list_supported_targets (program_name, stream);
   if (REPORT_BUGS_TO[0] && status == 0)
@@ -101,6 +422,8 @@
 #define OPTION_FORMAT (200)
 #define OPTION_RADIX (OPTION_FORMAT + 1)
 #define OPTION_TARGET (OPTION_RADIX + 1)
+#define OPTION_MCU (OPTION_TARGET + 1) 
+#define OPTION_MLIST_DEVICES (OPTION_MCU + 1)
 
 static struct option long_options[] =
 {
@@ -108,12 +431,38 @@
   {"format", required_argument, 0, OPTION_FORMAT},
   {"radix", required_argument, 0, OPTION_RADIX},
   {"target", required_argument, 0, OPTION_TARGET},
+  {"mcu", required_argument, 0, 203},
+  {"mlist-devices", no_argument, 0, OPTION_MLIST_DEVICES},
   {"totals", no_argument, &show_totals, 1},
   {"version", no_argument, &show_version, 1},
   {"help", no_argument, &show_help, 1},
   {0, no_argument, 0, 0}
 };
 
+static void list_supported_devices (FILE *stream, int status)
+{
+  unsigned int i ;
+  int llen = 0;
+  fprintf (stream, _("List of supported devices:\n"));
+  for (i = 0; i < sizeof(avr) / sizeof(avr[0]); i++)
+  {
+    int slen = strlen(avr[i].name);
+    llen += slen + 1 ;
+    if (llen < 75)
+    {
+      fprintf (stream, _(" %s"), avr[i].name);
+    }
+    else
+    {
+      fprintf (stream, _("\n %s"), avr[i].name);
+      llen = slen + 2 ;
+    }
+  }
+  fprintf (stream, "\n");
+
+  exit (status);
+}
+
 int main (int, char **);
 
 int
@@ -140,7 +489,7 @@
   bfd_init ();
   set_default_bfd_target ();
 
-  while ((c = getopt_long (argc, argv, "ABHhVvdfotx", long_options,
+  while ((c = getopt_long (argc, argv, "ABCHhVvdfotx", long_options,
 			   (int *) 0)) != EOF)
     switch (c)
       {
@@ -149,11 +498,15 @@
 	  {
 	  case 'B':
 	  case 'b':
-	    berkeley_format = 1;
+	    format = format_bsd;
 	    break;
 	  case 'S':
 	  case 's':
-	    berkeley_format = 0;
+	    format = format_sysv;
+	    break;
+	  case 'A':
+	  case 'a':
+	    format = format_avr;
 	    break;
 	  default:
 	    non_fatal (_("invalid argument to --format: %s"), optarg);
@@ -161,6 +514,14 @@
 	  }
 	break;
 
+      case OPTION_MCU:
+	avrmcu = optarg;
+	break;
+
+      case OPTION_MLIST_DEVICES:
+	list_supported_devices (stdout, 1);
+	break;
+
       case OPTION_TARGET:
 	target = optarg;
 	break;
@@ -189,11 +550,14 @@
 	break;
 
       case 'A':
-	berkeley_format = 0;
+	format = format_sysv;
 	break;
       case 'B':
-	berkeley_format = 1;
+	format = format_bsd;
 	break;
+      case 'C':
+    format = format_avr;
+    break;
       case 'v':
       case 'V':
 	show_version = 1;
@@ -239,7 +603,7 @@
     for (; optind < argc;)
       display_file (argv[optind++]);
 
-  if (show_totals && berkeley_format)
+  if (show_totals && format == format_bsd)
     {
       bfd_size_type total = total_textsize + total_datasize + total_bsssize;
 
@@ -605,13 +969,117 @@
   printf ("\n\n");
 }
 
+
+static avr_device_t *
+avr_find_device (void)
+{
+  unsigned int i;
+  if (avrmcu != NULL)
+  {
+    for (i = 0; i < sizeof(avr) / sizeof(avr[0]); i++)
+    {
+      if (strcmp(avr[i].name, avrmcu) == 0)
+      {
+        /* Match found */
+        return (&avr[i]);
+      }
+    }
+  }
+  return (NULL);
+}
+
+
+
+static void
+print_avr_format (bfd *file)
+{
+  char *avr_name = "Unknown";
+  int flashmax = 0;
+  int rammax = 0;
+  int eeprommax = 0;
+  asection *section; 
+  bfd_size_type avr_datasize = 0;
+  bfd_size_type avr_textsize = 0;
+  bfd_size_type avr_bsssize = 0;
+  bfd_size_type bootloadersize = 0;
+  bfd_size_type noinitsize = 0;
+  bfd_size_type eepromsize = 0;
+
+  avr_device_t *avrdevice = avr_find_device();
+  if (avrdevice != NULL)
+  {
+    avr_name = avrdevice->name;
+    flashmax = avrdevice->flash;
+    rammax = avrdevice->ram;
+    eeprommax = avrdevice->eeprom;
+  }
+
+  if ((section = bfd_get_section_by_name (file, ".data")) != NULL)
+    avr_datasize = bfd_section_size (file, section);
+  if ((section = bfd_get_section_by_name (file, ".text")) != NULL)
+    avr_textsize = bfd_section_size (file, section);
+  if ((section = bfd_get_section_by_name (file, ".bss")) != NULL)
+    avr_bsssize = bfd_section_size (file, section);
+  if ((section = bfd_get_section_by_name (file, ".bootloader")) != NULL)
+    bootloadersize = bfd_section_size (file, section);
+  if ((section = bfd_get_section_by_name (file, ".noinit")) != NULL)
+    noinitsize = bfd_section_size (file, section);
+  if ((section = bfd_get_section_by_name (file, ".eeprom")) != NULL)
+    eepromsize = bfd_section_size (file, section);
+  
+  bfd_size_type text = avr_textsize + avr_datasize + bootloadersize;
+  bfd_size_type data = avr_datasize + avr_bsssize + noinitsize;
+  bfd_size_type eeprom = eepromsize;
+  
+  printf ("AVR Memory Usage\n"
+          "----------------\n"
+          "Device: %s\n\n", avr_name);
+  
+  /* Text size */
+  printf ("Program:%8ld bytes", text);
+  if (flashmax > 0)
+  {
+    printf (" (%2.1f%% Full)", ((float)text / flashmax) * 100);
+  }
+  printf ("\n(.text + .data + .bootloader)\n\n");
+  
+  /* Data size */
+  printf ("Data:   %8ld bytes", data);
+  if (rammax > 0)
+  {
+    printf (" (%2.1f%% Full)", ((float)data / rammax) * 100);
+  }
+  printf ("\n(.data + .bss + .noinit)\n\n");
+  
+  /* EEPROM size */
+  if (eeprom > 0) 
+  { 
+    printf ("EEPROM: %8ld bytes", eeprom);
+    if (eeprommax > 0)
+    {
+      printf (" (%2.1f%% Full)", ((float)eeprom / eeprommax) * 100);
+    }
+    printf ("\n(.eeprom)\n\n");
+  }
+}
+
+
 static void
 print_sizes (bfd *file)
 {
   if (show_common)
     calculate_common_size (file);
-  if (berkeley_format)
-    print_berkeley_format (file);
-  else
-    print_sysv_format (file);
+  switch (format)
+  {
+    case format_sysv:
+      print_sysv_format (file);
+      break;
+    case format_bsd:
+      print_berkeley_format (file);
+      break;
+    case format_avr:
+    default:
+      print_avr_format (file);
+      break;
+  }
 }
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/testsuite/binutils-all/ar.exp binutils-2.26-avr/binutils/testsuite/binutils-all/ar.exp
--- binutils-2.26.1-src/binutils/testsuite/binutils-all/ar.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/binutils/testsuite/binutils-all/ar.exp	2016-11-16 03:51:00.000000000 -0800
@@ -555,45 +555,6 @@
     pass $testname
 }
 
-# PR 19775: Test creating and listing archives with an empty element.
-
-proc empty_archive { } {
-    global AR
-    global srcdir
-    global subdir
-
-    set testname "archive with empty element"
-
-    # FIXME: There ought to be a way to dynamically create an empty file.
-    set empty $srcdir/$subdir/empty
-    
-    if [is_remote host] {
-	set archive artest.a
-	set objfile [remote_download host $empty]
-	remote_file host delete $archive
-    } else {
-	set archive tmpdir/artest.a
-	set objfile $empty
-    }
-
-    remote_file build delete tmpdir/artest.a
-
-    set got [binutils_run $AR "-r -c $archive ${objfile}"]
-    if ![string match "" $got] {
-	fail $testname
-	return
-    }
-
-    # This commmand used to fail with: "Malformed archive".
-    set got [binutils_run $AR "-t $archive"]
-    if ![string match "empty" $got] {
-	fail $testname
-	return
-    }
-
-    pass $testname
-}
-
 # Run the tests.
 
 # Only run the bfdtest checks if the programs exist.  Since these
@@ -613,7 +574,6 @@
 deterministic_archive
 delete_an_element
 move_an_element
-empty_archive
 
 if { [is_elf_format]
      && ![istarget "*-*-hpux*"]
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/testsuite/binutils-all/compress.exp binutils-2.26-avr/binutils/testsuite/binutils-all/compress.exp
--- binutils-2.26.1-src/binutils/testsuite/binutils-all/compress.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/binutils/testsuite/binutils-all/compress.exp	2016-11-16 03:51:00.000000000 -0800
@@ -667,97 +667,4 @@
 
     set testname "Convert x32 object to x86-64 (3)"
     convert_test "$testname" "--nocompress-debug-sections --x32" "-O elf64-x86-64 --compress-debug-sections=zlib-gnu"
-}
-
-proc test_gnu_debuglink {} {
-    global srcdir
-    global subdir
-    global env
-    global CC_FOR_TARGET
-    global STRIP
-    global OBJCOPY
-    global OBJDUMP
-
-    set test "gnu-debuglink"
-    if {![info exists CC_FOR_TARGET]} {
-	set CC_FOR_TARGET $env(CC)
-    }
-    if { $CC_FOR_TARGET == "" } {
-	unsupported $test
-	return
-    }
-
-    if { [target_compile $srcdir/$subdir/testprog.c tmpdir/testprog exectuable debug] != "" } {
-	fail "$test (build)"
-	return
-    }
-    set got [remote_exec host "$OBJDUMP -S tmpdir/testprog" "" "/dev/null" "tmpdir/testprog.dump"]
-    if { [lindex $got 0] != 0 || ![string match "" [lindex $got 1]] } then {
-	fail "$test (objcopy dump)"
-	return
-    }
-    if { [binutils_run $STRIP "--strip-debug --remove-section=.comment --remove-section=.note tmpdir/testprog -o tmpdir/testprog.strip"] != "" } {
-	fail "$test (strip)"
-	return
-    }
-    if { [binutils_run $OBJCOPY "--only-keep-debug --decompress-debug-sections tmpdir/testprog tmpdir/testprog.decompress"] != "" } {
-	fail "$test (objcopy decompress)"
-	return
-    }
-    if { [binutils_run $OBJCOPY "--only-keep-debug --compress-debug-sections tmpdir/testprog tmpdir/testprog.compress"] != "" } {
-	fail "$test (objcopy compress)"
-	return
-    }
-    if { [binutils_run $OBJCOPY "--add-gnu-debuglink=tmpdir/testprog.decompress tmpdir/testprog.strip tmpdir/testprog"] != "" } {
-	fail "$test (objcopy link decompress)"
-	return
-    }
-    set got [remote_exec host "$OBJDUMP -S tmpdir/testprog" "" "/dev/null" "tmpdir/testprog.decompress.dump"]
-    if { [lindex $got 0] != 0 || ![string match "" [lindex $got 1]] } then {
-	fail "$test (objcopy dump decompress)"
-	return
-    }
-    if { [binutils_run $OBJCOPY "--add-gnu-debuglink=tmpdir/testprog.compress tmpdir/testprog.strip tmpdir/testprog"] != "" } {
-	fail "$test (objcopy link compress)"
-	return
-    }
-    set got [remote_exec host "$OBJDUMP -S tmpdir/testprog" "" "/dev/null" "tmpdir/testprog.compress.dump"]
-    if { [lindex $got 0] != 0 || ![string match "" [lindex $got 1]] } then {
-	fail "$test (objcopy dump compress)"
-	return
-    }
-
-    set src1 tmpdir/testprog.dump
-    set src2 tmpdir/testprog.compress.dump
-    send_log "cmp ${src1} ${src2}\n"
-    verbose "cmp ${src1} ${src2}"
-    set status [remote_exec build cmp "${src1} ${src2}"]
-    set exec_output [lindex $status 1]
-    set exec_output [prune_warnings $exec_output]
-    if ![string match "" $exec_output] then {
-	send_log "$exec_output\n"
-	verbose "$exec_output" 1
-	fail "$test (objdump 1)"
-    } else {
-	pass "$test (objdump 1)"
-    }
-
-    set src1 tmpdir/testprog.decompress.dump
-    set src2 tmpdir/testprog.compress.dump
-    send_log "cmp ${src1} ${src2}\n"
-    verbose "cmp ${src1} ${src2}"
-    set status [remote_exec build cmp "${src1} ${src2}"]
-    set exec_output [lindex $status 1]
-    set exec_output [prune_warnings $exec_output]
-    if ![string match "" $exec_output] then {
-	send_log "$exec_output\n"
-	verbose "$exec_output" 1
-	fail "$test (objdump 2)"
-    } else {
-	pass "$test (objdump 2)"
-    }
-}
-
-if {[isnative] && [is_elf_format]} then {
-    test_gnu_debuglink
-}
+ }
Only in binutils-2.26.1-src/binutils/testsuite/binutils-all: empty
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/testsuite/ChangeLog binutils-2.26-avr/binutils/testsuite/ChangeLog
--- binutils-2.26.1-src/binutils/testsuite/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/binutils/testsuite/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -90,7 +90,7 @@
 
 	* binutils-all/localize-hidden-1.d: Allow for extra symbols in the
 	output.
-	* binutils-all/strip-11.d: Skip for the RL78.
+        * binutils-all/strip-11.d: Skip for the RL78.
 
 2015-07-14  H.J. Lu  <hongjiu.lu@intel.com>
 
@@ -98,9 +98,9 @@
 
 2015-07-10  H.J. Lu  <hongjiu.lu@intel.com>
 
-	PR binutils/18656
-	* binutils-all/compress.exp (convert_test): New proc.
-	Run conversion tests between x86-64 and x32.
+	 PR binutils/18656
+	 * binutils-all/compress.exp (convert_test): New proc.
+	 Run conversion tests between x86-64 and x32.
 
 2015-07-10  H.J. Lu  <hongjiu.lu@intel.com>
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/binutils/testsuite/lib/binutils-common.exp binutils-2.26-avr/binutils/testsuite/lib/binutils-common.exp
--- binutils-2.26.1-src/binutils/testsuite/lib/binutils-common.exp	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/binutils/testsuite/lib/binutils-common.exp	2016-11-16 03:51:00.000000000 -0800
@@ -25,6 +25,7 @@
 	 && ![istarget *-*-elf*]
 	 && ![istarget *-*-eabi*]
 	 && ![istarget *-*-rtems*]
+	 && ![istarget avr-*-*]
 	 && ![istarget hppa*64*-*-hpux*]
 	 && ![istarget ia64-*-hpux*]
 	 && ![istarget *-*-linux*]
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/configure.ac binutils-2.26-avr/configure.ac
--- binutils-2.26.1-src/configure.ac	2016-06-29 01:21:46.000000000 -0700
+++ binutils-2.26-avr/configure.ac	2016-11-16 03:51:00.000000000 -0800
@@ -140,7 +140,7 @@
 # binutils, gas and ld appear in that order because it makes sense to run
 # "make check" in that particular order.
 # If --enable-gold is used, "gold" may replace "ld".
-host_tools="flex bison binutils gas ld fixincludes gcc cgen sid sim gdb gprof etc expect dejagnu m4 utils guile fastjar gnattools libcc1 gotools"
+host_tools="texinfo flex bison binutils gas ld fixincludes gcc cgen sid sim gdb gprof etc expect dejagnu m4 utils guile fastjar gnattools libcc1 gotools"
 
 # libgcj represents the runtime libraries only used by gcj.
 libgcj="target-libffi \
Only in binutils-2.26-avr: COPYING.LIBGLOSS
Only in binutils-2.26-avr: COPYING.NEWLIB
Only in binutils-2.26-avr: .cvsignore
Only in binutils-2.26-avr: djunpack.bat
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/elfcpp/ChangeLog binutils-2.26-avr/elfcpp/ChangeLog
--- binutils-2.26.1-src/elfcpp/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/elfcpp/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -339,11 +339,11 @@
 
 2009-10-16  Doug Kwan  <dougkwan@google.com>
 
-	* elfcpp.h (DT_PREINIT_ARRAY): Correct enum value.
+	* elfcpp/elfcpp.h (DT_PREINIT_ARRAY): Correct enum value.
 
 2009-10-09  Andrew Pinski  <andrew_pinski@playstation.sony.com>
 
-	* elfcpp_file.h (Elf_file::section_name): Change shstr_size
+	* elfcpp/elfcpp_file.h (Elf_file::section_name): Change shstr_size
 	to Elf_WXword.
 
 2009-10-09  Mikolaj Zalewski  <mikolajz@google.com>
Only in binutils-2.26-avr/etc: add-log.el
Only in binutils-2.26-avr/etc: add-log.vi
Only in binutils-2.26-avr/etc: config.log
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/ChangeLog binutils-2.26-avr/gas/ChangeLog
--- binutils-2.26.1-src/gas/ChangeLog	2016-06-29 00:59:49.000000000 -0700
+++ binutils-2.26-avr/gas/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -1,190 +1,19 @@
-2016-06-29  Tristan Gingold  <gingold@adacore.com>
+2016-05-03  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
 
-	* configure: Regenerate.
-
-2016-06-29  Maciej W. Rozycki  <macro@imgtec.com>
-
-	Backport from master
-	2016-04-22  Maciej W. Rozycki  <macro@imgtec.com>
+	* testsuite/gas/lns/lns.exp: Add avr to list of targets using
+	DW_LNS_fixed_advance_pc.
 
-	* config/tc-mips.c (code_option_type): New enum.
-	(parse_code_option): Return status indicating option type.
-	(s_mipsset): Update `parse_code_option' call site accordingly.
-	Always set register sizes from the ISA with ISA overrides.
-	(s_module): Update `parse_code_option' call site.
-	* testsuite/gas/mips/isa-override-1.d: New test.
-	* testsuite/gas/mips/micromips@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips1@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips2@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips32@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips32r2@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips32r3@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips32r5@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips32r6@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips64r2@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips64r3@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips64r5@isa-override-1.d: New test.
-	* testsuite/gas/mips/mips64r6@isa-override-1.d: New test.
-	* testsuite/gas/mips/r3000@isa-override-1.d: New test.
-	* testsuite/gas/mips/r3900@isa-override-1.d: New test.
-	* testsuite/gas/mips/r5900@isa-override-1.d: New test.
-	* testsuite/gas/mips/octeon@isa-override-1.d: New test.
-	* testsuite/gas/mips/octeon3@isa-override-1.d: New test.
-	* testsuite/gas/mips/isa-override-2.l: New list test.
-	* testsuite/gas/mips/mips1@isa-override-2.l: New list test.
-	* testsuite/gas/mips/mips2@isa-override-2.l: New list test.
-	* testsuite/gas/mips/mips32@isa-override-2.l: New list test.
-	* testsuite/gas/mips/mips32r2@isa-override-2.l: New list test.
-	* testsuite/gas/mips/mips32r3@isa-override-2.l: New list test.
-	* testsuite/gas/mips/mips32r5@isa-override-2.l: New list test.
-	* testsuite/gas/mips/mips32r6@isa-override-2.l: New list test.
-	* testsuite/gas/mips/r3000@isa-override-2.l: New list test.
-	* testsuite/gas/mips/r3900@isa-override-2.l: New list test.
-	* testsuite/gas/mips/octeon3@isa-override-2.l: New list test.
-	* testsuite/gas/mips/octeon3@isa-override-1.l: New stderr
-	output.
-	* testsuite/gas/mips/isa-override-1.s: New test source.
-	* testsuite/gas/mips/r5900@isa-override-1.s: New test source.
-	* testsuite/gas/mips/isa-override-2.s: New test source.
-	* testsuite/gas/mips/mips1@isa-override-2.s: New test source.
-	* testsuite/gas/mips/mips2@isa-override-2.s: New test source.
-	* testsuite/gas/mips/mips32@isa-override-2.s: New test source.
-	* testsuite/gas/mips/mips32r2@isa-override-2.s: New test source.
-	* testsuite/gas/mips/mips32r3@isa-override-2.s: New test source.
-	* testsuite/gas/mips/mips32r5@isa-override-2.s: New test source.
-	* testsuite/gas/mips/mips32r6@isa-override-2.s: New test source.
-	* testsuite/gas/mips/r3000@isa-override-2.s: New test source.
-	* testsuite/gas/mips/r3900@isa-override-2.s: New test source.
-	* testsuite/gas/mips/octeon3@isa-override-2.s: New test source.
-	* testsuite/gas/mips/mips.exp: Run the new tests.
-
-2016-06-29  Maciej W. Rozycki  <macro@imgtec.com>
-
-	Backport from master
-	2016-06-29  Maciej W. Rozycki  <macro@imgtec.com>
-
-	* write.c: Remove "libbfd.h" inclusion.
-
-2016-06-23  Peter Bergner  <bergner@vnet.ibm.com>
-
-	Apply from master.
-	2016-06-22  Peter Bergner  <bergner@vnet.ibm.com>
-
-	* testsuite/gas/ppc/power9.d <brd, brh, brw, mffs, mffs., mffsce,
-	mffscdrn, mffscdrni, mffscrn, mffscrni, mffsl, nandxor, rldixor,
-	setbool, xor3>: New tests.
-	* testsuite/gas/ppc/power9.s: Likewise.
-
-2016-06-03  Peter Bergner  <bergner@vnet.ibm.com>
-
-	Backport from master
-	2016-06-03  Peter Bergner  <bergner@vnet.ibm.com>
-
-	PR binutils/20196
-	* gas/testsuite/gas/ppc/e6500.s <lbarx, lharx, lwarx, ldarx,
-	stbcx., sthcx., stwcx., stdcx.>: Add tests.
-	* gas/testsuite/gas/ppc/e6500.d: Likewise.
-	* gas/testsuite/gas/ppc/power8.s: Likewise.
-	* gas/testsuite/gas/ppc/power8.d: Likewise.
-	* gas/testsuite/gas/ppc/power4.s <lwarx, ldarx, stwcx.,
-	stdcx.>: Add tests.
-	* gas/testsuite/gas/ppc/power4.d: Likewise.
-
-2016-06-01  Peter Bergner  <bergner@vnet.ibm.com>
-
-	Backport from master
-	2016-05-26  Peter Bergner  <bergner@vnet.ibm.com>
-
-	* testsuite/gas/ppc/altivec3.d <vmsumudm>: Add test.
-	* testsuite/gas/ppc/altivec3.s: Likewise.
-	* testsuite/gas/ppc/power9.d <addex[.], lwzmx, vmsumudm>: Add tests.
-	* testsuite/gas/ppc/power9.s: Likewise.
+2015-11-17  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
 
-2016-05-11  Nick Clifton  <nickc@redhat.com>
-
-	PR gas/20047
-	* config/tc-arc.c (md_parse_option): Return 1 for recognised dummy
-	options.
-
-2016-04-15  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-04-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR gas/19909
-	* config/tc-i386.c (check_VecOperands): Try vec_disp8 encoding
-	only if i.disp_encoding != disp_encoding_32bit.
-	* gas/testsuite/gas/i386/disp32.s: Add tests for vmovdqu64.d32.
-	* gas/testsuite/gas/i386/x86-64-disp32.s: Likewise.
-	* gas/testsuite/gas/i386/disp32.d: Updated.
-	* gas/testsuite/gas/i386/x86-64-disp32.d: Likewise.
-
-2016-02-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* config/tc-i386.c (register_number): Check RegVRex.
-	* testsuite/gas/i386/x86-64-avx512f.s: Add a test for vgatherqpd
-	with %zmm19 and %zmm3.
-	* testsuite/gas/i386/x86-64-avx512f-intel.d: Updated.
-	* testsuite/gas/i386/x86-64-avx512f.d: Likewise.
-
-2016-02-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR gas/19520
-	* NEWS: Mention new command line option -mrelax-relocations and
-	new configure option --enable-x86-relax-relocations for x86
-	target.
-	* config.in: Regenerated.
-	* configure.ac: Add --enable-x86-relax-relocations.
-	(ac_default_x86_relax_relocations): New.  Default to 1 except
-	for x86 Solaris targets older than Solaris 12.
-	(DEFAULT_GENERATE_X86_RELAX_RELOCATIONS): Define.
-	* configure: Likewise.
-	* config/tc-i386.c (generate_relax_relocations): New.
-	(OPTION_MRELAX_RELOCATIONS): Likewise.
-	(output_disp): Don't generate relax relocations if
-	generate_relax_relocations is 0.
-	(md_longopts): Add -mrelax-relocations.
+	* config/tc-avr.c (struct avr_opt_s): Add member for non_bit_addressable
+	registers_mask.
+	(avr_opt): initialize it.
+	(enum options): Add non bit addressable registers mask option.
+	(md_longopts): Likewise.
 	(md_show_usage): Likewise.
-	(md_parse_option): Handle OPTION_MRELAX_RELOCATIONS.
-	* doc/c-i386.texi: Document -mrelax-relocations=.
-	* testsuite/gas/i386/got-no-relax.d: New file.
-	* testsuite/gas/i386/x86-64-gotpcrel-no-relax.d: Likewise.
-	* testsuite/gas/i386/got.d: Pass -mrelax-relocations=yes to as.
-	* testsuite/gas/i386/localpic.d: Likewise.
-	* testsuite/gas/i386/mixed-mode-reloc32.d: Likewise.
-	* testsuite/gas/i386/reloc32.d: Likewise.
-	* testsuite/gas/i386/x86-64-gotpcrel.d: Likewise.
-	* testsuite/gas/i386/x86-64-localpic.d: Likewise.
-	* testsuite/gas/i386/ilp32/x86-64-gotpcrel.d: Likewise.
-	* testsuite/gas/i386/ilp32/x86-64-localpic.d: Likewise.
-	* testsuite/gas/i386/i386.exp: Run got-no-relax and
-	x86-64-gotpcrel-no-relax.
-
-2016-02-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* NEWS: Remove duplicated marker for 2.26.
-
-2016-01-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-01-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR gas/19532
-	* configure.ac (compressed_debug_sections): Replace == with =.
-	* configure: Regenerated.
-
-2016-01-25  Tristan Gingold  <gingold@adacore.com>
-
-	* configure: Regenerate.
+	(md_parse_option): Handle the new option.
+	(md_apply_fix): Report error if register operand for BFD_RELOC_AVR_PORT5
+	relocation is not bit addressable.
 
 2016-01-25  Tristan Gingold  <gingold@adacore.com>
 
@@ -196,8 +25,12 @@
 
 2015-12-17  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>
 
-	* config/tc-arm.c (aeabi_set_public_attributes): Adjust
+	* gas/config/tc-arm.c (aeabi_set_public_attributes): Adjust
 	TAG_ARCH_profile for armv8-a.
+	* gas/testsuite/gas/arm/armv8a-automatic-hlt.d: New test.
+	* gas/testsuite/gas/arm/armv8a-automatic-hlt.s: New test.
+	* gas/testsuite/gas/arm/armv8a-automatic-lda.d: New test.
+	* gas/testsuite/gas/arm/armv8a-automatic-lda.s: New test.
 
 2015-12-15  Nick Clifton  <nickc@redhat.com>
 
@@ -504,10 +337,10 @@
 
 2015-10-07  Claudiu Zissulescu  <claziss@synopsys.com>
 
-	* config/tc-arc.c: Revamped file for ARC support.
-	* config/tc-arc.h: Likewise.
-	* doc/as.texinfo: Add new ARC options.
-	* doc/c-arc.texi: Likewise.
+        * config/tc-arc.c: Revamped file for ARC support.
+        * config/tc-arc.h: Likewise.
+        * doc/as.texinfo: Add new ARC options.
+        * doc/c-arc.texi: Likewise.
 
 2015-10-02  Renlin Li <renlin.li@arm.com>
 
@@ -756,9 +589,9 @@
 
 2015-08-17  Alan Modra  <amodra@gmail.com>
 
-	* config/tc-arm.c (s_align): Delete.
+	* gas/config/tc-arm.c (s_align): Delete.
 	(md_pseudo_table): Use s_align_ptwo for "align".
-	* config/tc-arm.h (TC_ALIGN_ZERO_IS_DEFAULT): Define.
+	* gas/config/tc-arm.h (TC_ALIGN_ZERO_IS_DEFAULT): Define.
 	* read.c (s_align): Modify for TC_ALIGN_ZERO_IS_DEFAULT.
 
 2015-08-13  Alan Modra  <amodra@gmail.com>
@@ -1136,7 +969,7 @@
 2015-06-11  John David Anglin  <danglin@gcc.gnu.org>
 
 	PR gas/18427
-	* config/tc-hppa.c (last_label_symbol): Declare.
+	* gas/config/tc-hppa.c (last_label_symbol): Declare.
 	(pa_get_label): Return last label in current space/segment or NULL.
 	(pa_define_label): Record last label and add to root.
 	(pa_undefine_label): Remove last label from root.
@@ -1212,6 +1045,7 @@
 	    Bernd Schmidt <bernds@codesourcery.com>
 	    Paul Brook <paul@codesourcery.com>
 
+	gas/
 	* config/tc-alpha.c (all_cfi_sections): Declare.
 	(s_alpha_ent): Initialize all_cfi_sections.
 	(alpha_elf_md_end): Invoke cfi_set_sections.
@@ -1979,7 +1813,7 @@
 
 2015-01-12  Jan Beulich  <jbeulich@suse.com>
 
-	* dw2gencfi.c (cfi_add_label, dot_cfi_label): New.
+	* gas/dw2gencfi.c (cfi_add_label, dot_cfi_label): New.
 	(cfi_pseudo_table): Add "cfi_label".
 	(output_cfi_insn): Handle CFI_label.
 	(select_cie_for_fde): Als terminate CIE when encountering
@@ -1992,7 +1826,7 @@
 
 2015-01-12  Jan Beulich  <jbeulich@suse.com>
 
-	* config/tc-arm.c (do_neon_shl_imm): Check immediate range.
+	* gas/config/tc-arm.c (do_neon_shl_imm): Check immediate range.
 	(do_neon_qshl_imm): Likewise.
 
 2015-01-12  Alan Modra  <amodra@gmail.com>
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/config/tc-arc.c binutils-2.26-avr/gas/config/tc-arc.c
--- binutils-2.26.1-src/gas/config/tc-arc.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/config/tc-arc.c	2016-11-16 03:51:00.000000000 -0800
@@ -1747,7 +1747,6 @@
     case OPTION_RTSC:
     case OPTION_FPUDA:
       /* Dummy options.  */
-      break;
 
     default:
       return 0;
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/config/tc-avr.c binutils-2.26-avr/gas/config/tc-avr.c
--- binutils-2.26.1-src/gas/config/tc-avr.c	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/config/tc-avr.c	2016-11-16 03:51:00.000000000 -0800
@@ -155,10 +155,10 @@
   {"atmega32u2", AVR_ISA_AVR35,   bfd_mach_avr35},
   {"attiny1634", AVR_ISA_AVR35,   bfd_mach_avr35},
   {"atmega8",    AVR_ISA_M8,      bfd_mach_avr4},
-  {"ata6289",    AVR_ISA_AVR4,    bfd_mach_avr4},
   {"atmega8a",   AVR_ISA_M8,      bfd_mach_avr4},
   {"ata6285",    AVR_ISA_AVR4,    bfd_mach_avr4},
   {"ata6286",    AVR_ISA_AVR4,    bfd_mach_avr4},
+  {"ata6289",    AVR_ISA_AVR4,    bfd_mach_avr4},
   {"atmega48",   AVR_ISA_AVR4,    bfd_mach_avr4},
   {"atmega48a",  AVR_ISA_AVR4,    bfd_mach_avr4},
   {"atmega48pa", AVR_ISA_AVR4,    bfd_mach_avr4},
@@ -355,9 +355,11 @@
   int no_wrap;      /* -mno-wrap: reject rjmp/rcall with 8K wrap-around.  */
   int no_link_relax;   /* -mno-link-relax / -mlink-relax: generate (or not)
                           relocations for linker relaxation.  */
+  unsigned int non_bit_addressable_registers_mask; /* Specify non bit
+                       addressable registers mask.  */
 };
 
-static struct avr_opt_s avr_opt = { 0, 0, 0, 0 };
+static struct avr_opt_s avr_opt = { 0, 0, 0, 0, 0 };
 
 const char EXP_CHARS[] = "eE";
 const char FLT_CHARS[] = "dD";
@@ -420,7 +422,8 @@
   OPTION_NO_WRAP,
   OPTION_ISA_RMW,
   OPTION_LINK_RELAX,
-  OPTION_NO_LINK_RELAX
+  OPTION_NO_LINK_RELAX,
+  OPTION_NON_BIT_ADDRESSABLE_REGISTERS_MASK
 };
 
 struct option md_longopts[] =
@@ -432,6 +435,8 @@
   { "mrmw",         no_argument, NULL, OPTION_ISA_RMW     },
   { "mlink-relax",  no_argument, NULL, OPTION_LINK_RELAX  },
   { "mno-link-relax",  no_argument, NULL, OPTION_NO_LINK_RELAX  },
+  { "mnon-bit-addressable-registers-mask", required_argument, NULL,
+                    OPTION_NON_BIT_ADDRESSABLE_REGISTERS_MASK  },
   { NULL, no_argument, NULL, 0 }
 };
 
@@ -540,7 +545,9 @@
 	"  -mrmw            accept Read-Modify-Write instructions\n"
 	"  -mlink-relax     generate relocations for linker relaxation (default)\n"
 	"  -mno-link-relax  don't generate relocations for linker relaxation.\n"
-        ));
+  "  -mnon-bit-addressable-registers-mask=<32 bit mask>\n"
+  "                   Specify non bit addressable registers mask.\n"
+    ));
   show_mcu_list (stream);
 }
 
@@ -616,6 +623,9 @@
     case OPTION_NO_LINK_RELAX:
       avr_opt.no_link_relax = 1;
       return 1;
+    case OPTION_NON_BIT_ADDRESSABLE_REGISTERS_MASK:
+      avr_opt.non_bit_addressable_registers_mask = strtoul (arg, NULL, 0);
+      return 1;
     }
 
   return 0;
@@ -1582,6 +1592,9 @@
 	  if (value > 31)
 	    as_bad_where (fixP->fx_file, fixP->fx_line,
 			  _("operand out of range: %ld"), value);
+	  else if (avr_opt.non_bit_addressable_registers_mask & (1 << (unsigned int)value))
+	    as_bad_where (fixP->fx_file, fixP->fx_line,
+			  _("operand is not bit addressable: %ld"), value);
 	  bfd_putl16 ((bfd_vma) insn | ((value & 0x1f) << 3), where);
 	  break;
 	}
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/config/tc-i386.c binutils-2.26-avr/gas/config/tc-i386.c
--- binutils-2.26.1-src/gas/config/tc-i386.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/config/tc-i386.c	2016-11-16 03:51:00.000000000 -0800
@@ -552,10 +552,6 @@
    specified explicitly.  */
 static int omit_lock_prefix = 0;
 
-/* 1 if the assembler should generate relax relocations.  */
-static int generate_relax_relocations
-  = DEFAULT_GENERATE_X86_RELAX_RELOCATIONS;
-
 static enum check_kind
   {
     check_none = 0,
@@ -1875,9 +1871,6 @@
   if (r->reg_flags & RegRex)
     nr += 8;
 
-  if (r->reg_flags & RegVRex)
-    nr += 16;
-
   return nr;
 }
 
@@ -4564,9 +4557,7 @@
 	    && i.op[op].disps->X_op == O_constant)
 	  {
 	    offsetT value = i.op[op].disps->X_add_number;
-	    int vec_disp8_ok
-	      = (i.disp_encoding != disp_encoding_32bit
-		 && fits_in_vec_disp8 (value));
+	    int vec_disp8_ok = fits_in_vec_disp8 (value);
 	    if (t->operand_types [op].bitfield.vec_disp8)
 	      {
 		if (vec_disp8_ok)
@@ -7250,14 +7241,9 @@
 	      /* Check for "call/jmp *mem", "mov mem, %reg",
 		 "test %reg, mem" and "binop mem, %reg" where binop
 		 is one of adc, add, and, cmp, or, sbb, sub, xor
-		 instructions.  Always generate R_386_GOT32X for
-		 "sym*GOT" operand in 32-bit mode.  */
-	      if ((generate_relax_relocations
-		   || (!object_64bit
-		       && i.rm.mode == 0
-		       && i.rm.regmem == 5))
-		  && (i.rm.mode == 2
-		      || (i.rm.mode == 0 && i.rm.regmem == 5))
+		 instructions.  */
+	      if ((i.rm.mode == 2
+		   || (i.rm.mode == 0 && i.rm.regmem == 5))
 		  && ((i.operands == 1
 		       && i.tm.base_opcode == 0xff
 		       && (i.rm.reg == 2 || i.rm.reg == 4))
@@ -9630,7 +9616,6 @@
 #define OPTION_MSHARED (OPTION_MD_BASE + 21)
 #define OPTION_MAMD64 (OPTION_MD_BASE + 22)
 #define OPTION_MINTEL64 (OPTION_MD_BASE + 23)
-#define OPTION_MRELAX_RELOCATIONS (OPTION_MD_BASE + 24)
 
 struct option md_longopts[] =
 {
@@ -9662,7 +9647,6 @@
   {"mbig-obj", no_argument, NULL, OPTION_MBIG_OBJ},
 #endif
   {"momit-lock-prefix", required_argument, NULL, OPTION_OMIT_LOCK_PREFIX},
-  {"mrelax-relocations", required_argument, NULL, OPTION_MRELAX_RELOCATIONS},
   {"mevexrcig", required_argument, NULL, OPTION_MEVEXRCIG},
   {"mamd64", no_argument, NULL, OPTION_MAMD64},
   {"mintel64", no_argument, NULL, OPTION_MINTEL64},
@@ -9982,15 +9966,6 @@
         as_fatal (_("invalid -momit-lock-prefix= option: `%s'"), arg);
       break;
 
-    case OPTION_MRELAX_RELOCATIONS:
-      if (strcasecmp (arg, "yes") == 0)
-        generate_relax_relocations = 1;
-      else if (strcasecmp (arg, "no") == 0)
-        generate_relax_relocations = 0;
-      else
-        as_fatal (_("invalid -mrelax-relocations= option: `%s'"), arg);
-      break;
-
     case OPTION_MAMD64:
       cpu_arch_flags.bitfield.cpuamd64 = 1;
       cpu_arch_flags.bitfield.cpuintel64 = 0;
@@ -10171,9 +10146,6 @@
   -momit-lock-prefix=[no|yes]\n\
                           strip all lock prefixes\n"));
   fprintf (stream, _("\
-  -mrelax-relocations=[no|yes]\n\
-                          generate relax relocations\n"));
-  fprintf (stream, _("\
   -mamd64                 accept only AMD64 ISA\n"));
   fprintf (stream, _("\
   -mintel64               accept only Intel64 ISA\n"));
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/config/tc-mips.c binutils-2.26-avr/gas/config/tc-mips.c
--- binutils-2.26.1-src/gas/config/tc-mips.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/config/tc-mips.c	2016-11-16 03:51:00.000000000 -0800
@@ -15506,29 +15506,10 @@
 
 static struct mips_option_stack *mips_opts_stack;
 
-/* Return status for .set/.module option handling.  */
-
-enum code_option_type
-{
-  /* Unrecognized option.  */
-  OPTION_TYPE_BAD = -1,
-
-  /* Ordinary option.  */
-  OPTION_TYPE_NORMAL,
-
-  /* ISA changing option.  */
-  OPTION_TYPE_ISA
-};
-
-/* Handle common .set/.module options.  Return status indicating option
-   type.  */
-
-static enum code_option_type
+static bfd_boolean
 parse_code_option (char * name)
 {
-  bfd_boolean isa_set = FALSE;
   const struct mips_ase *ase;
-
   if (strncmp (name, "at=", 3) == 0)
     {
       char *s = name + 3;
@@ -15601,7 +15582,6 @@
 	    {
 	      mips_opts.arch = p->cpu;
 	      mips_opts.isa = p->isa;
-	      isa_set = TRUE;
 	    }
 	}
       else if (strncmp (name, "mips", 4) == 0)
@@ -15615,7 +15595,6 @@
 	    {
 	      mips_opts.arch = p->cpu;
 	      mips_opts.isa = p->isa;
-	      isa_set = TRUE;
 	    }
 	}
       else
@@ -15634,9 +15613,8 @@
   else if (strcmp (name, "nosym32") == 0)
     mips_opts.sym32 = FALSE;
   else
-    return OPTION_TYPE_BAD;
-
-  return isa_set ? OPTION_TYPE_ISA : OPTION_TYPE_NORMAL;
+    return FALSE;
+  return TRUE;
 }
 
 /* Handle the .set pseudo-op.  */
@@ -15644,8 +15622,8 @@
 static void
 s_mipsset (int x ATTRIBUTE_UNUSED)
 {
-  enum code_option_type type = OPTION_TYPE_NORMAL;
   char *name = input_line_pointer, ch;
+  int prev_isa = mips_opts.isa;
 
   file_mips_check_options ();
 
@@ -15722,16 +15700,12 @@
 	  free (s);
 	}
     }
-  else
-    {
-      type = parse_code_option (name);
-      if (type == OPTION_TYPE_BAD)
-	as_warn (_("tried to set unrecognized symbol: %s\n"), name);
-    }
+  else if (!parse_code_option (name))
+    as_warn (_("tried to set unrecognized symbol: %s\n"), name);
 
   /* The use of .set [arch|cpu]= historically 'fixes' the width of gp and fp
      registers based on what is supported by the arch/cpu.  */
-  if (type == OPTION_TYPE_ISA)
+  if (mips_opts.isa != prev_isa)
     {
       switch (mips_opts.isa)
 	{
@@ -15798,7 +15772,7 @@
 
   if (!file_mips_opts_checked)
     {
-      if (parse_code_option (name) == OPTION_TYPE_BAD)
+      if (!parse_code_option (name))
 	as_bad (_(".module used with unrecognized symbol: %s\n"), name);
 
       /* Update module level settings from mips_opts.  */
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/config.in binutils-2.26-avr/gas/config.in
--- binutils-2.26.1-src/gas/config.in	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/config.in	2016-11-16 03:51:00.000000000 -0800
@@ -39,9 +39,6 @@
 /* Define if you want compressed debug sections by default. */
 #undef DEFAULT_FLAG_COMPRESS_DEBUG
 
-/* Define to 1 if you want to generate x86 relax relocations by default. */
-#undef DEFAULT_GENERATE_X86_RELAX_RELOCATIONS
-
 /* Supported emulations. */
 #undef EMULATIONS
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/configure binutils-2.26-avr/gas/configure
--- binutils-2.26.1-src/gas/configure	2016-06-29 00:59:49.000000000 -0700
+++ binutils-2.26-avr/gas/configure	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.64 for gas 2.26.1.
+# Generated by GNU Autoconf 2.64 for gas 2.26.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software
@@ -556,8 +556,8 @@
 # Identity of this package.
 PACKAGE_NAME='gas'
 PACKAGE_TARNAME='gas'
-PACKAGE_VERSION='2.26.1'
-PACKAGE_STRING='gas 2.26.1'
+PACKAGE_VERSION='2.26'
+PACKAGE_STRING='gas 2.26'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
@@ -765,7 +765,6 @@
 enable_targets
 enable_checking
 enable_compressed_debug_sections
-enable_x86_relax_relocations
 enable_werror
 enable_build_warnings
 enable_nls
@@ -1324,7 +1323,7 @@
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures gas 2.26.1 to adapt to many kinds of systems.
+\`configure' configures gas 2.26 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1395,7 +1394,7 @@
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of gas 2.26.1:";;
+     short | recursive ) echo "Configuration of gas 2.26:";;
    esac
   cat <<\_ACEOF
 
@@ -1416,8 +1415,6 @@
   --enable-checking       enable run-time checks
   --enable-compressed-debug-sections={all,gas,none}
                           compress debug sections by default]
-  --enable-x86-relax-relocations
-                          generate x86 relax relocations by default
   --enable-werror         treat compile warnings as errors
   --enable-build-warnings enable build-time compiler warnings
   --disable-nls           do not use Native Language Support
@@ -1513,7 +1510,7 @@
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-gas configure 2.26.1
+gas configure 2.26
 generated by GNU Autoconf 2.64
 
 Copyright (C) 2009 Free Software Foundation, Inc.
@@ -1923,7 +1920,7 @@
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by gas $as_me 2.26.1, which was
+It was created by gas $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   $ $0 $@
@@ -3731,7 +3728,7 @@
 
 # Define the identity of the package.
  PACKAGE='gas'
- VERSION='2.26.1'
+ VERSION='2.26'
 
 
 cat >>confdefs.h <<_ACEOF
@@ -10975,7 +10972,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10978 "configure"
+#line 10975 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -11081,7 +11078,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 11084 "configure"
+#line 11081 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -11683,17 +11680,6 @@
 esac
 fi
 
-# PR gas/19520
-# Decide if x86 assembler should generate relax relocations.
-ac_default_x86_relax_relocations=unset
-# Provide a configure time option to override our default.
-# Check whether --enable-x86_relax_relocations was given.
-if test "${enable_x86_relax_relocations+set}" = set; then :
-  enableval=$enable_x86_relax_relocations; case "${enableval}" in
-  no)  ac_default_x86_relax_relocations=0 ;;
-esac
-fi
-
 using_cgen=no
 
 
@@ -12099,17 +12085,6 @@
 
 	;;
 
-      i386-*-solaris2 \
-      | x86_64-*-solaris2 \
-      | i386-*-solaris2.[0-9] \
-      | i386-*-solaris2.1[01] \
-      | x86_64-*-solaris2.1[01])
-	if test ${this_target} = $target \
-	   && test ${ac_default_x86_relax_relocations} = unset; then
-	  ac_default_x86_relax_relocations=0
-	fi
-	;;
-
       i860-*-*)
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: GAS support for ${generic_target} is preliminary and a work in progress" >&5
 $as_echo "$as_me: WARNING: GAS support for ${generic_target} is preliminary and a work in progress" >&2;}
@@ -12530,16 +12505,7 @@
 
 done
 
-if test ${ac_default_x86_relax_relocations} = unset; then
-  ac_default_x86_relax_relocations=1
-fi
-
-cat >>confdefs.h <<_ACEOF
-#define DEFAULT_GENERATE_X86_RELAX_RELOCATIONS $ac_default_x86_relax_relocations
-_ACEOF
-
-
-if test x$ac_default_compressed_debug_sections = xyes ; then
+if test x$ac_default_compressed_debug_sections == xyes ; then
 
 $as_echo "#define DEFAULT_FLAG_COMPRESS_DEBUG 1" >>confdefs.h
 
@@ -15063,7 +15029,7 @@
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by gas $as_me 2.26.1, which was
+This file was extended by gas $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -15127,7 +15093,7 @@
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_version="\\
-gas config.status 2.26.1
+gas config.status 2.26
 configured by $0, generated by GNU Autoconf 2.64,
   with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/configure.ac binutils-2.26-avr/gas/configure.ac
--- binutils-2.26.1-src/gas/configure.ac	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/configure.ac	2016-11-16 03:51:00.000000000 -0800
@@ -77,17 +77,6 @@
   *)   ac_default_compressed_debug_sections=unset ;;
 esac])dnl
 
-# PR gas/19520
-# Decide if x86 assembler should generate relax relocations.
-ac_default_x86_relax_relocations=unset
-# Provide a configure time option to override our default.
-AC_ARG_ENABLE(x86_relax_relocations,
-	      AS_HELP_STRING([--enable-x86-relax-relocations],
-	      [generate x86 relax relocations by default]),
-[case "${enableval}" in
-  no)  ac_default_x86_relax_relocations=0 ;;
-esac])dnl
-
 using_cgen=no
 
 AM_BINUTILS_WARNINGS
@@ -179,17 +168,6 @@
 	AC_DEFINE(STRICTCOFF, 1, [Using strict COFF?])
 	;;
 
-      i386-*-solaris2 \
-      | x86_64-*-solaris2 \
-      | i386-*-solaris2.[[0-9]] \
-      | i386-*-solaris2.1[[01]] \
-      | x86_64-*-solaris2.1[[01]])
-	if test ${this_target} = $target \
-	   && test ${ac_default_x86_relax_relocations} = unset; then
-	  ac_default_x86_relax_relocations=0
-	fi
-	;;
-
       i860-*-*)
 	AC_MSG_WARN(GAS support for ${generic_target} is preliminary and a work in progress)
 	;;
@@ -571,14 +549,7 @@
 
 done
 
-if test ${ac_default_x86_relax_relocations} = unset; then
-  ac_default_x86_relax_relocations=1
-fi
-AC_DEFINE_UNQUOTED(DEFAULT_GENERATE_X86_RELAX_RELOCATIONS,
-  $ac_default_x86_relax_relocations,
-  [Define to 1 if you want to generate x86 relax relocations by default.])
-
-if test x$ac_default_compressed_debug_sections = xyes ; then
+if test x$ac_default_compressed_debug_sections == xyes ; then
   AC_DEFINE(DEFAULT_FLAG_COMPRESS_DEBUG, 1, [Define if you want compressed debug sections by default.])
 fi
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/doc/as.1 binutils-2.26-avr/gas/doc/as.1
--- binutils-2.26.1-src/gas/doc/as.1	2016-06-29 01:03:39.000000000 -0700
+++ binutils-2.26-avr/gas/doc/as.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "AS 1"
-.TH AS 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH AS 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
@@ -1274,19 +1274,6 @@
 \&\fB\-momit\-lock\-prefix=\fR\fIyes\fR will omit all lock prefixes.
 \&\fB\-momit\-lock\-prefix=\fR\fIno\fR will encode lock prefix as usual,
 which is the default.
-.IP "\fB\-mrelax\-relocations=\fR\fIno\fR" 4
-.IX Item "-mrelax-relocations=no"
-.PD 0
-.IP "\fB\-mrelax\-relocations=\fR\fIyes\fR" 4
-.IX Item "-mrelax-relocations=yes"
-.PD
-These options control whether the assembler should generate relax
-relocations, R_386_GOT32X, in 32\-bit mode, or R_X86_64_GOTPCRELX and
-R_X86_64_REX_GOTPCRELX, in 64\-bit mode.
-\&\fB\-mrelax\-relocations=\fR\fIyes\fR will generate relax relocations.
-\&\fB\-mrelax\-relocations=\fR\fIno\fR will not generate relax
-relocations.  The default can be controlled by a configure option
-\&\fB\-\-enable\-x86\-relax\-relocations\fR.
 .IP "\fB\-mevexrcig=\fR\fIrne\fR" 4
 .IX Item "-mevexrcig=rne"
 .PD 0
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/doc/as.info binutils-2.26-avr/gas/doc/as.info
--- binutils-2.26.1-src/gas/doc/as.info	2016-06-29 01:03:39.000000000 -0700
+++ binutils-2.26-avr/gas/doc/as.info	2016-11-16 03:51:00.000000000 -0800
@@ -10710,16 +10710,6 @@
      omit all lock prefixes.  `-momit-lock-prefix=NO' will encode lock
      prefix as usual, which is the default.
 
-`-mrelax-relocations=NO'
-`-mrelax-relocations=YES'
-     These options control whether the assembler should generate relax
-     relocations, R_386_GOT32X, in 32-bit mode, or R_X86_64_GOTPCRELX
-     and R_X86_64_REX_GOTPCRELX, in 64-bit mode.
-     `-mrelax-relocations=YES' will generate relax relocations.
-     `-mrelax-relocations=NO' will not generate relax relocations.  The
-     default can be controlled by a configure option
-     `--enable-x86-relax-relocations'.
-
 `-mevexrcig=RNE'
 `-mevexrcig=RD'
 `-mevexrcig=RU'
@@ -24019,11 +24009,11 @@
 * #:                                     Comments.            (line  33)
 * #APP:                                  Preprocessing.       (line  27)
 * #NO_APP:                               Preprocessing.       (line  27)
-* $ in symbol names <1>:                 SH64-Chars.          (line  15)
-* $ in symbol names <2>:                 SH-Chars.            (line  15)
-* $ in symbol names <3>:                 D30V-Chars.          (line  70)
-* $ in symbol names <4>:                 Meta-Chars.          (line  10)
-* $ in symbol names:                     D10V-Chars.          (line  53)
+* $ in symbol names <1>:                 D10V-Chars.          (line  53)
+* $ in symbol names <2>:                 Meta-Chars.          (line  10)
+* $ in symbol names <3>:                 SH64-Chars.          (line  15)
+* $ in symbol names <4>:                 SH-Chars.            (line  15)
+* $ in symbol names:                     D30V-Chars.          (line  70)
 * $a:                                    ARM Mapping Symbols. (line   9)
 * $acos math builtin, TIC54X:            TIC54X-Builtins.     (line  10)
 * $asin math builtin, TIC54X:            TIC54X-Builtins.     (line  13)
@@ -24208,8 +24198,8 @@
 * -EL option, TILE-Gx:                   TILE-Gx Options.     (line  11)
 * -f:                                    f.                   (line   6)
 * -F command line option, Alpha:         Alpha Options.       (line  57)
-* -G command line option, Alpha:         Alpha Options.       (line  53)
 * -g command line option, Alpha:         Alpha Options.       (line  47)
+* -G command line option, Alpha:         Alpha Options.       (line  53)
 * -G option (MIPS):                      MIPS Options.        (line   8)
 * -h option, VAX/VMS:                    VAX-Opts.            (line  45)
 * -H option, VAX/VMS:                    VAX-Opts.            (line  81)
@@ -24281,7 +24271,7 @@
 * -mall-enabled command line option, LM32: LM32 Options.      (line  30)
 * -mall-extensions:                      PDP-11-Options.      (line  26)
 * -mall-opcodes command line option, AVR: AVR Options.        (line 109)
-* -mamd64 option, x86-64:                i386-Options.        (line 175)
+* -mamd64 option, x86-64:                i386-Options.        (line 165)
 * -mapcs-26 command line option, ARM:    ARM Options.         (line 134)
 * -mapcs-32 command line option, ARM:    ARM Options.         (line 134)
 * -mapcs-float command line option, ARM: ARM Options.         (line 148)
@@ -24327,8 +24317,8 @@
 * -mesa option, s390:                    s390 Options.        (line  17)
 * -mevexlig= option, i386:               i386-Options.        (line  94)
 * -mevexlig= option, x86-64:             i386-Options.        (line  94)
-* -mevexrcig= option, i386:              i386-Options.        (line 165)
-* -mevexrcig= option, x86-64:            i386-Options.        (line 165)
+* -mevexrcig= option, i386:              i386-Options.        (line 155)
+* -mevexrcig= option, x86-64:            i386-Options.        (line 155)
 * -mevexwig= option, i386:               i386-Options.        (line 104)
 * -mevexwig= option, x86-64:             i386-Options.        (line 104)
 * -mf option, far-mode:                  TIC54X-Opts.         (line   8)
@@ -24347,7 +24337,7 @@
 * -micache-enabled command line option, LM32: LM32 Options.   (line  21)
 * -mimplicit-it command line option, ARM: ARM Options.        (line 118)
 * -mint-register:                        RX-Opts.             (line  57)
-* -mintel64 option, x86-64:              i386-Options.        (line 175)
+* -mintel64 option, x86-64:              i386-Options.        (line 165)
 * -mip2022 option, IP2K:                 IP2K-Opts.           (line  14)
 * -mip2022ext option, IP2022:            IP2K-Opts.           (line   9)
 * -mj11:                                 PDP-11-Options.      (line 126)
@@ -24366,10 +24356,10 @@
 * -mlimited-eis:                         PDP-11-Options.      (line  64)
 * -mlink-relax command line option, AVR: AVR Options.         (line 121)
 * -mlittle-endian:                       RX-Opts.             (line  26)
-* -mlong <1>:                            M68HC11-Opts.        (line  45)
-* -mlong:                                XGATE-Opts.          (line  13)
-* -mlong-double <1>:                     M68HC11-Opts.        (line  53)
-* -mlong-double:                         XGATE-Opts.          (line  21)
+* -mlong <1>:                            XGATE-Opts.          (line  13)
+* -mlong:                                M68HC11-Opts.        (line  45)
+* -mlong-double <1>:                     XGATE-Opts.          (line  21)
+* -mlong-double:                         M68HC11-Opts.        (line  53)
 * -mm9s12x:                              M68HC11-Opts.        (line  27)
 * -mm9s12xg:                             M68HC11-Opts.        (line  32)
 * -mmcu= command line option, AVR:       AVR Options.         (line   6)
@@ -24419,8 +24409,6 @@
 * -mpid= command line option, TIC6X:     TIC6X Options.       (line  23)
 * -mregnames option, s390:               s390 Options.        (line  33)
 * -mrelax command line option, V850:     V850 Options.        (line  72)
-* -mrelax-relocations= option, i386:     i386-Options.        (line 155)
-* -mrelax-relocations= option, x86-64:   i386-Options.        (line 155)
 * -mrh850-abi command line option, V850: V850 Options.        (line  82)
 * -mrmw command line option, AVR:        AVR Options.         (line 118)
 * -mrx-abi:                              RX-Opts.             (line  69)
@@ -24486,8 +24474,8 @@
 * -relax command line option, Alpha:     Alpha Options.       (line  32)
 * -replace command line option, Alpha:   Alpha Options.       (line  40)
 * -S, ignored on VAX:                    VAX-Opts.            (line  11)
-* -T, ignored on VAX:                    VAX-Opts.            (line  11)
 * -t, ignored on VAX:                    VAX-Opts.            (line  36)
+* -T, ignored on VAX:                    VAX-Opts.            (line  11)
 * -v:                                    v.                   (line   6)
 * -V, redundant on VAX:                  VAX-Opts.            (line  22)
 * -version:                              v.                   (line   6)
@@ -25255,8 +25243,8 @@
 * float directive, XGATE:                XGATE-Float.         (line  10)
 * floating point numbers:                Flonums.             (line   6)
 * floating point numbers (double):       Double.              (line   6)
-* floating point numbers (single) <1>:   Single.              (line   6)
-* floating point numbers (single):       Float.               (line   6)
+* floating point numbers (single) <1>:   Float.               (line   6)
+* floating point numbers (single):       Single.              (line   6)
 * floating point, AArch64 (IEEE):        AArch64 Floating Point.
                                                               (line   6)
 * floating point, Alpha (IEEE):          Alpha Floating Point.
@@ -25480,7 +25468,7 @@
 * Interrupt Vector Base address, ARC:    ARC-Regs.            (line  67)
 * invalid input:                         Bug Criteria.        (line  14)
 * invocation summary:                    Overview.            (line   6)
-* IP2K architecture options:             IP2K-Opts.           (line   9)
+* IP2K architecture options:             IP2K-Opts.           (line  14)
 * IP2K line comment character:           IP2K-Chars.          (line   6)
 * IP2K line separator:                   IP2K-Chars.          (line  14)
 * IP2K options:                          IP2K-Opts.           (line   6)
@@ -25508,8 +25496,8 @@
 * label (:):                             Statements.          (line  31)
 * label directive, TIC54X:               TIC54X-Directives.   (line 123)
 * labels:                                Labels.              (line   6)
-* lcomm directive <1>:                   ARC Directives.      (line   9)
-* lcomm directive:                       Lcomm.               (line   6)
+* lcomm directive <1>:                   Lcomm.               (line   6)
+* lcomm directive:                       ARC Directives.      (line   9)
 * lcomm directive, COFF:                 i386-Directives.     (line   6)
 * lcommon directive:                     ARC Directives.      (line  24)
 * ld:                                    Object.              (line  15)
@@ -26239,11 +26227,11 @@
 * section directive, V850:               V850 Directives.     (line   9)
 * section name substitution:             Section.             (line  80)
 * section override prefixes, i386:       i386-Prefixes.       (line  23)
-* Section Stack <1>:                     PushSection.         (line   6)
-* Section Stack <2>:                     Section.             (line  71)
-* Section Stack <3>:                     Previous.            (line   6)
+* Section Stack <1>:                     PopSection.          (line   6)
+* Section Stack <2>:                     Previous.            (line   6)
+* Section Stack <3>:                     PushSection.         (line   6)
 * Section Stack <4>:                     SubSection.          (line   6)
-* Section Stack:                         PopSection.          (line   6)
+* Section Stack:                         Section.             (line  71)
 * section-relative addressing:           Secs Background.     (line  68)
 * sections:                              Sections.            (line   6)
 * sections in messages, internal:        As Sections.         (line   6)
@@ -26429,17 +26417,17 @@
 * symbol attributes, SOM:                SOM Symbols.         (line   6)
 * symbol descriptor, COFF:               Desc.                (line   6)
 * symbol modifiers <1>:                  M32C-Modifiers.      (line  11)
-* symbol modifiers <2>:                  M68HC11-Modifiers.   (line  12)
+* symbol modifiers <2>:                  LM32-Modifiers.      (line  12)
 * symbol modifiers <3>:                  AVR-Modifiers.       (line  12)
-* symbol modifiers:                      LM32-Modifiers.      (line  12)
+* symbol modifiers:                      M68HC11-Modifiers.   (line  12)
 * symbol modifiers, TILE-Gx:             TILE-Gx Modifiers.   (line   6)
 * symbol modifiers, TILEPro:             TILEPro Modifiers.   (line   6)
 * symbol names:                          Symbol Names.        (line   6)
-* symbol names, $ in <1>:                D30V-Chars.          (line  70)
-* symbol names, $ in <2>:                SH64-Chars.          (line  15)
-* symbol names, $ in <3>:                Meta-Chars.          (line  10)
-* symbol names, $ in <4>:                D10V-Chars.          (line  53)
-* symbol names, $ in:                    SH-Chars.            (line  15)
+* symbol names, $ in <1>:                Meta-Chars.          (line  10)
+* symbol names, $ in <2>:                D30V-Chars.          (line  70)
+* symbol names, $ in <3>:                D10V-Chars.          (line  53)
+* symbol names, $ in <4>:                SH-Chars.            (line  15)
+* symbol names, $ in:                    SH64-Chars.          (line  15)
 * symbol names, local:                   Symbol Names.        (line  30)
 * symbol names, temporary:               Symbol Names.        (line  43)
 * symbol prefix character, ARC:          ARC-Chars.           (line  20)
@@ -26470,8 +26458,8 @@
 * syntax, D30V:                          D30V-Syntax.         (line   6)
 * syntax, LM32:                          LM32-Modifiers.      (line   6)
 * syntax, M680x0:                        M68K-Syntax.         (line   8)
-* syntax, M68HC11 <1>:                   M68HC11-Syntax.      (line   6)
-* syntax, M68HC11:                       M68HC11-Modifiers.   (line   6)
+* syntax, M68HC11 <1>:                   M68HC11-Modifiers.   (line   6)
+* syntax, M68HC11:                       M68HC11-Syntax.      (line   6)
 * syntax, machine-independent:           Syntax.              (line   6)
 * syntax, RL78:                          RL78-Modifiers.      (line   6)
 * syntax, RX:                            RX-Modifiers.        (line   6)
@@ -26484,7 +26472,7 @@
 * tab (\t):                              Strings.             (line  27)
 * tab directive, TIC54X:                 TIC54X-Directives.   (line 247)
 * tag directive:                         Tag.                 (line   6)
-* tag directive, TIC54X:                 TIC54X-Directives.   (line 216)
+* tag directive, TIC54X:                 TIC54X-Directives.   (line 250)
 * TBM, i386:                             i386-TBM.            (line   6)
 * TBM, x86-64:                           i386-TBM.            (line   6)
 * tdaoff pseudo-op, V850:                V850 Opcodes.        (line  81)
@@ -26588,9 +26576,9 @@
 * versions of symbols:                   Symver.              (line   6)
 * Virtualization instruction generation override: MIPS ASE Instruction Generation Overrides.
                                                               (line  47)
-* visibility <1>:                        Protected.           (line   6)
-* visibility <2>:                        Hidden.              (line   6)
-* visibility:                            Internal.            (line   6)
+* visibility <1>:                        Internal.            (line   6)
+* visibility <2>:                        Protected.           (line   6)
+* visibility:                            Hidden.              (line   6)
 * Visium line comment character:         Visium Characters.   (line   6)
 * Visium line separator:                 Visium Characters.   (line  14)
 * Visium options:                        Visium Options.      (line   6)
@@ -27003,348 +26991,348 @@
 Node: ESA/390 Opcodes376912
 Node: i386-Dependent377174
 Node: i386-Options378504
-Node: i386-Directives386310
-Node: i386-Syntax387048
-Node: i386-Variations387353
-Node: i386-Chars389894
-Node: i386-Mnemonics390623
-Node: i386-Regs393987
-Node: i386-Prefixes396032
-Node: i386-Memory398792
-Node: i386-Jumps401729
-Node: i386-Float402850
-Node: i386-SIMD404679
-Node: i386-LWP405788
-Node: i386-BMI406622
-Node: i386-TBM407000
-Node: i386-16bit407530
-Node: i386-Arch409601
-Node: i386-Bugs412719
-Node: i386-Notes413473
-Node: i860-Dependent414331
-Node: Notes-i860414771
-Node: Options-i860415676
-Node: Directives-i860417039
-Node: Opcodes for i860418108
-Node: Syntax of i860420298
-Node: i860-Chars420482
-Node: i960-Dependent421041
-Node: Options-i960421488
-Node: Floating Point-i960425373
-Node: Directives-i960425641
-Node: Opcodes for i960427675
-Node: callj-i960428315
-Node: Compare-and-branch-i960428804
-Node: Syntax of i960430708
-Node: i960-Chars430908
-Node: IA-64-Dependent431451
-Node: IA-64 Options431752
-Node: IA-64 Syntax434903
-Node: IA-64-Chars435309
-Node: IA-64-Regs435539
-Node: IA-64-Bits436465
-Node: IA-64-Relocs436995
-Node: IA-64 Opcodes437467
-Node: IP2K-Dependent437739
-Node: IP2K-Opts438011
-Node: IP2K-Syntax438511
-Node: IP2K-Chars438685
-Node: LM32-Dependent439228
-Node: LM32 Options439523
-Node: LM32 Syntax440157
-Node: LM32-Regs440453
-Node: LM32-Modifiers441412
-Node: LM32-Chars442787
-Node: LM32 Opcodes443295
-Node: M32C-Dependent443599
-Node: M32C-Opts444108
-Node: M32C-Syntax444528
-Node: M32C-Modifiers444763
-Node: M32C-Chars446552
-Node: M32R-Dependent447118
-Node: M32R-Opts447439
-Node: M32R-Directives451602
-Node: M32R-Warnings455577
-Node: M68K-Dependent458583
-Node: M68K-Opts459050
-Node: M68K-Syntax466423
-Node: M68K-Moto-Syntax468263
-Node: M68K-Float470853
-Node: M68K-Directives471373
-Node: M68K-opcodes472701
-Node: M68K-Branch472927
-Node: M68K-Chars477125
-Node: M68HC11-Dependent477988
-Node: M68HC11-Opts478519
-Node: M68HC11-Syntax482824
-Node: M68HC11-Modifiers485615
-Node: M68HC11-Directives487443
-Node: M68HC11-Float488819
-Node: M68HC11-opcodes489347
-Node: M68HC11-Branch489529
-Node: Meta-Dependent491978
-Node: Meta Options492263
-Node: Meta Syntax492925
-Node: Meta-Chars493137
-Node: Meta-Regs493437
-Node: MicroBlaze-Dependent493713
-Node: MicroBlaze Directives494402
-Node: MicroBlaze Syntax495785
-Node: MicroBlaze-Chars496017
-Node: MIPS-Dependent496569
-Node: MIPS Options498006
-Node: MIPS Macros512712
-Ref: MIPS Macros-Footnote-1515426
-Node: MIPS Symbol Sizes515569
-Node: MIPS Small Data517241
-Node: MIPS ISA519404
-Node: MIPS assembly options521189
-Node: MIPS autoextend522322
-Node: MIPS insn523056
-Node: MIPS FP ABIs524336
-Node: MIPS FP ABI History524788
-Node: MIPS FP ABI Variants525548
-Node: MIPS FP ABI Selection528102
-Node: MIPS FP ABI Compatibility529166
-Node: MIPS NaN Encodings529976
-Node: MIPS Option Stack531939
-Node: MIPS ASE Instruction Generation Overrides532724
-Node: MIPS Floating-Point535438
-Node: MIPS Syntax536344
-Node: MIPS-Chars536606
-Node: MMIX-Dependent537148
-Node: MMIX-Opts537528
-Node: MMIX-Expand541132
-Node: MMIX-Syntax542447
-Ref: mmixsite542804
-Node: MMIX-Chars543645
-Node: MMIX-Symbols544519
-Node: MMIX-Regs546587
-Node: MMIX-Pseudos547612
-Ref: MMIX-loc547753
-Ref: MMIX-local548833
-Ref: MMIX-is549365
-Ref: MMIX-greg549636
-Ref: GREG-base550555
-Ref: MMIX-byte551872
-Ref: MMIX-constants552343
-Ref: MMIX-prefix552989
-Ref: MMIX-spec553363
-Node: MMIX-mmixal553697
-Node: MSP430-Dependent557195
-Node: MSP430 Options557664
-Node: MSP430 Syntax560843
-Node: MSP430-Macros561159
-Node: MSP430-Chars561890
-Node: MSP430-Regs562605
-Node: MSP430-Ext563165
-Node: MSP430 Floating Point564986
-Node: MSP430 Directives565210
-Node: MSP430 Opcodes566531
-Node: MSP430 Profiling Capability566926
-Node: NDS32-Dependent569255
-Node: NDS32 Options569867
-Node: NDS32 Syntax571768
-Node: NDS32-Chars572036
-Node: NDS32-Regs572503
-Node: NDS32-Ops573357
-Node: NiosII-Dependent576952
-Node: Nios II Options577371
-Node: Nios II Syntax578609
-Node: Nios II Chars578815
-Node: Nios II Relocations579006
-Node: Nios II Directives580578
-Node: Nios II Opcodes582141
-Node: NS32K-Dependent582416
-Node: NS32K Syntax582643
-Node: NS32K-Chars582792
-Node: PDP-11-Dependent583532
-Node: PDP-11-Options583922
-Node: PDP-11-Pseudos588993
-Node: PDP-11-Syntax589338
-Node: PDP-11-Mnemonics590170
-Node: PDP-11-Synthetic590472
-Node: PJ-Dependent590690
-Node: PJ Options590953
-Node: PJ Syntax591248
-Node: PJ-Chars591413
-Node: PPC-Dependent591962
-Node: PowerPC-Opts592295
-Node: PowerPC-Pseudo595922
-Node: PowerPC-Syntax596544
-Node: PowerPC-Chars596734
-Node: RL78-Dependent597485
-Node: RL78-Opts597883
-Node: RL78-Modifiers598650
-Node: RL78-Directives599426
-Node: RL78-Syntax600031
-Node: RL78-Chars600227
-Node: RX-Dependent600783
-Node: RX-Opts601214
-Node: RX-Modifiers605439
-Node: RX-Directives606543
-Node: RX-Float607283
-Node: RX-Syntax607924
-Node: RX-Chars608103
-Node: S/390-Dependent608655
-Node: s390 Options609376
-Node: s390 Characters610944
-Node: s390 Syntax611465
-Node: s390 Register612366
-Node: s390 Mnemonics613179
-Node: s390 Operands616199
-Node: s390 Formats618818
-Node: s390 Aliases626689
-Node: s390 Operand Modifier630586
-Node: s390 Instruction Marker634387
-Node: s390 Literal Pool Entries635403
-Node: s390 Directives637326
-Node: s390 Floating Point642769
-Node: SCORE-Dependent643215
-Node: SCORE-Opts643517
-Node: SCORE-Pseudo644805
-Node: SCORE-Syntax646882
-Node: SCORE-Chars647064
-Node: SH-Dependent647622
-Node: SH Options648033
-Node: SH Syntax649088
-Node: SH-Chars649361
-Node: SH-Regs649904
-Node: SH-Addressing650518
-Node: SH Floating Point651427
-Node: SH Directives652521
-Node: SH Opcodes652922
-Node: SH64-Dependent657244
-Node: SH64 Options657606
-Node: SH64 Syntax659403
-Node: SH64-Chars659686
-Node: SH64-Regs660235
-Node: SH64-Addressing661331
-Node: SH64 Directives662514
-Node: SH64 Opcodes663499
-Node: Sparc-Dependent664215
-Node: Sparc-Opts664626
-Node: Sparc-Aligned-Data669640
-Node: Sparc-Syntax670472
-Node: Sparc-Chars671046
-Node: Sparc-Regs671609
-Node: Sparc-Constants677093
-Node: Sparc-Relocs681853
-Node: Sparc-Size-Translations686989
-Node: Sparc-Float688638
-Node: Sparc-Directives688833
-Node: TIC54X-Dependent690793
-Node: TIC54X-Opts691556
-Node: TIC54X-Block692599
-Node: TIC54X-Env692959
-Node: TIC54X-Constants693307
-Node: TIC54X-Subsyms693709
-Node: TIC54X-Locals695618
-Node: TIC54X-Builtins696362
-Node: TIC54X-Ext698833
-Node: TIC54X-Directives699404
-Node: TIC54X-Macros710305
-Node: TIC54X-MMRegs712416
-Node: TIC54X-Syntax712654
-Node: TIC54X-Chars712844
-Node: TIC6X-Dependent713535
-Node: TIC6X Options713838
-Node: TIC6X Syntax715839
-Node: TIC6X Directives716941
-Node: TILE-Gx-Dependent719226
-Node: TILE-Gx Options719536
-Node: TILE-Gx Syntax719886
-Node: TILE-Gx Opcodes722120
-Node: TILE-Gx Registers722408
-Node: TILE-Gx Modifiers723180
-Node: TILE-Gx Directives728152
-Node: TILEPro-Dependent729056
-Node: TILEPro Options729365
-Node: TILEPro Syntax729549
-Node: TILEPro Opcodes731783
-Node: TILEPro Registers732074
-Node: TILEPro Modifiers732844
-Node: TILEPro Directives737609
-Node: V850-Dependent738513
-Node: V850 Options738909
-Node: V850 Syntax743189
-Node: V850-Chars743429
-Node: V850-Regs743973
-Node: V850 Floating Point745541
-Node: V850 Directives745747
-Node: V850 Opcodes747814
-Node: Vax-Dependent753706
-Node: VAX-Opts754290
-Node: VAX-float758025
-Node: VAX-directives758657
-Node: VAX-opcodes759518
-Node: VAX-branch759907
-Node: VAX-operands762414
-Node: VAX-no763177
-Node: VAX-Syntax763433
-Node: VAX-Chars763599
-Node: Visium-Dependent764153
-Node: Visium Options764460
-Node: Visium Syntax764926
-Node: Visium Characters765171
-Node: Visium Registers765752
-Node: Visium Opcodes766024
-Node: XGATE-Dependent766450
-Node: XGATE-Opts766872
-Node: XGATE-Syntax767863
-Node: XGATE-Directives769942
-Node: XGATE-Float770181
-Node: XGATE-opcodes770678
-Node: XSTORMY16-Dependent770790
-Node: XStormy16 Syntax771136
-Node: XStormy16-Chars771326
-Node: XStormy16 Directives771939
-Node: XStormy16 Opcodes772594
-Node: Xtensa-Dependent773650
-Node: Xtensa Options774384
-Node: Xtensa Syntax778655
-Node: Xtensa Opcodes780799
-Node: Xtensa Registers782593
-Node: Xtensa Optimizations783226
-Node: Density Instructions783678
-Node: Xtensa Automatic Alignment784780
-Node: Xtensa Relaxation787227
-Node: Xtensa Branch Relaxation788192
-Node: Xtensa Call Relaxation789564
-Node: Xtensa Jump Relaxation791345
-Node: Xtensa Immediate Relaxation793445
-Node: Xtensa Directives796019
-Node: Schedule Directive797728
-Node: Longcalls Directive798068
-Node: Transform Directive798612
-Node: Literal Directive799354
-Ref: Literal Directive-Footnote-1802893
-Node: Literal Position Directive803035
-Node: Literal Prefix Directive804734
-Node: Absolute Literals Directive805632
-Node: Z80-Dependent806939
-Node: Z80 Options807327
-Node: Z80 Syntax808750
-Node: Z80-Chars809422
-Node: Z80-Regs810272
-Node: Z80-Case810624
-Node: Z80 Floating Point811069
-Node: Z80 Directives811263
-Node: Z80 Opcodes812888
-Node: Z8000-Dependent814232
-Node: Z8000 Options815171
-Node: Z8000 Syntax815388
-Node: Z8000-Chars815678
-Node: Z8000-Regs816160
-Node: Z8000-Addressing816950
-Node: Z8000 Directives818067
-Node: Z8000 Opcodes819676
-Node: Reporting Bugs829618
-Node: Bug Criteria830344
-Node: Bug Reporting831111
-Node: Acknowledgements837760
-Ref: Acknowledgements-Footnote-1842725
-Node: GNU Free Documentation License842751
-Node: AS Index867920
+Node: i386-Directives385840
+Node: i386-Syntax386578
+Node: i386-Variations386883
+Node: i386-Chars389424
+Node: i386-Mnemonics390153
+Node: i386-Regs393517
+Node: i386-Prefixes395562
+Node: i386-Memory398322
+Node: i386-Jumps401259
+Node: i386-Float402380
+Node: i386-SIMD404209
+Node: i386-LWP405318
+Node: i386-BMI406152
+Node: i386-TBM406530
+Node: i386-16bit407060
+Node: i386-Arch409131
+Node: i386-Bugs412249
+Node: i386-Notes413003
+Node: i860-Dependent413861
+Node: Notes-i860414301
+Node: Options-i860415206
+Node: Directives-i860416569
+Node: Opcodes for i860417638
+Node: Syntax of i860419828
+Node: i860-Chars420012
+Node: i960-Dependent420571
+Node: Options-i960421018
+Node: Floating Point-i960424903
+Node: Directives-i960425171
+Node: Opcodes for i960427205
+Node: callj-i960427845
+Node: Compare-and-branch-i960428334
+Node: Syntax of i960430238
+Node: i960-Chars430438
+Node: IA-64-Dependent430981
+Node: IA-64 Options431282
+Node: IA-64 Syntax434433
+Node: IA-64-Chars434839
+Node: IA-64-Regs435069
+Node: IA-64-Bits435995
+Node: IA-64-Relocs436525
+Node: IA-64 Opcodes436997
+Node: IP2K-Dependent437269
+Node: IP2K-Opts437541
+Node: IP2K-Syntax438041
+Node: IP2K-Chars438215
+Node: LM32-Dependent438758
+Node: LM32 Options439053
+Node: LM32 Syntax439687
+Node: LM32-Regs439983
+Node: LM32-Modifiers440942
+Node: LM32-Chars442317
+Node: LM32 Opcodes442825
+Node: M32C-Dependent443129
+Node: M32C-Opts443638
+Node: M32C-Syntax444058
+Node: M32C-Modifiers444293
+Node: M32C-Chars446082
+Node: M32R-Dependent446648
+Node: M32R-Opts446969
+Node: M32R-Directives451132
+Node: M32R-Warnings455107
+Node: M68K-Dependent458113
+Node: M68K-Opts458580
+Node: M68K-Syntax465953
+Node: M68K-Moto-Syntax467793
+Node: M68K-Float470383
+Node: M68K-Directives470903
+Node: M68K-opcodes472231
+Node: M68K-Branch472457
+Node: M68K-Chars476655
+Node: M68HC11-Dependent477518
+Node: M68HC11-Opts478049
+Node: M68HC11-Syntax482354
+Node: M68HC11-Modifiers485145
+Node: M68HC11-Directives486973
+Node: M68HC11-Float488349
+Node: M68HC11-opcodes488877
+Node: M68HC11-Branch489059
+Node: Meta-Dependent491508
+Node: Meta Options491793
+Node: Meta Syntax492455
+Node: Meta-Chars492667
+Node: Meta-Regs492967
+Node: MicroBlaze-Dependent493243
+Node: MicroBlaze Directives493932
+Node: MicroBlaze Syntax495315
+Node: MicroBlaze-Chars495547
+Node: MIPS-Dependent496099
+Node: MIPS Options497536
+Node: MIPS Macros512242
+Ref: MIPS Macros-Footnote-1514956
+Node: MIPS Symbol Sizes515099
+Node: MIPS Small Data516771
+Node: MIPS ISA518934
+Node: MIPS assembly options520719
+Node: MIPS autoextend521852
+Node: MIPS insn522586
+Node: MIPS FP ABIs523866
+Node: MIPS FP ABI History524318
+Node: MIPS FP ABI Variants525078
+Node: MIPS FP ABI Selection527632
+Node: MIPS FP ABI Compatibility528696
+Node: MIPS NaN Encodings529506
+Node: MIPS Option Stack531469
+Node: MIPS ASE Instruction Generation Overrides532254
+Node: MIPS Floating-Point534968
+Node: MIPS Syntax535874
+Node: MIPS-Chars536136
+Node: MMIX-Dependent536678
+Node: MMIX-Opts537058
+Node: MMIX-Expand540662
+Node: MMIX-Syntax541977
+Ref: mmixsite542334
+Node: MMIX-Chars543175
+Node: MMIX-Symbols544049
+Node: MMIX-Regs546117
+Node: MMIX-Pseudos547142
+Ref: MMIX-loc547283
+Ref: MMIX-local548363
+Ref: MMIX-is548895
+Ref: MMIX-greg549166
+Ref: GREG-base550085
+Ref: MMIX-byte551402
+Ref: MMIX-constants551873
+Ref: MMIX-prefix552519
+Ref: MMIX-spec552893
+Node: MMIX-mmixal553227
+Node: MSP430-Dependent556725
+Node: MSP430 Options557194
+Node: MSP430 Syntax560373
+Node: MSP430-Macros560689
+Node: MSP430-Chars561420
+Node: MSP430-Regs562135
+Node: MSP430-Ext562695
+Node: MSP430 Floating Point564516
+Node: MSP430 Directives564740
+Node: MSP430 Opcodes566061
+Node: MSP430 Profiling Capability566456
+Node: NDS32-Dependent568785
+Node: NDS32 Options569397
+Node: NDS32 Syntax571298
+Node: NDS32-Chars571566
+Node: NDS32-Regs572033
+Node: NDS32-Ops572887
+Node: NiosII-Dependent576482
+Node: Nios II Options576901
+Node: Nios II Syntax578139
+Node: Nios II Chars578345
+Node: Nios II Relocations578536
+Node: Nios II Directives580108
+Node: Nios II Opcodes581671
+Node: NS32K-Dependent581946
+Node: NS32K Syntax582173
+Node: NS32K-Chars582322
+Node: PDP-11-Dependent583062
+Node: PDP-11-Options583452
+Node: PDP-11-Pseudos588523
+Node: PDP-11-Syntax588868
+Node: PDP-11-Mnemonics589700
+Node: PDP-11-Synthetic590002
+Node: PJ-Dependent590220
+Node: PJ Options590483
+Node: PJ Syntax590778
+Node: PJ-Chars590943
+Node: PPC-Dependent591492
+Node: PowerPC-Opts591825
+Node: PowerPC-Pseudo595452
+Node: PowerPC-Syntax596074
+Node: PowerPC-Chars596264
+Node: RL78-Dependent597015
+Node: RL78-Opts597413
+Node: RL78-Modifiers598180
+Node: RL78-Directives598956
+Node: RL78-Syntax599561
+Node: RL78-Chars599757
+Node: RX-Dependent600313
+Node: RX-Opts600744
+Node: RX-Modifiers604969
+Node: RX-Directives606073
+Node: RX-Float606813
+Node: RX-Syntax607454
+Node: RX-Chars607633
+Node: S/390-Dependent608185
+Node: s390 Options608906
+Node: s390 Characters610474
+Node: s390 Syntax610995
+Node: s390 Register611896
+Node: s390 Mnemonics612709
+Node: s390 Operands615729
+Node: s390 Formats618348
+Node: s390 Aliases626219
+Node: s390 Operand Modifier630116
+Node: s390 Instruction Marker633917
+Node: s390 Literal Pool Entries634933
+Node: s390 Directives636856
+Node: s390 Floating Point642299
+Node: SCORE-Dependent642745
+Node: SCORE-Opts643047
+Node: SCORE-Pseudo644335
+Node: SCORE-Syntax646412
+Node: SCORE-Chars646594
+Node: SH-Dependent647152
+Node: SH Options647563
+Node: SH Syntax648618
+Node: SH-Chars648891
+Node: SH-Regs649434
+Node: SH-Addressing650048
+Node: SH Floating Point650957
+Node: SH Directives652051
+Node: SH Opcodes652452
+Node: SH64-Dependent656774
+Node: SH64 Options657136
+Node: SH64 Syntax658933
+Node: SH64-Chars659216
+Node: SH64-Regs659765
+Node: SH64-Addressing660861
+Node: SH64 Directives662044
+Node: SH64 Opcodes663029
+Node: Sparc-Dependent663745
+Node: Sparc-Opts664156
+Node: Sparc-Aligned-Data669170
+Node: Sparc-Syntax670002
+Node: Sparc-Chars670576
+Node: Sparc-Regs671139
+Node: Sparc-Constants676623
+Node: Sparc-Relocs681383
+Node: Sparc-Size-Translations686519
+Node: Sparc-Float688168
+Node: Sparc-Directives688363
+Node: TIC54X-Dependent690323
+Node: TIC54X-Opts691086
+Node: TIC54X-Block692129
+Node: TIC54X-Env692489
+Node: TIC54X-Constants692837
+Node: TIC54X-Subsyms693239
+Node: TIC54X-Locals695148
+Node: TIC54X-Builtins695892
+Node: TIC54X-Ext698363
+Node: TIC54X-Directives698934
+Node: TIC54X-Macros709835
+Node: TIC54X-MMRegs711946
+Node: TIC54X-Syntax712184
+Node: TIC54X-Chars712374
+Node: TIC6X-Dependent713065
+Node: TIC6X Options713368
+Node: TIC6X Syntax715369
+Node: TIC6X Directives716471
+Node: TILE-Gx-Dependent718756
+Node: TILE-Gx Options719066
+Node: TILE-Gx Syntax719416
+Node: TILE-Gx Opcodes721650
+Node: TILE-Gx Registers721938
+Node: TILE-Gx Modifiers722710
+Node: TILE-Gx Directives727682
+Node: TILEPro-Dependent728586
+Node: TILEPro Options728895
+Node: TILEPro Syntax729079
+Node: TILEPro Opcodes731313
+Node: TILEPro Registers731604
+Node: TILEPro Modifiers732374
+Node: TILEPro Directives737139
+Node: V850-Dependent738043
+Node: V850 Options738439
+Node: V850 Syntax742719
+Node: V850-Chars742959
+Node: V850-Regs743503
+Node: V850 Floating Point745071
+Node: V850 Directives745277
+Node: V850 Opcodes747344
+Node: Vax-Dependent753236
+Node: VAX-Opts753820
+Node: VAX-float757555
+Node: VAX-directives758187
+Node: VAX-opcodes759048
+Node: VAX-branch759437
+Node: VAX-operands761944
+Node: VAX-no762707
+Node: VAX-Syntax762963
+Node: VAX-Chars763129
+Node: Visium-Dependent763683
+Node: Visium Options763990
+Node: Visium Syntax764456
+Node: Visium Characters764701
+Node: Visium Registers765282
+Node: Visium Opcodes765554
+Node: XGATE-Dependent765980
+Node: XGATE-Opts766402
+Node: XGATE-Syntax767393
+Node: XGATE-Directives769472
+Node: XGATE-Float769711
+Node: XGATE-opcodes770208
+Node: XSTORMY16-Dependent770320
+Node: XStormy16 Syntax770666
+Node: XStormy16-Chars770856
+Node: XStormy16 Directives771469
+Node: XStormy16 Opcodes772124
+Node: Xtensa-Dependent773180
+Node: Xtensa Options773914
+Node: Xtensa Syntax778185
+Node: Xtensa Opcodes780329
+Node: Xtensa Registers782123
+Node: Xtensa Optimizations782756
+Node: Density Instructions783208
+Node: Xtensa Automatic Alignment784310
+Node: Xtensa Relaxation786757
+Node: Xtensa Branch Relaxation787722
+Node: Xtensa Call Relaxation789094
+Node: Xtensa Jump Relaxation790875
+Node: Xtensa Immediate Relaxation792975
+Node: Xtensa Directives795549
+Node: Schedule Directive797258
+Node: Longcalls Directive797598
+Node: Transform Directive798142
+Node: Literal Directive798884
+Ref: Literal Directive-Footnote-1802423
+Node: Literal Position Directive802565
+Node: Literal Prefix Directive804264
+Node: Absolute Literals Directive805162
+Node: Z80-Dependent806469
+Node: Z80 Options806857
+Node: Z80 Syntax808280
+Node: Z80-Chars808952
+Node: Z80-Regs809802
+Node: Z80-Case810154
+Node: Z80 Floating Point810599
+Node: Z80 Directives810793
+Node: Z80 Opcodes812418
+Node: Z8000-Dependent813762
+Node: Z8000 Options814701
+Node: Z8000 Syntax814918
+Node: Z8000-Chars815208
+Node: Z8000-Regs815690
+Node: Z8000-Addressing816480
+Node: Z8000 Directives817597
+Node: Z8000 Opcodes819206
+Node: Reporting Bugs829148
+Node: Bug Criteria829874
+Node: Bug Reporting830641
+Node: Acknowledgements837290
+Ref: Acknowledgements-Footnote-1842255
+Node: GNU Free Documentation License842281
+Node: AS Index867450
 
 End Tag Table
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/doc/c-avr.texi binutils-2.26-avr/gas/doc/c-avr.texi
--- binutils-2.26.1-src/gas/doc/c-avr.texi	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/doc/c-avr.texi	2016-11-16 03:51:00.000000000 -0800
@@ -45,7 +45,7 @@
 attiny2313a, attiny24, attiny24a, attiny4313, attiny44, attiny44a, attiny84,
 attiny84a, attiny25, attiny45, attiny85, attiny261, attiny261a, attiny461,
 attiny461a, attiny861, attiny861a, attiny87, attiny43u, attiny48, attiny88,
-attiny828, at86rf401, ata6289, ata5272).
+attiny828, at86rf401, ata5272).
 
 Instruction set avr3 is for the classic AVR core with up to 128K program
 memory space (MCU types: at43usb355, at76c711).
@@ -58,10 +58,10 @@
 atmega8u2, atmega16u2, atmega32u2, ata5505).
 
 Instruction set avr4 is for the enhanced AVR core with up to 8K program
-memory space (MCU types: atmega48, atmega48a, atmega48pa, atmega48p, atmega8,
-atmega8a, atmega88, atmega88a, atmega88p, atmega88pa, atmega8515, atmega8535,
-atmega8hva, at90pwm1, at90pwm2, at90pwm2b, at90pwm3, at90pwm3b, at90pwm81,
-ata6285, ata6286).
+memory space (MCU types: atmega48, atmega48a, atmega48pa, atmega48p, atmega8, 
+atmega8a, atmega88, atmega88a, atmega88p, atmega88pa, atmega8515, atmega8535, 
+atmega8hva, at90pwm1, at90pwm2, at90pwm2b, at90pwm3, at90pwm3b, at90pwm81, 
+ata6285, ata6286, ata6289).
 
 Instruction set avr5 is for the enhanced AVR core with up to 128K program
 memory space (MCU types: at90pwm161, atmega16, atmega16a, atmega161, atmega162,
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/doc/c-i386.texi binutils-2.26-avr/gas/doc/c-i386.texi
--- binutils-2.26.1-src/gas/doc/c-i386.texi	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/doc/c-i386.texi	2016-11-16 03:51:00.000000000 -0800
@@ -327,18 +327,6 @@
 @option{-momit-lock-prefix=@var{no}} will encode lock prefix as usual,
 which is the default.
 
-@cindex @samp{-mrelax-relocations=} option, i386
-@cindex @samp{-mrelax-relocations=} option, x86-64
-@item -mrelax-relocations=@var{no}
-@itemx -mrelax-relocations=@var{yes}
-These options control whether the assembler should generate relax
-relocations, R_386_GOT32X, in 32-bit mode, or R_X86_64_GOTPCRELX and
-R_X86_64_REX_GOTPCRELX, in 64-bit mode.
-@option{-mrelax-relocations=@var{yes}} will generate relax relocations.
-@option{-mrelax-relocations=@var{no}} will not generate relax
-relocations.  The default can be controlled by a configure option
-@option{--enable-x86-relax-relocations}.
-
 @cindex @samp{-mevexrcig=} option, i386
 @cindex @samp{-mevexrcig=} option, x86-64
 @item -mevexrcig=@var{rne}
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/dwarf2dbg.c binutils-2.26-avr/gas/dwarf2dbg.c
--- binutils-2.26.1-src/gas/dwarf2dbg.c	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/dwarf2dbg.c	2016-11-16 03:51:00.000000000 -0800
@@ -125,8 +125,11 @@
    Note: If you want to change this, you'll have to update the
    "standard_opcode_lengths" table that is emitted below in
    out_debug_line().  */
+#ifndef TC_AVR
 #define DWARF2_LINE_OPCODE_BASE		13
-
+#else
+#define DWARF2_LINE_OPCODE_BASE		10
+#endif
 #ifndef DWARF2_LINE_BASE
   /* Minimum line offset in a special line info. opcode.  This value
      was chosen to give a reasonable range of values.  */
@@ -1555,9 +1558,11 @@
   out_byte (0);			/* DW_LNS_set_basic_block */
   out_byte (0);			/* DW_LNS_const_add_pc */
   out_byte (1);			/* DW_LNS_fixed_advance_pc */
+#ifndef TC_AVR
   out_byte (0);			/* DW_LNS_set_prologue_end */
   out_byte (0);			/* DW_LNS_set_epilogue_begin */
   out_byte (1);			/* DW_LNS_set_isa */
+#endif
 
   out_file_list ();
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/NEWS binutils-2.26-avr/gas/NEWS
--- binutils-2.26.1-src/gas/NEWS	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/NEWS	2016-11-16 03:51:00.000000000 -0800
@@ -1,12 +1,5 @@
 -*- text -*-
 
-* Add a configure option --enable-x86-relax-relocations to decide whether
-  x86 assembler should generate relax relocations by default.  Default to
-  yes, except for x86 Solaris targets older than Solaris 12.
-
-* New command line option -mrelax-relocations= for x86 target to control
-  whether to generate relax relocations.
-
 Changes in 2.26:
 
 * Add a configure option --enable-compressed-debug-sections={all,gas} to
@@ -15,6 +8,8 @@
 * Add support for the ARC EM/HS, and ARC600/700 architectures.  Remove
   assembler support for Argonaut RISC architectures.
 
+Changes in 2.26:
+
 * Symbol and label names can now be enclosed in double quotes (") which allows
   them to contain characters that are not part of valid symbol names in high
   level languages.
Only in binutils-2.26-avr/gas/po: .cvsignore
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/ChangeLog binutils-2.26-avr/gas/testsuite/ChangeLog
--- binutils-2.26.1-src/gas/testsuite/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -1,3 +1,14 @@
+2015-11-17  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
+
+	* gas/avr/bit-insns-1.s: New test input.
+	* gas/avr/bit-insns-2.s: Same.
+	* gas/avr/reloc-port5-1.d: New test for bit addressable register
+	relocation (BFD_RELOC_AVR_PORT5).
+	* gas/avr/reloc-port5-2.d: Likewise.
+	* gas/avr/reloc-port5-3.d: Likewise.
+	* gas/avr/reloc-port5-1.l: Diagnostic messages for the test.
+	* gas/avr/reloc-port5-2.l: Likewise.
+
 2016-01-11  Peter Bergner <bergner@vnet.ibm.com>
 
 	Apply from master.
@@ -15,13 +26,6 @@
 	* gas/arm/armv8-a.d: <ldaexh>: Rename mismatched mnemonics ...
 	<ldah>: ... to this.
 
-2015-12-17  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>
-
-	* gas/arm/armv8a-automatic-hlt.d: New test.
-	* gas/arm/armv8a-automatic-hlt.s: New test.
-	* gas/arm/armv8a-automatic-lda.d: New test.
-	* gas/arm/armv8a-automatic-lda.s: New test.
-
 2015-12-15  Matthew Wahab  <matthew.wahab@arm.com>
 
 	* gas/aarch64/advsimd-fp16.d: Update expected output.
@@ -160,7 +164,7 @@
 	Apply from master.
 	2015-11-19  Alan Modra  <amodra@gmail.com>
 	* gas/ppc/altivec3.d: Allow for padding at end of section.
-	* gas/ppc/power9.d: Likewise.
+	* gas/testsuite/gas/ppc/power9.d: Likewise.
 
 2015-12-09  H.J. Lu  <hongjiu.lu@intel.com>
 
@@ -214,8 +218,8 @@
 
 2015-10-28  Andre Vieira  <andre.simoesdiasvieira@arm.com>
 
-	* gas/arm/pinsn.s: New.
-	* gas/arm/pinsn.d: Likewise.
+        * gas/arm/pinsn.s: New.
+        * gas/arm/pinsn.d: Likewise.
 
 2015-10-27  Nick Clifton  <nickc@redhat.com>
 
@@ -392,8 +396,8 @@
 
 2015-10-02  Renlin Li <renlin.li@arm.com>
 
-	* gas/aarch64/reloc-tlsgd_g0_nc.d: New.
-	* gas/aarch64/reloc-tlsgd_g0_nc.s: New.
+    * gas/aarch64/reloc-tlsgd_g0_nc.d: New.
+    * gas/aarch64/reloc-tlsgd_g0_nc.s: New.
 
 2015-10-02  Renlin Li <renlin.li@arm.com>
 
@@ -965,7 +969,9 @@
 2015-05-28  Catherine Moore  <clm@codesourcery.com>
 	    Bernd Schmidt <bernds@codesourcery.com>
 
+	gas/testsuite/
 	* gas/mips/mips.exp: Run new tests.
+
 	* gas/mips/compact-eh-1.s: New file.
 	* gas/mips/compact-eh-2.s: New file.
 	* gas/mips/compact-eh-3.s: New file.
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/config/default.exp binutils-2.26-avr/gas/testsuite/config/default.exp
--- binutils-2.26.1-src/gas/testsuite/config/default.exp	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/testsuite/config/default.exp	2016-11-16 03:51:00.000000000 -0800
@@ -26,6 +26,13 @@
     set ASFLAGS ""
 }
 
+if { [istarget avr-*-*] } {
+    global board
+    if {[board_info $board exists hosting_emu]} {
+    	set ASFLAGS "-m [board_info $board hosting_emu]"
+    }
+}
+
 if ![info exists OBJDUMP] then {
     set OBJDUMP [findfile $base_dir/../../binutils/objdump \
 			  $base_dir/../../binutils/objdump \
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/avr/avr-prop-1.d binutils-2.26-avr/gas/testsuite/gas/avr/avr-prop-1.d
--- binutils-2.26.1-src/gas/testsuite/gas/avr/avr-prop-1.d	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/testsuite/gas/avr/avr-prop-1.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #name: AVR '.avr.prop' test 1
-#as: -mmcu=avrxmega2 -mlink-relax
+#as: -mlink-relax
 #objdump: -P avr-prop
 #source: avr-prop-1.s
 #target: avr-*-*
Only in binutils-2.26-avr/gas/testsuite/gas/avr: bit-insns-1.s
Only in binutils-2.26-avr/gas/testsuite/gas/avr: bit-insns-2.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/avr/diffreloc_withrelax.d binutils-2.26-avr/gas/testsuite/gas/avr/diffreloc_withrelax.d
--- binutils-2.26.1-src/gas/testsuite/gas/avr/diffreloc_withrelax.d	2014-10-14 00:32:03.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/avr/diffreloc_withrelax.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #name: AVR DIFF relocs with link relax
-#as: -mmcu=avrxmega2 -mlink-relax
+#as: -mlink-relax
 #source: relax.s
 #objdump: -r
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/avr/large-debug-line-table.d binutils-2.26-avr/gas/testsuite/gas/avr/large-debug-line-table.d
--- binutils-2.26.1-src/gas/testsuite/gas/avr/large-debug-line-table.d	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/testsuite/gas/avr/large-debug-line-table.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #name: AVR, large .debug_line table
-#as: -mlink-relax -mmcu=avrxmega2
+#as: -mlink-relax
 #objdump: --dwarf=decodedline
 #source: large-debug-line-table.s
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/avr/link-relax-elf-flag-clear.d binutils-2.26-avr/gas/testsuite/gas/avr/link-relax-elf-flag-clear.d
--- binutils-2.26.1-src/gas/testsuite/gas/avr/link-relax-elf-flag-clear.d	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/testsuite/gas/avr/link-relax-elf-flag-clear.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,10 +1,10 @@
 #name: AVR, check elf link-relax header flag is clear.
-#as: -mno-link-relax -mmcu=avrxmega2
+#as: -mno-link-relax
 #readelf: -h
 #source: link-relax-elf-flag.s
 #target: avr-*-*
 
 ELF Header:
 #...
-  Flags:                             0x66, avr:102
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9]+
+#...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/avr/link-relax-elf-flag-set.d binutils-2.26-avr/gas/testsuite/gas/avr/link-relax-elf-flag-set.d
--- binutils-2.26.1-src/gas/testsuite/gas/avr/link-relax-elf-flag-set.d	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/testsuite/gas/avr/link-relax-elf-flag-set.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,10 +1,10 @@
 #name: AVR, check elf link-relax header flag is set.
-#as: -mlink-relax -mmcu=avrxmega2
+#as: -mlink-relax
 #readelf: -h
 #source: link-relax-elf-flag.s
 #target: avr-*-*
 
 ELF Header:
 #...
-  Flags:                             0xe6, avr:102, link-relax
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9]+, link-relax
+#...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/avr/noreloc_withoutrelax.d binutils-2.26-avr/gas/testsuite/gas/avr/noreloc_withoutrelax.d
--- binutils-2.26.1-src/gas/testsuite/gas/avr/noreloc_withoutrelax.d	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/testsuite/gas/avr/noreloc_withoutrelax.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #name: AVR no DIFF relocs without link relax
-#as: -mmcu=avrxmega2 -mno-link-relax
+#as:  -mno-link-relax
 #objdump: -r
 #source: relax.s
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/avr/pc-relative-reloc.d binutils-2.26-avr/gas/testsuite/gas/avr/pc-relative-reloc.d
--- binutils-2.26.1-src/gas/testsuite/gas/avr/pc-relative-reloc.d	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/testsuite/gas/avr/pc-relative-reloc.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #name: 32 bit PC relative reloc
-#as: -mmcu=avr51 -gdwarf-sections -g
+#as: -gdwarf-sections -g
 #objdump: -r
 #source: per-function-debugline.s
 #target: avr-*-*
Only in binutils-2.26-avr/gas/testsuite/gas/avr: reloc-port5-1.d
Only in binutils-2.26-avr/gas/testsuite/gas/avr: reloc-port5-1.l
Only in binutils-2.26-avr/gas/testsuite/gas/avr: reloc-port5-2.d
Only in binutils-2.26-avr/gas/testsuite/gas/avr: reloc-port5-2.l
Only in binutils-2.26-avr/gas/testsuite/gas/avr: reloc-port5-3.d
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/avr/rmw.d binutils-2.26-avr/gas/testsuite/gas/avr/rmw.d
--- binutils-2.26.1-src/gas/testsuite/gas/avr/rmw.d	2014-10-14 00:32:03.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/avr/rmw.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #name: AVR RMW instructions
-#as: -mmcu=avrxmega2 -mrmw
+#as: -mrmw
 #objdump: -dr --show-raw-insn
 #target: avr-*-*
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/disp32.d binutils-2.26-avr/gas/testsuite/gas/i386/disp32.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/disp32.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/disp32.d	2016-11-16 03:51:00.000000000 -0800
@@ -15,12 +15,11 @@
 [ 	]*[a-f0-9]+:	8b 98 ff 0f 00 00    	mov    0xfff\(%eax\),%ebx
 [ 	]*[a-f0-9]+:	8b 98 00 00 00 00    	mov    0x0\(%eax\),%ebx
 [ 	]*[a-f0-9]+:	8b 98 03 00 00 00    	mov    0x3\(%eax\),%ebx
-[ 	]*[a-f0-9]+:	62 f1 fe 08 6f 98 c0 ff ff ff 	vmovdqu64 -0x40\(%eax\),%xmm3
-[ 	]*[a-f0-9]+:	eb 07                	jmp    30 <foo>
-[ 	]*[a-f0-9]+:	eb 05                	jmp    30 <foo>
-[ 	]*[a-f0-9]+:	e9 00 00 00 00       	jmp    30 <foo>
+[ 	]*[a-f0-9]+:	eb 07                	jmp    26 <foo>
+[ 	]*[a-f0-9]+:	eb 05                	jmp    26 <foo>
+[ 	]*[a-f0-9]+:	e9 00 00 00 00       	jmp    26 <foo>
 
-0+30 <foo>:
+0+26 <foo>:
 [ 	]*[a-f0-9]+:	89 18                	mov    %ebx,\(%eax\)
 [ 	]*[a-f0-9]+:	89 58 03             	mov    %ebx,0x3\(%eax\)
 [ 	]*[a-f0-9]+:	89 98 ff 0f 00 00    	mov    %ebx,0xfff\(%eax\)
@@ -28,5 +27,4 @@
 [ 	]*[a-f0-9]+:	89 58 03             	mov    %ebx,0x3\(%eax\)
 [ 	]*[a-f0-9]+:	89 98 00 00 00 00    	mov    %ebx,0x0\(%eax\)
 [ 	]*[a-f0-9]+:	89 98 03 00 00 00    	mov    %ebx,0x3\(%eax\)
-[ 	]*[a-f0-9]+:	62 f1 fe 08 6f 98 c0 ff ff ff 	vmovdqu64 -0x40\(%eax\),%xmm3
 #pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/disp32.s binutils-2.26-avr/gas/testsuite/gas/i386/disp32.s
--- binutils-2.26.1-src/gas/testsuite/gas/i386/disp32.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/disp32.s	2016-11-16 03:51:00.000000000 -0800
@@ -9,8 +9,6 @@
 	mov.d32 (%eax),%ebx
 	mov.d32 3(%eax),%ebx
 
-	vmovdqu64.d32 -0x40(%eax),%xmm3
-
 	jmp foo
 	jmp.d8 foo
 	jmp.d32 foo
@@ -26,5 +24,3 @@
 
 	mov.d32 DWORD PTR [eax], ebx
 	mov.d32 DWORD PTR [eax+3], ebx
-
-	vmovdqu64.d32 xmm3,XMMWORD PTR [eax-0x40]
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/got.d binutils-2.26-avr/gas/testsuite/gas/i386/got.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/got.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/got.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,3 @@
-#as: -mrelax-relocations=yes
 #objdump: -dwr
 
 .*: +file format .*
Only in binutils-2.26.1-src/gas/testsuite/gas/i386: got-no-relax.d
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/i386.exp binutils-2.26-avr/gas/testsuite/gas/i386/i386.exp
--- binutils-2.26.1-src/gas/testsuite/gas/i386/i386.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/i386.exp	2016-11-16 03:51:00.000000000 -0800
@@ -406,7 +406,6 @@
 	run_dump_test "relax-4"
 
 	run_dump_test "got"
-	run_dump_test "got-no-relax"
 
 	if {![istarget "*-*-nacl*"]} then {
 	    run_dump_test "iamcu-1"
@@ -785,7 +784,6 @@
 	run_list_test "x86-64-branch-3" "-al -mintel64"
 
 	run_dump_test "x86-64-gotpcrel"
-	run_dump_test "x86-64-gotpcrel-no-relax"
     }
 
     set ASFLAGS "$old_ASFLAGS"
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/ilp32/x86-64-gotpcrel.d binutils-2.26-avr/gas/testsuite/gas/i386/ilp32/x86-64-gotpcrel.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/ilp32/x86-64-gotpcrel.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/ilp32/x86-64-gotpcrel.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,4 @@
 #source: ../x86-64-gotpcrel.s
-#as: --x32 -mrelax-relocations=yes
 #objdump: -dwr
 #name: x86-64 (ILP32) gotpcrel
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/ilp32/x86-64-localpic.d binutils-2.26-avr/gas/testsuite/gas/i386/ilp32/x86-64-localpic.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/ilp32/x86-64-localpic.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/ilp32/x86-64-localpic.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,4 @@
 #source: ../x86-64-localpic.s
-#as: --x32 -mrelax-relocations=yes
 #readelf: -rsW
 #name: x86-64 (ILP32) local PIC
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/localpic.d binutils-2.26-avr/gas/testsuite/gas/i386/localpic.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/localpic.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/localpic.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,3 @@
-#as: -mrelax-relocations=yes
 #readelf: -rs
 #name: i386 local PIC
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/mixed-mode-reloc32.d binutils-2.26-avr/gas/testsuite/gas/i386/mixed-mode-reloc32.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/mixed-mode-reloc32.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/mixed-mode-reloc32.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,3 @@
-#as: -mrelax-relocations=yes
 #objdump: -r
 #source: mixed-mode-reloc.s
 #name: x86 mixed mode relocs (32-bit object)
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/reloc32.d binutils-2.26-avr/gas/testsuite/gas/i386/reloc32.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/reloc32.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/reloc32.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,3 @@
-#as: -mrelax-relocations=yes
 #objdump: -Drw
 #name: i386 relocs
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-avx512f.d binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-avx512f.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-avx512f.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-avx512f.d	2016-11-16 03:51:00.000000000 -0800
@@ -3665,7 +3665,6 @@
 [ 	]*[a-f0-9]+:	62 02 fd 41 93 b4 fe 7b 00 00 00 	vgatherqpd 0x7b\(%r14,%zmm31,8\),%zmm30\{%k1\}
 [ 	]*[a-f0-9]+:	62 02 fd 41 93 74 39 20 	vgatherqpd 0x100\(%r9,%zmm31,1\),%zmm30\{%k1\}
 [ 	]*[a-f0-9]+:	62 22 fd 41 93 b4 b9 00 04 00 00 	vgatherqpd 0x400\(%rcx,%zmm31,4\),%zmm30\{%k1\}
-[ 	]*[a-f0-9]+:	62 d2 fd 41 93 9c de 7b 00 00 00 	vgatherqpd 0x7b\(%r14,%zmm19,8\),%zmm3\{%k1\}
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 b4 fe 7b 00 00 00 	vgatherqps 0x7b\(%r14,%zmm31,8\),%ymm30\{%k1\}
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 b4 fe 7b 00 00 00 	vgatherqps 0x7b\(%r14,%zmm31,8\),%ymm30\{%k1\}
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 74 39 40 	vgatherqps 0x100\(%r9,%zmm31,1\),%ymm30\{%k1\}
@@ -10686,7 +10685,6 @@
 [ 	]*[a-f0-9]+:	62 02 fd 41 93 b4 fe 85 ff ff ff 	vgatherqpd -0x7b\(%r14,%zmm31,8\),%zmm30\{%k1\}
 [ 	]*[a-f0-9]+:	62 02 fd 41 93 74 39 20 	vgatherqpd 0x100\(%r9,%zmm31,1\),%zmm30\{%k1\}
 [ 	]*[a-f0-9]+:	62 22 fd 41 93 b4 b9 00 04 00 00 	vgatherqpd 0x400\(%rcx,%zmm31,4\),%zmm30\{%k1\}
-[ 	]*[a-f0-9]+:	62 d2 fd 41 93 9c de 7b 00 00 00 	vgatherqpd 0x7b\(%r14,%zmm19,8\),%zmm3\{%k1\}
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 b4 fe 85 ff ff ff 	vgatherqps -0x7b\(%r14,%zmm31,8\),%ymm30\{%k1\}
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 b4 fe 85 ff ff ff 	vgatherqps -0x7b\(%r14,%zmm31,8\),%ymm30\{%k1\}
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 74 39 40 	vgatherqps 0x100\(%r9,%zmm31,1\),%ymm30\{%k1\}
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-avx512f-intel.d binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-avx512f-intel.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-avx512f-intel.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-avx512f-intel.d	2016-11-16 03:51:00.000000000 -0800
@@ -3666,7 +3666,6 @@
 [ 	]*[a-f0-9]+:	62 02 fd 41 93 b4 fe 7b 00 00 00 	vgatherqpd zmm30\{k1\},ZMMWORD PTR \[r14\+zmm31\*8\+0x7b\]
 [ 	]*[a-f0-9]+:	62 02 fd 41 93 74 39 20 	vgatherqpd zmm30\{k1\},ZMMWORD PTR \[r9\+zmm31\*1\+0x100\]
 [ 	]*[a-f0-9]+:	62 22 fd 41 93 b4 b9 00 04 00 00 	vgatherqpd zmm30\{k1\},ZMMWORD PTR \[rcx\+zmm31\*4\+0x400\]
-[ 	]*[a-f0-9]+:	62 d2 fd 41 93 9c de 7b 00 00 00 	vgatherqpd zmm3\{k1\},ZMMWORD PTR \[r14\+zmm19\*8\+0x7b\]
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 b4 fe 7b 00 00 00 	vgatherqps ymm30\{k1\},YMMWORD PTR \[r14\+zmm31\*8\+0x7b\]
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 b4 fe 7b 00 00 00 	vgatherqps ymm30\{k1\},YMMWORD PTR \[r14\+zmm31\*8\+0x7b\]
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 74 39 40 	vgatherqps ymm30\{k1\},YMMWORD PTR \[r9\+zmm31\*1\+0x100\]
@@ -10687,7 +10686,6 @@
 [ 	]*[a-f0-9]+:	62 02 fd 41 93 b4 fe 85 ff ff ff 	vgatherqpd zmm30\{k1\},ZMMWORD PTR \[r14\+zmm31\*8-0x7b\]
 [ 	]*[a-f0-9]+:	62 02 fd 41 93 74 39 20 	vgatherqpd zmm30\{k1\},ZMMWORD PTR \[r9\+zmm31\*1\+0x100\]
 [ 	]*[a-f0-9]+:	62 22 fd 41 93 b4 b9 00 04 00 00 	vgatherqpd zmm30\{k1\},ZMMWORD PTR \[rcx\+zmm31\*4\+0x400\]
-[ 	]*[a-f0-9]+:	62 d2 fd 41 93 9c de 7b 00 00 00 	vgatherqpd zmm3\{k1\},ZMMWORD PTR \[r14\+zmm19\*8\+0x7b\]
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 b4 fe 85 ff ff ff 	vgatherqps ymm30\{k1\},YMMWORD PTR \[r14\+zmm31\*8-0x7b\]
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 b4 fe 85 ff ff ff 	vgatherqps ymm30\{k1\},YMMWORD PTR \[r14\+zmm31\*8-0x7b\]
 [ 	]*[a-f0-9]+:	62 02 7d 41 93 74 39 40 	vgatherqps ymm30\{k1\},YMMWORD PTR \[r9\+zmm31\*1\+0x100\]
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-avx512f.s binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-avx512f.s
--- binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-avx512f.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-avx512f.s	2016-11-16 03:51:00.000000000 -0800
@@ -3973,7 +3973,6 @@
 	vgatherqpd	123(%r14,%zmm31,8), %zmm30{%k1}	 # AVX512F
 	vgatherqpd	256(%r9,%zmm31), %zmm30{%k1}	 # AVX512F
 	vgatherqpd	1024(%rcx,%zmm31,4), %zmm30{%k1}	 # AVX512F
-	vgatherqpd	123(%r14,%zmm19,8), %zmm3{%k1}	 # AVX512F
 
 	vgatherqps	123(%r14,%zmm31,8), %ymm30{%k1}	 # AVX512F
 	vgatherqps	123(%r14,%zmm31,8), %ymm30{%k1}	 # AVX512F
@@ -11631,7 +11630,6 @@
 	vgatherqpd	zmm30{k1}, ZMMWORD PTR [r14+zmm31*8-123]	 # AVX512F
 	vgatherqpd	zmm30{k1}, ZMMWORD PTR [r9+zmm31+256]	 # AVX512F
 	vgatherqpd	zmm30{k1}, ZMMWORD PTR [rcx+zmm31*4+1024]	 # AVX512F
-	vgatherqpd	zmm3{k1}, ZMMWORD PTR [r14+zmm19*8+123]	 # AVX512F
 
 	vgatherqps	ymm30{k1}, YMMWORD PTR [r14+zmm31*8-123]	 # AVX512F
 	vgatherqps	ymm30{k1}, YMMWORD PTR [r14+zmm31*8-123]	 # AVX512F
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-disp32.d binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-disp32.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-disp32.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-disp32.d	2016-11-16 03:51:00.000000000 -0800
@@ -15,12 +15,11 @@
 [ 	]*[a-f0-9]+:	8b 98 ff 0f 00 00    	mov    0xfff\(%rax\),%ebx
 [ 	]*[a-f0-9]+:	8b 98 00 00 00 00    	mov    0x0\(%rax\),%ebx
 [ 	]*[a-f0-9]+:	8b 98 03 00 00 00    	mov    0x3\(%rax\),%ebx
-[ 	]*[a-f0-9]+:	62 f1 fe 08 6f 98 c0 ff ff ff 	vmovdqu64 -0x40\(%rax\),%xmm3
-[ 	]*[a-f0-9]+:	eb 07                	jmp    30 <foo>
-[ 	]*[a-f0-9]+:	eb 05                	jmp    30 <foo>
-[ 	]*[a-f0-9]+:	e9 00 00 00 00       	jmpq   30 <foo>
+[ 	]*[a-f0-9]+:	eb 07                	jmp    26 <foo>
+[ 	]*[a-f0-9]+:	eb 05                	jmp    26 <foo>
+[ 	]*[a-f0-9]+:	e9 00 00 00 00       	jmpq   26 <foo>
 
-0+30 <foo>:
+0+26 <foo>:
 [ 	]*[a-f0-9]+:	89 18                	mov    %ebx,\(%rax\)
 [ 	]*[a-f0-9]+:	89 58 03             	mov    %ebx,0x3\(%rax\)
 [ 	]*[a-f0-9]+:	89 98 ff 0f 00 00    	mov    %ebx,0xfff\(%rax\)
@@ -28,5 +27,4 @@
 [ 	]*[a-f0-9]+:	89 58 03             	mov    %ebx,0x3\(%rax\)
 [ 	]*[a-f0-9]+:	89 98 00 00 00 00    	mov    %ebx,0x0\(%rax\)
 [ 	]*[a-f0-9]+:	89 98 03 00 00 00    	mov    %ebx,0x3\(%rax\)
-[ 	]*[a-f0-9]+:	62 f1 fe 08 6f 98 c0 ff ff ff 	vmovdqu64 -0x40\(%rax\),%xmm3
 #pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-disp32.s binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-disp32.s
--- binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-disp32.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-disp32.s	2016-11-16 03:51:00.000000000 -0800
@@ -8,7 +8,6 @@
 
 	mov.d32 (%rax),%ebx
 	mov.d32 3(%rax),%ebx
-	vmovdqu64.d32 -0x40(%rax),%xmm3
 
 	jmp foo
 	jmp.d8 foo
@@ -25,5 +24,3 @@
 
 	mov.d32 DWORD PTR [rax], ebx
 	mov.d32 DWORD PTR [rax+3], ebx
-
-	vmovdqu64.d32 xmm3,XMMWORD PTR [rax-0x40]
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-gotpcrel.d binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-gotpcrel.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-gotpcrel.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-gotpcrel.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,3 @@
-#as: -mrelax-relocations=yes
 #objdump: -dwr
 
 .*: +file format .*
Only in binutils-2.26.1-src/gas/testsuite/gas/i386: x86-64-gotpcrel-no-relax.d
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-localpic.d binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-localpic.d
--- binutils-2.26.1-src/gas/testsuite/gas/i386/x86-64-localpic.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/i386/x86-64-localpic.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,3 @@
-#as: -mrelax-relocations=yes
 #readelf: -rsW
 #name: x86-64 local PIC
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/lns/lns.exp binutils-2.26-avr/gas/testsuite/gas/lns/lns.exp
--- binutils-2.26.1-src/gas/testsuite/gas/lns/lns.exp	2015-11-13 00:27:41.000000000 -0800
+++ binutils-2.26-avr/gas/testsuite/gas/lns/lns.exp	2016-11-16 03:51:00.000000000 -0800
@@ -33,6 +33,7 @@
 } {
     # Use alternate file for targets using DW_LNS_fixed_advance_pc opcodes.
     if {    [istarget am3*-*-*]
+	 || [istarget avr*-*-*]
 	 || [istarget cr16-*-*]
 	 || [istarget crx-*-*]
 	 || [istarget mn10*-*-*]
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: isa-override-1.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: micromips@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips1@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips1@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips1@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips2@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips2@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips2@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r2@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r2@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r2@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r3@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r3@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r3@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r5@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r5@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r5@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r6@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r6@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips32r6@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips64r2@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips64r3@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips64r5@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: mips64r6@isa-override-1.d
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/mips/mips.exp binutils-2.26-avr/gas/testsuite/gas/mips/mips.exp
--- binutils-2.26.1-src/gas/testsuite/gas/mips/mips.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/mips/mips.exp	2016-11-16 03:51:00.000000000 -0800
@@ -1468,9 +1468,6 @@
 
     run_dump_test "li-d"
 
-    run_dump_test_arches "isa-override-1" "" [mips_arch_list_matching mips1]
-    run_list_test_arches "isa-override-2" "-32" [mips_arch_list_matching mips1]
-
     run_dump_test_arches "r6"		[mips_arch_list_matching mips32r6]
     if $has_newabi {
 	run_dump_test_arches "r6-n32"	[mips_arch_list_matching mips64r6]
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: octeon3@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: octeon3@isa-override-1.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: octeon3@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: octeon3@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: octeon@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: r3000@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: r3000@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: r3000@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: r3900@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: r3900@isa-override-2.l
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: r3900@isa-override-2.s
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: r5900@isa-override-1.d
Only in binutils-2.26.1-src/gas/testsuite/gas/mips: r5900@isa-override-1.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/altivec3.d binutils-2.26-avr/gas/testsuite/gas/ppc/altivec3.d
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/altivec3.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/altivec3.d	2016-11-16 03:51:00.000000000 -0800
@@ -76,5 +76,4 @@
 .*:	(12 b5 17 44|44 17 b5 12) 	vslv    v21,v21,v2
 .*:	(11 e9 0f 4d|4d 0f e9 11) 	vextuhrx r15,r9,v1
 .*:	(12 b1 87 8d|8d 87 b1 12) 	vextuwrx r21,r17,v16
-.*:	(12 95 b5 e3|e3 b5 95 12) 	vmsumudm v20,v21,v22,v23
 #pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/altivec3.s binutils-2.26-avr/gas/testsuite/gas/ppc/altivec3.s
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/altivec3.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/altivec3.s	2016-11-16 03:51:00.000000000 -0800
@@ -67,4 +67,3 @@
 	vslv         21,21,2
 	vextuhrx     15,9,1
 	vextuwrx     21,17,16
-	vmsumudm     20,21,22,23
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/e6500.d binutils-2.26-avr/gas/testsuite/gas/ppc/e6500.d
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/e6500.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/e6500.d	2016-11-16 03:51:00.000000000 -0800
@@ -73,20 +73,3 @@
   fc:	(7c 43 09 8d|8d 09 43 7c) 	icblq.  2,r3,r1
  100:	(7c 10 02 dc|dc 02 10 7c) 	mftmr   r0,16
  104:	(7c 10 03 dc|dc 03 10 7c) 	mttmr   16,r0
-.*:	(7e 80 38 68|68 38 80 7e) 	lbarx   r20,0,r7
-.*:	(7e 81 38 68|68 38 81 7e) 	lbarx   r20,r1,r7
-.*:	(7e a0 40 e8|e8 40 a0 7e) 	lharx   r21,0,r8
-.*:	(7e a1 40 e8|e8 40 a1 7e) 	lharx   r21,r1,r8
-.*:	(7e c0 48 28|28 48 c0 7e) 	lwarx   r22,0,r9
-.*:	(7e c1 48 28|28 48 c1 7e) 	lwarx   r22,r1,r9
-.*:	(7e e0 50 a8|a8 50 e0 7e) 	ldarx   r23,0,r10
-.*:	(7e e1 50 a8|a8 50 e1 7e) 	ldarx   r23,r1,r10
-.*:	(7d 40 3d 6d|6d 3d 40 7d) 	stbcx\.  r10,0,r7
-.*:	(7d 41 3d 6d|6d 3d 41 7d) 	stbcx\.  r10,r1,r7
-.*:	(7d 60 45 ad|ad 45 60 7d) 	sthcx\.  r11,0,r8
-.*:	(7d 61 45 ad|ad 45 61 7d) 	sthcx\.  r11,r1,r8
-.*:	(7d 80 49 2d|2d 49 80 7d) 	stwcx\.  r12,0,r9
-.*:	(7d 81 49 2d|2d 49 81 7d) 	stwcx\.  r12,r1,r9
-.*:	(7d a0 51 ad|ad 51 a0 7d) 	stdcx\.  r13,0,r10
-.*:	(7d a1 51 ad|ad 51 a1 7d) 	stdcx\.  r13,r1,r10
-#pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/e6500.s binutils-2.26-avr/gas/testsuite/gas/ppc/e6500.s
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/e6500.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/e6500.s	2016-11-16 03:51:00.000000000 -0800
@@ -67,19 +67,3 @@
 	icblq.	2,3,1
 	mftmr	0,16
 	mttmr	16,0
-	lbarx   20,0,7
-	lbarx   20,1,7
-	lharx   21,0,8
-	lharx   21,1,8
-	lwarx   22,0,9
-	lwarx   22,1,9
-	ldarx   23,0,10
-	ldarx   23,1,10
-	stbcx.  10,0,7
-	stbcx.  10,1,7
-	sthcx.  11,0,8
-	sthcx.  11,1,8
-	stwcx.  12,0,9
-	stwcx.  12,1,9
-	stdcx.  13,0,10
-	stdcx.  13,1,10
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/power4.d binutils-2.26-avr/gas/testsuite/gas/ppc/power4.d
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/power4.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/power4.d	2016-11-16 03:51:00.000000000 -0800
@@ -10,7 +10,7 @@
 
 Sections:
 Idx Name +Size +VMA +LMA +File off +Algn
- +0 \.text +0+108 +0+ +0+ +.*
+ +0 \.text +0+e8 +0+ +0+ +.*
  +CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE
  +1 \.data +0+20 +0+ +0+ +.*
  +CONTENTS, ALLOC, LOAD, DATA
@@ -106,12 +106,3 @@
 .*:	(7c 20 04 ac|ac 04 20 7c) 	lwsync
 .*:	(7c 40 04 ac|ac 04 40 7c) 	ptesync
 .*:	(7c 40 04 ac|ac 04 40 7c) 	ptesync
-.*:	(7e 80 30 28|28 30 80 7e) 	lwarx   r20,0,r6
-.*:	(7e 81 30 28|28 30 81 7e) 	lwarx   r20,r1,r6
-.*:	(7e a0 38 a8|a8 38 a0 7e) 	ldarx   r21,0,r7
-.*:	(7e a1 38 a8|a8 38 a1 7e) 	ldarx   r21,r1,r7
-.*:	(7e c0 41 2d|2d 41 c0 7e) 	stwcx\.  r22,0,r8
-.*:	(7e c1 41 2d|2d 41 c1 7e) 	stwcx\.  r22,r1,r8
-.*:	(7e e0 49 ad|ad 49 e0 7e) 	stdcx\.  r23,0,r9
-.*:	(7e e1 49 ad|ad 49 e1 7e) 	stdcx\.  r23,r1,r9
-#pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/power4.s binutils-2.26-avr/gas/testsuite/gas/ppc/power4.s
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/power4.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/power4.s	2016-11-16 03:51:00.000000000 -0800
@@ -79,14 +79,6 @@
 	sync    1
 	ptesync
 	sync    2
-	lwarx   20,0,6
-	lwarx   20,1,6
-	ldarx   21,0,7
-	ldarx   21,1,7
-	stwcx.  22,0,8
-	stwcx.  22,1,8
-	stdcx.  23,0,9
-	stdcx.  23,1,9
 
 	.section	".data"
 usym0:	.llong	0xcafebabe
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/power8.d binutils-2.26-avr/gas/testsuite/gas/ppc/power8.d
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/power8.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/power8.d	2016-11-16 03:51:00.000000000 -0800
@@ -160,36 +160,4 @@
 .*:	(7d 20 3f 99|99 3f 20 7d) 	stxvd2x vs41,0,r7
 .*:	(7d 75 47 98|98 47 75 7d) 	stxvd2x vs11,r21,r8
 .*:	(7d 75 47 98|98 47 75 7d) 	stxvd2x vs11,r21,r8
-.*:	(7e 80 38 68|68 38 80 7e) 	lbarx   r20,0,r7
-.*:	(7e 80 38 68|68 38 80 7e) 	lbarx   r20,0,r7
-.*:	(7e 80 38 69|69 38 80 7e) 	lbarx   r20,0,r7,1
-.*:	(7e 81 38 68|68 38 81 7e) 	lbarx   r20,r1,r7
-.*:	(7e 81 38 68|68 38 81 7e) 	lbarx   r20,r1,r7
-.*:	(7e 81 38 69|69 38 81 7e) 	lbarx   r20,r1,r7,1
-.*:	(7e a0 40 a8|a8 40 a0 7e) 	ldarx   r21,0,r8
-.*:	(7e a0 40 a8|a8 40 a0 7e) 	ldarx   r21,0,r8
-.*:	(7e a0 40 a9|a9 40 a0 7e) 	ldarx   r21,0,r8,1
-.*:	(7e a1 40 a8|a8 40 a1 7e) 	ldarx   r21,r1,r8
-.*:	(7e a1 40 a8|a8 40 a1 7e) 	ldarx   r21,r1,r8
-.*:	(7e a1 40 a9|a9 40 a1 7e) 	ldarx   r21,r1,r8,1
-.*:	(7e c0 48 e8|e8 48 c0 7e) 	lharx   r22,0,r9
-.*:	(7e c0 48 e8|e8 48 c0 7e) 	lharx   r22,0,r9
-.*:	(7e c0 48 e9|e9 48 c0 7e) 	lharx   r22,0,r9,1
-.*:	(7e c1 48 e8|e8 48 c1 7e) 	lharx   r22,r1,r9
-.*:	(7e c1 48 e8|e8 48 c1 7e) 	lharx   r22,r1,r9
-.*:	(7e c1 48 e9|e9 48 c1 7e) 	lharx   r22,r1,r9,1
-.*:	(7e e0 50 28|28 50 e0 7e) 	lwarx   r23,0,r10
-.*:	(7e e0 50 28|28 50 e0 7e) 	lwarx   r23,0,r10
-.*:	(7e e0 50 29|29 50 e0 7e) 	lwarx   r23,0,r10,1
-.*:	(7e e1 50 28|28 50 e1 7e) 	lwarx   r23,r1,r10
-.*:	(7e e1 50 28|28 50 e1 7e) 	lwarx   r23,r1,r10
-.*:	(7e e1 50 29|29 50 e1 7e) 	lwarx   r23,r1,r10,1
-.*:	(7d 40 3d 6d|6d 3d 40 7d) 	stbcx\.  r10,0,r7
-.*:	(7d 41 3d 6d|6d 3d 41 7d) 	stbcx\.  r10,r1,r7
-.*:	(7d 60 45 ad|ad 45 60 7d) 	sthcx\.  r11,0,r8
-.*:	(7d 61 45 ad|ad 45 61 7d) 	sthcx\.  r11,r1,r8
-.*:	(7d 80 49 2d|2d 49 80 7d) 	stwcx\.  r12,0,r9
-.*:	(7d 81 49 2d|2d 49 81 7d) 	stwcx\.  r12,r1,r9
-.*:	(7d a0 51 ad|ad 51 a0 7d) 	stdcx\.  r13,0,r10
-.*:	(7d a1 51 ad|ad 51 a1 7d) 	stdcx\.  r13,r1,r10
 #pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/power8.s binutils-2.26-avr/gas/testsuite/gas/ppc/power8.s
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/power8.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/power8.s	2016-11-16 03:51:00.000000000 -0800
@@ -152,35 +152,3 @@
 	stxvd2x      41,0,7
 	stxvx        11,21,8
 	stxvd2x      11,21,8
-	lbarx        20,0,7
-	lbarx        20,0,7,0
-	lbarx        20,0,7,1
-	lbarx        20,1,7
-	lbarx        20,1,7,0
-	lbarx        20,1,7,1
-	ldarx        21,0,8
-	ldarx        21,0,8,0
-	ldarx        21,0,8,1
-	ldarx        21,1,8
-	ldarx        21,1,8,0
-	ldarx        21,1,8,1
-	lharx        22,0,9
-	lharx        22,0,9,0
-	lharx        22,0,9,1
-	lharx        22,1,9
-	lharx        22,1,9,0
-	lharx        22,1,9,1
-	lwarx        23,0,10
-	lwarx        23,0,10,0
-	lwarx        23,0,10,1
-	lwarx        23,1,10
-	lwarx        23,1,10,0
-	lwarx        23,1,10,1
-	stbcx.       10,0,7
-	stbcx.       10,1,7
-	sthcx.       11,0,8
-	sthcx.       11,1,8
-	stwcx.       12,0,9
-	stwcx.       12,1,9
-	stdcx.       13,0,10
-	stdcx.       13,1,10
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/power9.d binutils-2.26-avr/gas/testsuite/gas/ppc/power9.d
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/power9.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/power9.d	2016-11-16 03:51:00.000000000 -0800
@@ -278,14 +278,6 @@
 .*:	(7f a8 49 80|80 49 a8 7f) 	cmprb   cr7,1,r8,r9
 .*:	(7d e0 01 00|00 01 e0 7d) 	setb    r15,cr0
 .*:	(7d fc 01 00|00 01 fc 7d) 	setb    r15,cr7
-.*:	(7e 00 01 01|01 01 00 7e) 	setbool r16,lt
-.*:	(7e 01 01 01|01 01 01 7e) 	setbool r16,gt
-.*:	(7e 02 01 01|01 01 02 7e) 	setbool r16,eq
-.*:	(7e 03 01 01|01 01 03 7e) 	setbool r16,so
-.*:	(7e 1c 01 01|01 01 1c 7e) 	setbool r16,4\*cr7\+lt
-.*:	(7e 1d 01 01|01 01 1d 7e) 	setbool r16,4\*cr7\+gt
-.*:	(7e 1e 01 01|01 01 1e 7e) 	setbool r16,4\*cr7\+eq
-.*:	(7e 1f 01 01|01 01 1f 7e) 	setbool r16,4\*cr7\+so
 .*:	(7f 40 52 1a|1a 52 40 7f) 	lxvl    vs26,0,r10
 .*:	(7f 14 52 1b|1b 52 14 7f) 	lxvl    vs56,r20,r10
 .*:	(7f 60 5b 1a|1a 5b 60 7f) 	stxvl   vs27,0,r11
@@ -371,8 +363,6 @@
 .*:	(7c 00 f6 e4|e4 f6 00 7c) 	rmieg   r30
 .*:	(7d 40 7a 6a|6a 7a 40 7d) 	ldmx    r10,0,r15
 .*:	(7d 43 7a 6a|6a 7a 43 7d) 	ldmx    r10,r3,r15
-.*:	(7d 60 83 6a|6a 83 60 7d) 	lwzmx   r11,0,r16
-.*:	(7d 63 83 6a|6a 83 63 7d) 	lwzmx   r11,r3,r16
 .*:	(4c 00 02 e4|e4 02 00 4c) 	stop
 .*:	(7c 00 00 3c|3c 00 00 7c) 	wait    
 .*:	(7c 00 00 3c|3c 00 00 7c) 	wait    
@@ -391,29 +381,4 @@
 .*:	(f0 6d bc 07|07 bc 6d f0) 	xsmaxcdp vs35,vs45,vs55
 .*:	(f0 8e c4 c7|c7 c4 8e f0) 	xsminjdp vs36,vs46,vs56
 .*:	(f0 af cc 87|87 cc af f0) 	xsmaxjdp vs37,vs47,vs57
-.*:	(12 95 b5 e3|e3 b5 95 12) 	vmsumudm v20,v21,v22,v23
-.*:	(7d 6c 69 54|54 69 6c 7d) 	addex   r11,r12,r13,0
-.*:	(7d 6c 6b 54|54 6b 6c 7d) 	addex   r11,r12,r13,1
-.*:	(7d 6c 6d 54|54 6d 6c 7d) 	addex   r11,r12,r13,2
-.*:	(7e b6 b9 55|55 b9 b6 7e) 	addex\.  r21,r22,r23,0
-.*:	(7e b6 bb 55|55 bb b6 7e) 	addex\.  r21,r22,r23,1
-.*:	(7e b6 bd 55|55 bd b6 7e) 	addex\.  r21,r22,r23,2
-.*:	(ff 20 04 8e|8e 04 20 ff) 	mffs    f25
-.*:	(ff 20 04 8f|8f 04 20 ff) 	mffs\.   f25
-.*:	(ff 41 04 8e|8e 04 41 ff) 	mffsce  f26
-.*:	(ff 74 a4 8e|8e a4 74 ff) 	mffscdrn f27,f20
-.*:	(ff 95 04 8e|8e 04 95 ff) 	mffscdrni f28,0
-.*:	(ff 95 3c 8e|8e 3c 95 ff) 	mffscdrni f28,7
-.*:	(ff b6 ac 8e|8e ac b6 ff) 	mffscrn f29,f21
-.*:	(ff d7 04 8e|8e 04 d7 ff) 	mffscrni f30,0
-.*:	(ff d7 1c 8e|8e 1c d7 ff) 	mffscrni f30,3
-.*:	(ff f8 04 8e|8e 04 f8 ff) 	mffsl   f31
-.*:	(7e 8a 01 76|76 01 8a 7e) 	brd     r10,r20
-.*:	(7e ab 01 b6|b6 01 ab 7e) 	brh     r11,r21
-.*:	(7e cc 01 36|36 01 cc 7e) 	brw     r12,r22
-.*:	(11 6a 63 77|77 63 6a 11) 	nandxor r10,r11,r12,r13
-.*:	(12 b4 b5 f6|f6 b5 b4 12) 	xor3    r20,r21,r22,r23
-.*:	(11 6a 60 34|34 60 6a 11) 	rldixor r10,r11,0,r12
-.*:	(11 6a 66 f4|f4 66 6a 11) 	rldixor r10,r11,27,r12
-.*:	(11 6a 67 f5|f5 67 6a 11) 	rldixor r10,r11,63,r12
 #pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/testsuite/gas/ppc/power9.s binutils-2.26-avr/gas/testsuite/gas/ppc/power9.s
--- binutils-2.26.1-src/gas/testsuite/gas/ppc/power9.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/testsuite/gas/ppc/power9.s	2016-11-16 03:51:00.000000000 -0800
@@ -269,14 +269,6 @@
 	cmprb       7,1,8,9
 	setb        15,0
 	setb        15,7
-	setbool     16,0
-	setbool     16,1
-	setbool     16,2
-	setbool     16,3
-	setbool     16,28
-	setbool     16,29
-	setbool     16,30
-	setbool     16,31
 	lxvl        26,0,10
 	lxvl        56,20,10
 	stxvl       27,0,11
@@ -362,8 +354,6 @@
 	rmieg       30
 	ldmx        10,0,15
 	ldmx        10,3,15
-	lwzmx       11,0,16
-	lwzmx       11,3,16
 	stop
 	wait
 	wait        0
@@ -382,28 +372,3 @@
 	xsmaxcdp    35,45,55
 	xsminjdp    36,46,56
 	xsmaxjdp    37,47,57
-	vmsumudm    20,21,22,23
-	addex       11,12,13,0
-	addex       11,12,13,1
-	addex       11,12,13,2
-	addex.      21,22,23,0
-	addex.      21,22,23,1
-	addex.      21,22,23,2
-	mffs        25
-	mffs.       25
-	mffsce      26
-	mffscdrn    27,20
-	mffscdrni   28,0
-	mffscdrni   28,7
-	mffscrn     29,21
-	mffscrni    30,0
-	mffscrni    30,3
-	mffsl       31
-	brd         10,20
-	brh         11,21
-	brw         12,22
-	nandxor     10,11,12,13
-	xor3        20,21,22,23
-	rldixor     10,11,0,12
-	rldixor     10,11,27,12
-	rldixor     10,11,63,12
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gas/write.c binutils-2.26-avr/gas/write.c
--- binutils-2.26.1-src/gas/write.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gas/write.c	2016-11-16 03:51:00.000000000 -0800
@@ -25,6 +25,7 @@
 #include "obstack.h"
 #include "output-file.h"
 #include "dwarf2dbg.h"
+#include "libbfd.h"
 #include "compress-debug.h"
 
 #ifndef TC_FORCE_RELOCATION
Only in binutils-2.26-avr: gdb
Only in binutils-2.26-avr: .gitattributes
Only in binutils-2.26-avr: .gitignore
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gold/ChangeLog binutils-2.26-avr/gold/ChangeLog
--- binutils-2.26.1-src/gold/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gold/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -1,11 +1,3 @@
-2016-02-05  Sriraman Tallam  <tmsriram@google.com>
-
-	PR gold/19047
-	* icf.cc (get_rel_addend): New function.
-	(get_section_contents):  Move merge section addend computation to a
-	new function.  Ignore negative values for SHT_REL and SHT_RELA addends.
-	Fix bug to not read past the length of the section.
-
 2015-12-16  Roland McGrath  <mcgrathr@google.com>
 
 	PR ld/17473
@@ -41,7 +33,7 @@
 2015-11-11  Alan Modra  <amodra@gmail.com>
 	    Peter Bergner <bergner@vnet.ibm.com>
 
-	* powerpc.cc (Powerpc_relocate_functions::addr16_dq): New function.
+	* gold/powerpc.cc (Powerpc_relocate_functions::addr16_dq): New function.
 	(Powerpc_relocate_functions::addr16dx_ha): Likewise.
 	(Target_powerpc::Scan::local): Handle R_POWERPC_REL16DX_HA.
 	(Target_powerpc::Scan::global): Likewise.
@@ -347,7 +339,7 @@
 2015-07-26  Doug Kwan  <dougkwan@google.com>
 
 	* testsuite/arm_unaligned_reloc.{s,sh}: Make test less sensitive to
-	disassembler output format.
+	  disassembler output format.
 
 2015-07-23  Ian Coolidge  <icoolidge@google.com>
 	Plumb --pic-veneer option for gold.
@@ -574,7 +566,7 @@
 2015-06-29  Doug Kwan  <dougkwan@google.com>
 
 	* testsuite/arm_bl_out_of_range.s: Align stub table so that it appears
-	at address expected by test.
+	  at address expected by test.
 	* testsuite/arm_cortex_a8_b.s: Ditto.
 	* testsuite/arm_cortex_a8_b_cond.s: Ditto.
 	* testsuite/arm_cortex_a8_bl.s: Ditto.
@@ -948,6 +940,7 @@
 2015-04-07  HC Yen <hc.yen@mediatek.com>
 
 	Add AArch32 support for gold linker.
+	gold/
 	* arm.cc: Add V8 arch combine table.
 
 2015-04-06  Rafael vila de Espndola <rafael.espindola@gmail.com>
@@ -1462,6 +1455,7 @@
 	(Output_data_plt_arm::entry_count): Modified.
 	(Output_data_plt_arm::address_for_global): New method.
 	(Output_data_plt_arm::address_for_local): New method.
+gold/
 	(Output_data_plt_arm::set_final_data_size): Add irelative_count_.
 	(Output_data_plt_arm::insert_irelative_data): New method.
 	(Output_data_plt_arm::irelative_rel_): New member.
@@ -2496,7 +2490,7 @@
 
 	Add .gdb_index version 7 support.
 
-	* dwarf_reader.cc: include <utility> (for make_pair).
+	* gold/dwarf_reader.cc: include <utility> (for make_pair).
 	(Dwarf_abbrev_table::do_read_abbrevs): Check for compressed
 	debug sections.
 	(Dwarf_ranges_table::read_ranges_table): Likewise.
@@ -2507,21 +2501,21 @@
 	for end of list by offset, not by offset == 0.
 	(Dwarf_info_reader::do_read_string_table): Check for compressed
 	debug sections.
-	* dwarf_reader.h (Dwarf_pubnames_table::Dwarf_pubnames_table):
+	* gold/dwarf_reader.h (Dwarf_pubnames_table::Dwarf_pubnames_table):
 	Initialize new data members.
 	(Dwarf_pubnames_table::next_name): return flag_byte.
 	(Dwarf_pubnames_table::end_of_table_): New data member.
 	(Dwarf_pubnames_table::is_gnu_style_): New data member.
-	* gdb-index.cc (gdb_index_version): Update to version 7.
+	* gold/gdb-index.cc (gdb_index_version): Update to version 7.
 	(Gdb_index_info_reader::read_pubtable): Read flag_byte.
 	(Gdb_index_info_reader::read_pubnames_and_pubtypes): Don't
 	read skeleton type unit DIEs.
 	(Gdb_index::add_symbol): Add flag_byte; adjust all callers.
 	(Gdb_index::do_write): Write flag_byte.
-	* gdb-index.h (Gdb_index::add_symbol): Add flags parameter.
+	* gold/gdb-index.h (Gdb_index::add_symbol): Add flags parameter.
 	(Gdb_index::Cu_vector): Store flags along with cu indexes.
-	* testsuite/gdb_index_test_3.sh: Allow versions 4-7.
-	* testsuite/gdb_index_test_comm.sh: Likewise.
+	* gold/testsuite/gdb_index_test_3.sh: Allow versions 4-7.
+	* gold/testsuite/gdb_index_test_comm.sh: Likewise.
 
 2014-01-08  H.J. Lu  <hongjiu.lu@intel.com>
 
@@ -5560,15 +5554,15 @@
 
 2012-01-03  Cary Coutant  <ccoutant@google.com>
 
-	* incremental.cc (Sized_incremental_binary::do_process_got_plt):
+	* gold/incremental.cc (Sized_incremental_binary::do_process_got_plt):
 	Use abstract base class for GOT.
-	* output.h (class Output_data_got_base): New abstract base class.
+	* gold/output.h (class Output_data_got_base): New abstract base class.
 	(class Output_data_got): Derive from new base class, adjust ctors.
 	(Output_data_got::reserve_slot): Make virtual; rename to
 	do_reserve_slot; Adjust callers.
-	* target.h (Sized_target::init_got_plt_for_update): Return
+	* gold/target.h (Sized_target::init_got_plt_for_update): Return
 	pointer to abstract base class.
-	* x86_64.cc (Target_x86_64::init_got_plt_for_update): Likewise.
+	* gold/x86_64.cc (Target_x86_64::init_got_plt_for_update): Likewise.
 
 2011-12-18  Ian Lance Taylor  <iant@google.com>
 
@@ -6079,10 +6073,10 @@
 
 2011-08-01  Cary Coutant  <ccoutant@google.com>
 
-	* testsuite/Makefile.am (justsyms_exec): New testcase.
-	* testsuite/Makefile.in: Regenerate.
-	* testsuite/justsyms_exec.c: New source file.
-	* testsuite/justsyms_lib.c: New source file.
+	* gold/testsuite/Makefile.am (justsyms_exec): New testcase.
+	* gold/testsuite/Makefile.in: Regenerate.
+	* gold/testsuite/justsyms_exec.c: New source file.
+	* gold/testsuite/justsyms_lib.c: New source file.
 
 2011-08-01  Cary Coutant  <ccoutant@google.com>
 
@@ -6408,7 +6402,7 @@
 
 2011-07-06  Cary Coutant  <ccoutant@google.com>
 
-	* incremental.cc
+	* gold/incremental.cc
 	(Output_section_incremental_inputs::write_info_blocks): Check for
 	hidden and internal symbols.
 
@@ -6949,9 +6943,9 @@
 2011-06-09  Cary Coutant  <ccoutant@google.com>
 
 	PR gold/12804
-	* gold.cc (queue_initial_tasks): Warn if --incremental is
+	* gold/gold.cc (queue_initial_tasks): Warn if --incremental is
 	used with --compress-debug-sections.
-	* object.cc (Sized_relobj_file::do_layout): Report
+	* gold/object.cc (Sized_relobj_file::do_layout): Report
 	uncompressed size of compressed input sections.
 
 2011-06-08  Cary Coutant  <ccoutant@google.com>
@@ -7079,10 +7073,10 @@
 2011-06-02  Cary Coutant  <ccoutant@google.com>
 
 	PR gold/12163
-	* archive.cc (Archive::Archive): Initialize new data member.
+	* gold/archive.cc (Archive::Archive): Initialize new data member.
 	(Archive::include_all_members): Return if archive has already been
 	included.
-	* archive.h (Archive::include_all_members_): New data member.
+	* gold/archive.h (Archive::include_all_members_): New data member.
 
 2011-06-02  Nick Clifton  <nickc@redhat.com>
 
@@ -7599,9 +7593,9 @@
 
 2011-04-14 Cary Coutant  <ccoutant@google.com>
 
-	* layout.cc (Layout::symtab_section_offset): New function.
-	* layout.h (Layout::symtab_section_offset): New function.
-	* reloc.cc (Sized_relobj::do_relocate): Call it.
+	* gold/layout.cc (Layout::symtab_section_offset): New function.
+	* gold/layout.h (Layout::symtab_section_offset): New function.
+	* gold/reloc.cc (Sized_relobj::do_relocate): Call it.
 
 2011-04-12  Ian Lance Taylor  <iant@google.com>
 
@@ -8712,7 +8706,7 @@
 
 2010-10-17  Doug Kwan  <dougkwan@google.com>
 
-	* arm.cc (Target_arm::got_section): Use correct order and set
+	* gold/arm.cc (Target_arm::got_section): Use correct order and set
 	GOT output section to be writable.
 
 2010-10-14  Cary Coutant  <ccoutant@google.com>
@@ -8864,7 +8858,7 @@
 
 2010-09-30  Doug Kwan  <dougkwan@google.com>
 
-	* testsuite/arm_branch_out_of_range.sh: Fix broken tests.
+	* gold/testsuite/arm_branch_out_of_range.sh: Fix broken tests.
 
 2010-09-28  Sriraman Tallam  <tmsriram@google.com>
 
@@ -8908,13 +8902,13 @@
 
 2010-09-15  Doug Kwan  <dougkwan@google.com>
 
-	* testsuite/script_test_3.t: Add ARM special sections.
-	* testsuite/script_test_4.t: Same.
-	* testsuite/script_test_5.t: Same.
-	* testsuite/script_test_6.t: Same.
-	* testsuite/script_test_7.t: Same.
-	* testsuite/script_test_7.t: Same.
-	* testsuite/thumb_blx_out_of_range.s: Fix instruction alignment.
+	* gold/testsuite/script_test_3.t: Add ARM special sections.
+	* gold/testsuite/script_test_4.t: Same.
+	* gold/testsuite/script_test_5.t: Same.
+	* gold/testsuite/script_test_6.t: Same.
+	* gold/testsuite/script_test_7.t: Same.
+	* gold/testsuite/script_test_7.t: Same.
+	* gold/testsuite/thumb_blx_out_of_range.s: Fix instruction alignment.
 
 2010-09-14  Cary Coutant  <ccoutant@google.com>
 
@@ -9047,7 +9041,7 @@
 
 2010-08-27  Doug Kwan  <dougkwan@google.com>
 
-	* resolve.cc (Symbol_table::should_override): Let a weak
+	* gold/resolve.cc (Symbol_table::should_override): Let a weak
 	reference override an existing dynamic weak reference.
 	* testsuite/Makefile.am: Add new test dyn_weak_ref.
 	* testsuite/Makefile.in: Regenerate.
@@ -9139,11 +9133,11 @@
 2010-08-19  Neil Vachharajani  <nvachhar@google.com>
 	    Cary Coutant  <ccoutant@google.com>
 
-	* archive.h (Add_lib_group_symbols): Add readsyms_blocker_, adjust
+	* gold/archive.h (Add_lib_group_symbols): Add readsyms_blocker_, adjust
 	constructor, and set_blocker.
-	* archive.cc (Add_lib_group_symbols::is_runnable): Also check
+	* gold/archive.cc (Add_lib_group_symbols::is_runnable): Also check
 	readsyms_blocker_.
-	* readsyms.cc (Read_symbols::do_lib_group): Also pass
+	* gold/readsyms.cc (Read_symbols::do_lib_group): Also pass
 	this->this_blocker_ to Add_lib_group_symbols::set_blocker.
 	* testsuite/Makefile.am (start_lib_test): New test case.
 	* testsuite/Makefile.in: Regenerate.
@@ -9746,9 +9740,9 @@
 2010-07-27  Jeffrey Yasskin  <jyasskin@google.com>
 
 	* testsuite/debug_msg.sh: Test mixed weak/strong symbol behavior.
-	* testsuite/debug_msg.cc: Likewise.
-	* testsuite/odr_violation1.cc
-	* testsuite/odr_violation2.cc
+	* gold/testsuite/debug_msg.cc: Likewise.
+	* gold/testsuite/odr_violation1.cc
+	* gold/testsuite/odr_violation2.cc
 
 2010-07-21  Cary Coutant  <ccoutant@google.com>
 
@@ -10093,13 +10087,13 @@
 2010-05-26  Rafael Espindola  <espindola@google.com>
 
 	PR 11604
-	* object.cc(Sized_relobj::do_layout_deferred_sections): Avoid
+	* gold/object.cc(Sized_relobj::do_layout_deferred_sections): Avoid
 	adding sections the garbage collector removed.
-	* testsuite/Makefile.am: Add test.
-	* testsuite/Makefile.in: Regenerate.
-	* testsuite/plugin_test_7.sh: New.
-	* testsuite/plugin_test_7_1.c: New.
-	* testsuite/plugin_test_7_2.c: New.
+	* gold/testsuite/Makefile.am: Add test.
+	* gold/testsuite/Makefile.in: Regenerate.
+	* gold/testsuite/plugin_test_7.sh: New.
+	* gold/testsuite/plugin_test_7_1.c: New.
+	* gold/testsuite/plugin_test_7_2.c: New.
 
 2010-05-26  Rafael Espindola  <espindola@google.com>
 
@@ -10583,7 +10577,7 @@
 
 2010-03-25  Doug Kwan  <dougkwan@google.com>
 
-	* arm.cc (Arm_exidx_fixup::update_offset_map): Rearrange code
+	* gold/arm.cc (Arm_exidx_fixup::update_offset_map): Rearrange code
 	to avoid a conversion warning on a 32-bit host.
 
 2010-03-24  Ian Lance Taylor  <iant@google.com>
@@ -10787,7 +10781,7 @@
 
 2010-03-08  Doug Kwan  <dougkwan@google.com>
 
-	* arm.cc (Arm_exidx_fixup::update_offset_map): Fix build breakage
+	* gold/arm.cc (Arm_exidx_fixup::update_offset_map): Fix build breakage
 	due to a conversion warning.
 	(Arm_relobj::update_output_local_symbol_count): Check for local
 	symbol with unset output index.
@@ -11409,7 +11403,7 @@
 
 2010-01-29  Viktor Kutuzov  <vkutuzov@accesssoftek.com>
 
-	* arm.cc: Added support for the ARM relocations: R_ARM_THM_PC8,
+	* gold/arm.cc: Added support for the ARM relocations: R_ARM_THM_PC8,
 	R_ARM_THM_PC12, R_ARM_THM_ALU_PREL_11_0.
 	(Arm_relocate_functions::thm_alu11): New Method.
 	(Arm_relocate_functions::thm_pc8): New Method.
@@ -11559,12 +11553,12 @@
 
 2010-01-22  Viktor Kutuzov  <vkutuzov@accesssoftek.com>
 
-	* arm.cc (Target_arm): Updated fix_v4bx method and usage of
+	* gold/arm.cc (Target_arm): Updated fix_v4bx method and usage of
 	Fix_v4bx enum values .
-	* options.h (General_options): New option definitions.
+	* gold/options.h (General_options): New option definitions.
 	(General_options::fix_v4bx): New method.
 	(General_options::Fix_v4bx): New enum.
-	* options.cc (General_options::parse_fix_v4bx): New method.
+	* gold/options.cc (General_options::parse_fix_v4bx): New method.
 	(General_options::parse_fix_v4bx_interworking): New method.
 
 2010-01-22  Doug Kwan  <dougkwan@google.com>
@@ -11624,7 +11618,7 @@
 
 2010-01-20  Viktor Kutuzov  <vkutuzov@accesssoftek.com>
 
-	* arm.cc: Added support for R_ARM_V4BX relocation
+	* gold/arm.cc: Added support for R_ARM_V4BX relocation
 	(class Arm_v4bx_stub): New class.
 	(DEF_STUBS): Updated definition to support v4_veneer_bx.
 	(Stub_factory::make_arm_v4bx_stub): New method.
@@ -12681,7 +12675,7 @@
 	attributes_section and attributes_vendor.
 	* i386.cc (Target_i386::i386_info): Same.
 	* object.cc (Sized_relobj::do_layout): Skip attribute section.
-	* powerpc.cc (Target_powerpc::powerpc_info): Initialize new
+	* gold/powerpc.cc (Target_powerpc::powerpc_info): Initialize new
 	fields attributes_section and attributes_vendor.
 	* sparc.cc (Target_sparc::sparc_info): Same.
 	* target.h (Target::attributes_section, Target::attributes_vendor,
@@ -13328,7 +13322,7 @@
 	(Segment_start_expression::value): New method definition.
 	(script_exp_function_segment_start): Return a new
 	Segment_start_expression.
-	* script-c.h (script_saw_segment_start_expression): New function
+	* gold/script-c.h (script_saw_segment_start_expression): New function
 	prototype.
 	* script-sections.cc (Script_sections::Script_sections): Initialize
 	SAW_SEGMENT_START_EXPRESSION_ to false.
@@ -14119,9 +14113,9 @@
 	(Script_sections::attach_sections_using_phdrs_clause): Do not modify
 	segment list.
 	(Script_sections::release_segments): New method definition.
-	* script-sections.h (Script_sections::release_segments): New
+	* gold/script-sections.h (Script_sections::release_segments): New
 	method declaration.
-	* target.h (Target::may_relax, Target::relax,
+	* gold/target.h (Target::may_relax, Target::relax,
 	Target::do_may_relax, Target::do_relax): New method definitions.
 
 2009-09-17  Viktor Kutuzov  <vkutuzov@accesssoftek.com>
@@ -14695,7 +14689,7 @@
 
 2009-06-03  Doug Kwan  <dougkwan@google.com>
 
-	* arm.cc (namespace utils): New.
+	* gold/arm.cc (namespace utils): New.
 	(Target_arm::reloc_is_non_pic): Define new method.
 	(class Arm_relocate_functions): New.
 	(Target_arm::Relocate::relocate): Handle relocation types used by
@@ -14707,7 +14701,7 @@
 
 2009-06-02  Doug Kwan  <dougkwan@google.com>
 
-	* arm.cc (Target_arm::Scan::Scan):  Initialize
+	* gold/arm.cc (Target_arm::Scan::Scan):  Initialize
 	issued_non_pic_error_.
 	(class Target_arm::Scan): Declare new method check_non_pic.
 	Define new method symbol_needs_plt_entry.
@@ -14728,7 +14722,7 @@
 
 2009-05-29  Doug Kwan  <dougkwan@google.com>
 
-	* arm.cc (Output_data_plt_arm): Forward declaration for new
+	* gold/arm.cc (Output_data_plt_arm): Forward declaration for new
 	template class.
 	(class Target_arm): Update comment.
 	(Target_arm::Target_arm): Initialize new data members GOT_,
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gold/icf.cc binutils-2.26-avr/gold/icf.cc
--- binutils-2.26.1-src/gold/icf.cc	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/gold/icf.cc	2016-11-16 03:51:00.000000000 -0800
@@ -213,45 +213,6 @@
     }
 }
 
-// For SHF_MERGE sections that use REL relocations, the addend is stored in
-// the text section at the relocation offset.  Read  the addend value given
-// the pointer to the addend in the text section and the addend size.
-// Update the addend value if a valid addend is found.
-// Parameters:
-// RELOC_ADDEND_PTR   : Pointer to the addend in the text section.
-// ADDEND_SIZE        : The size of the addend.
-// RELOC_ADDEND_VALUE : Pointer to the addend that is updated.
-
-inline void
-get_rel_addend(const unsigned char* reloc_addend_ptr,
-	       const unsigned int addend_size,
-	       uint64_t* reloc_addend_value)
-{
-  switch (addend_size)
-    {
-    case 0:
-      break;
-    case 1:
-      *reloc_addend_value =
-        read_from_pointer<8>(reloc_addend_ptr);
-      break;
-    case 2:
-      *reloc_addend_value =
-          read_from_pointer<16>(reloc_addend_ptr);
-      break;
-    case 4:
-      *reloc_addend_value =
-        read_from_pointer<32>(reloc_addend_ptr);
-      break;
-    case 8:
-      *reloc_addend_value =
-        read_from_pointer<64>(reloc_addend_ptr);
-      break;
-    default:
-      gold_unreachable();
-    }
-}
-
 // This returns the buffer containing the section's contents, both
 // text and relocs.  Relocs are differentiated as those pointing to
 // sections that could be folded and those that cannot.  Only relocs
@@ -436,36 +397,58 @@
                   uint64_t entsize =
                     (it_v->first)->section_entsize(it_v->second);
 		  long long offset = it_a->first;
-		  // Handle SHT_RELA and SHT_REL addends, only one of these
-		  // addends exists.
-		  // Get the SHT_RELA addend.  For RELA relocations, we have
-		  // the addend from the relocation.
-		  uint64_t reloc_addend_value = it_a->second;
-
-		  // Handle SHT_REL addends.
-		  // For REL relocations, we need to fetch the addend from the
-		  // section contents.
+
+                  unsigned long long addend = it_a->second;
+                  // Ignoring the addend when it is a negative value.  See the 
+                  // comments in Merged_symbol_value::Value in object.h.
+                  if (addend < 0xffffff00)
+                    offset = offset + addend;
+
+		  // For SHT_REL relocation sections, the addend is stored in the
+		  // text section at the relocation offset.
+		  uint64_t reloc_addend_value = 0;
                   const unsigned char* reloc_addend_ptr =
 		    contents + static_cast<unsigned long long>(*it_o);
-
-		  // Update the addend value with the SHT_REL addend if
-		  // available.
-		  get_rel_addend(reloc_addend_ptr, *it_addend_size,
-				 &reloc_addend_value);
-
-		  // Ignore the addend when it is a negative value.  See the
-		  // comments in Merged_symbol_value::value in object.h.
-		  if (reloc_addend_value < 0xffffff00)
-		    offset = offset + reloc_addend_value;
+		  switch(*it_addend_size)
+		    {
+		      case 0:
+		        {
+                          break;
+                        }
+                      case 1:
+                        {
+                          reloc_addend_value =
+                            read_from_pointer<8>(reloc_addend_ptr);
+			  break;
+                        }
+                      case 2:
+                        {
+                          reloc_addend_value =
+                            read_from_pointer<16>(reloc_addend_ptr);
+			  break;
+                        }
+                      case 4:
+                        {
+                          reloc_addend_value =
+                            read_from_pointer<32>(reloc_addend_ptr);
+			  break;
+                        }
+                      case 8:
+                        {
+                          reloc_addend_value =
+                            read_from_pointer<64>(reloc_addend_ptr);
+			  break;
+                        }
+		      default:
+		        gold_unreachable();
+		    }
+		  offset = offset + reloc_addend_value;
 
                   section_size_type secn_len;
-
                   const unsigned char* str_contents =
                   (it_v->first)->section_contents(it_v->second,
                                                   &secn_len,
                                                   false) + offset;
-		  gold_assert (offset < (long long) secn_len);
-
                   if ((secn_flags & elfcpp::SHF_STRINGS) != 0)
                     {
                       // String merge section.
@@ -506,14 +489,10 @@
                     }
                   else
                     {
-                      // Use the entsize to determine the length to copy.
-		      uint64_t bufsize = entsize;
-		      // If entsize is too big, copy all the remaining bytes.
-		      if ((offset + entsize) > secn_len)
-			bufsize = secn_len - offset;
-                      buffer.append(reinterpret_cast<const
+                      // Use the entsize to determine the length.
+                      buffer.append(reinterpret_cast<const 
                                                      char*>(str_contents),
-                                    bufsize);
+                                    entsize);
                     }
 		  buffer.append("@");
                 }
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gprof/ChangeLog binutils-2.26-avr/gprof/ChangeLog
--- binutils-2.26.1-src/gprof/ChangeLog	2016-06-29 00:59:52.000000000 -0700
+++ binutils-2.26-avr/gprof/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -1,11 +1,3 @@
-2016-06-29  Tristan Gingold  <gingold@adacore.com>
-
-	* configure: Regenerate.
-
-2016-01-25  Tristan Gingold  <gingold@adacore.com>
-
-	* configure: Regenerate.
-
 2016-01-25  Tristan Gingold  <gingold@adacore.com>
 
 	* configure: Regenerate.
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/gprof/configure binutils-2.26-avr/gprof/configure
--- binutils-2.26.1-src/gprof/configure	2016-06-29 00:59:52.000000000 -0700
+++ binutils-2.26-avr/gprof/configure	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.64 for gprof 2.26.1.
+# Generated by GNU Autoconf 2.64 for gprof 2.26.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software
@@ -556,8 +556,8 @@
 # Identity of this package.
 PACKAGE_NAME='gprof'
 PACKAGE_TARNAME='gprof'
-PACKAGE_VERSION='2.26.1'
-PACKAGE_STRING='gprof 2.26.1'
+PACKAGE_VERSION='2.26'
+PACKAGE_STRING='gprof 2.26'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
@@ -1299,7 +1299,7 @@
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures gprof 2.26.1 to adapt to many kinds of systems.
+\`configure' configures gprof 2.26 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1370,7 +1370,7 @@
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of gprof 2.26.1:";;
+     short | recursive ) echo "Configuration of gprof 2.26:";;
    esac
   cat <<\_ACEOF
 
@@ -1476,7 +1476,7 @@
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-gprof configure 2.26.1
+gprof configure 2.26
 generated by GNU Autoconf 2.64
 
 Copyright (C) 2009 Free Software Foundation, Inc.
@@ -1841,7 +1841,7 @@
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by gprof $as_me 2.26.1, which was
+It was created by gprof $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   $ $0 $@
@@ -3649,7 +3649,7 @@
 
 # Define the identity of the package.
  PACKAGE='gprof'
- VERSION='2.26.1'
+ VERSION='2.26'
 
 
 cat >>confdefs.h <<_ACEOF
@@ -12706,7 +12706,7 @@
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by gprof $as_me 2.26.1, which was
+This file was extended by gprof $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -12770,7 +12770,7 @@
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_version="\\
-gprof config.status 2.26.1
+gprof config.status 2.26
 configured by $0, generated by GNU Autoconf 2.64,
   with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
Only in binutils-2.26-avr/gprof/po: .cvsignore
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/include/aout/ChangeLog binutils-2.26-avr/include/aout/ChangeLog
--- binutils-2.26.1-src/include/aout/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/include/aout/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -6,10 +6,6 @@
 
 	Update copyright years.
 
-2012-12-17  Nick Clifton  <nickc@redhat.com>
-
-	* hppa.h: Add copyright notice.
-
 2010-04-15  Nick Clifton  <nickc@redhat.com>
 
 	* adobe.h: Update copyright notice to use GPLv3.
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/include/ChangeLog binutils-2.26-avr/include/ChangeLog
--- binutils-2.26.1-src/include/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/include/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -30,6 +30,10 @@
 	* dwarf2.def (DW_AT_GNU_numerator, DW_AT_GNU_denominator): New
 	attributes.
 
+2015-09-26  James Bowman  <james.bowman@ftdichip.com>
+
+	* opcode/ft32.h: Add instruction macros FT32_*()
+
 2015-09-20  Rich Felker  <dalias@libc.org>
 
 	* bfdlink.h (struct bfd_link_info): Add "nointerp" field.
@@ -51,7 +55,7 @@
 
 2015-08-18  H.J. Lu  <hongjiu.lu@intel.com>
 
-	* bfdlink.h (output_type): New enum.
+	* include/bfdlink.h (output_type): New enum.
 	(bfd_link_executable): New macro.
 	(bfd_link_dll): Likewise.
 	(bfd_link_relocatable): Likewise.
@@ -67,6 +71,10 @@
 
 	* ansidecl.h (GCC_FINAL): New macro.
 
+2015-07-16  Jiong Wang  <jiong.wang@arm.com>
+
+	* elf/aarch64.h (R_AARCH64_P32_TLSLD_ADR_PREL21): New enumeration.
+
 2015-07-14  H.J. Lu  <hongjiu.lu@intel.com>
 
 	Sync with GCC
@@ -89,12 +97,25 @@
 	PR target/65261
 	* ansidecl.h (ATTRIBUTE_NO_SANITIZE_UNDEFINED): New macro.
 
+2015-07-09  Catherine Moore  <clm@codesourcery.com>
+
+	* elf/mips/mips.h (Val_GNU_MIPS_ABI_FP_NAN2008): New.
+
+2015-07-08  Pitchumani Sivanupandi <pitchumani.s@atmel.com>
+
+	* elf/avr.h: Add new 32 bit PC relative relocation.
+
+2015-06-26  Matthew Fortune  <matthew.fortune@imgtec.com>
+
+	* elf/mips.h (DT_MIPS_RLD_MAP_REL): New macro.
+
 2015-06-22  Nick Clifton  <nickc@redhat.com>
 
 	* dis-asm.h (struct disassemble_info): Add stop_vma field.
 
 2015-05-28  Catherine Moore  <clm@codesourcery.com>
 
+	include/
 	* bfdlink.h: Rename eh_frame_hdr to eh_frame_hdr_type.
 
 2015-05-22  Yunlian Jiang  <yunlian@google.com>
@@ -102,6 +123,10 @@
 	* libiberty.h (asprintf): Don't declare if HAVE_DECL_ASPRINTF is
 	not defined.
 
+2015-05-12  Jiong Wang  <jiong.wang@arm.com>
+
+	* elf/aarch64.h (R_AARCH64_P32_LD32_GOTPAGE_LO14): New enumeration.
+
 2015-05-01  H.J. Lu  <hongjiu.lu@intel.com>
 
 	Merge with gcc:
@@ -135,6 +160,11 @@
 	PR ld/pr17709
 	* bfdlink.h (bfd_link_info): Add extern_protected_data.
 
+2015-03-10  Matthew Wahab  <matthew.wahab@arm.com>
+
+	PR ld/16572
+	* elf/arm.h (EF_ARM_HASENTRY): Remove.
+
 2015-02-19  Pedro Alves  <palves@redhat.com>
 
 	* floatformat.h [__cplusplus]: Wrap in extern "C".
@@ -217,14 +247,31 @@
 	PR debug/63239
 	* dwarf2.def (DW_AT_GNU_deleted): New attribute.
 
+2014-11-21  Terry Guo  <terry.guo@arm.com>
+
+	* opcode/arm.h (FPU_VFP_EXT_ARMV8xD): New macro.
+	(FPU_VFP_V5D16): Likewise.
+	(FPU_VFP_V5_SP_D16): Likewise.
+	(FPU_ARCH_VFP_V5D16): Likewise.
+	(FPU_ARCH_VFP_V5_SP_D16): Likewise.
+
 2014-11-18  Igor Zamyatin  <igor.zamyatin@intel.com>
 
 	* bfdlink.h (struct bfd_link_info): Add bndplt.
 
+2014-10-30  Andrew Pinski  <apinski@cavium.com>
+
+	* elf/mips.h (AFL_EXT_OCTEON3): Define.
+	INSN_OCTEON3, CPU_OCTEON3): Define.
+
 2014-10-28  Yury Gribov  <y.gribov@samsung.com>
 
 	* libiberty.h (strtol, strtoul, strtoll, strtoull): New prototypes.
 
+2014-10-22  Matthew Fortune  <matthew.fortune@imgtec.com>
+
+	* elf/mips.h (AFL_ASE_MASK): Define.
+
 2014-10-15  David Malcolm  <dmalcolm@redhat.com>
 
 	* libiberty.h (choose_tmpdir): New prototype.
@@ -256,6 +303,28 @@
 
 	* bfdlink.h (struct bfd_link_info): Add lto_plugin_active.
 
+2014-07-29  Matthew Fortune  <matthew.fortune@imgtec.com>
+
+	* elf/mips.h (PT_MIPS_ABIFLAGS, SHT_MIPS_ABIFLAGS): Define.
+	(Val_GNU_MIPS_ABI_FP_OLD_64): Rename from Val_GNU_MIPS_ABI_FP_64.
+	(Val_GNU_MIPS_ABI_FP_64): Redefine.
+	(Val_GNU_MIPS_ABI_FP_XX): Define.
+	(Elf_External_ABIFlags_v0, Elf_Internal_ABIFlags_v0): New structures.
+	(AFL_REG_NONE, AFL_REG_32, AFL_REG_64, AFL_REG_128): Define.
+	(AFL_ASE_DSP, AFL_ASE_DSPR2, AFL_ASE_EVA, AFL_ASE_MCU): Likewise.
+	(AFL_ASE_MDMX, AFL_ASE_MIPS3D, AFL_ASE_MT, AFL_ASE_SMARTMIPS): Likewise.
+	(AFL_ASE_VIRT, AFL_ASE_MSA, AFL_ASE_MIPS16): Likewise.
+	(AFL_ASE_MICROMIPS, AFL_ASE_XPA): Likewise.
+	(AFL_EXT_XLR, AFL_EXT_OCTEON2, AFL_EXT_OCTEONP): Likewise.
+	(AFL_EXT_LOONGSON_3A, AFL_EXT_OCTEON, AFL_EXT_5900): Likewise.
+	(AFL_EXT_4650, AFL_EXT_4010, AFL_EXT_4100, AFL_EXT_3900): Likewise.
+	(AFL_EXT_10000, AFL_EXT_SB1, AFL_EXT_4111, AFL_EXT_4120): Likewise.
+	(AFL_EXT_5400, AFL_EXT_5500, AFL_EXT_LOONGSON_2E): Likewise.
+	(AFL_EXT_LOONGSON_2F): Likewise.
+	(bfd_mips_elf_swap_abiflags_v0_in): Prototype.
+	(bfd_mips_elf_swap_abiflags_v0_out): Likewise.
+	(bfd_mips_isa_ext): Likewise.
+
 2014-06-13  Alan Modra  <amodra@gmail.com>
 
 	* bfdlink.h (struct bfd_link_hash_table): Add hash_table_free field.
@@ -271,12 +340,20 @@
 
 2014-05-01  Steve Ellcey  <sellcey@mips.com>
 
-	* longlong.h: Import latest version from GCC tree.
+	* include/longlong.h: Import latest version from GCC tree.
+
+2014-04-23  Andrew Bennett  <andrew.bennett@imgtec.com>
+
+	* opcode/mips.h (ASE_XPA): New define.
 
 2014-04-22  Christian Svensson  <blue@cmd.nu>
 
 	* dis-asm.h: Remove openrisc and or32 support.  Add support for or1k.
 
+2014-04-10  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
+
+	* elf/avr.h: Add new DIFF relocs.
+
 2014-03-05  Alan Modra  <amodra@gmail.com>
 
 	Update copyright years.
@@ -309,6 +386,11 @@
 
 	* longlong.h: New file.
 
+2013-11-11  Catherine Moore  <clm@codesourcery.com>
+
+	* opcode/mips.h (INSN_LOAD_MEMORY_DELAY): Rename to...
+	(INSN_LOAD_MEMORY): ...this.
+
 2013-10-29  Marc Glisse  <marc.glisse@inria.fr>
 
 	PR tree-optimization/58689
@@ -319,6 +401,10 @@
 	xmalloc, xrealloc, xcalloc, xstrdup, xstrndup, xmemdup, pex_init):
 	Mark with attribute returns_nonnull.
 
+2013-10-22  Sterling Augustine  <saugustine@google.com>
+
+	* gdb/gdb-index.h: Merge from gdb tree.
+
 2013-10-10  Sean Keys <skeys@ipdatasys.com>
 
 	* xgate.h : Cleanup after opcode
@@ -338,6 +424,31 @@
 
 	* vtv-change-permission.h: New file.
 
+2013-08-05  Eric Botcazou  <ebotcazou@adacore.com>
+	    Konrad Eisele  <konrad@gaisler.com>
+
+	* opcode/sparc.h (sparc_opcode_arch_val): Add SPARC_OPCODE_ARCH_LEON.
+
+2013-06-08  Catherine Moore  <clm@codesourcery.com>
+
+	* opcode/mips.h (mips_opcode): Add ase field.
+	(INSN_ASE_MASK): Delete.
+	(INSN_DSP): Rename to ASE_DSP.  Provide new value.
+	(INSN_DSPR2): Rename to ASE_DSPR2.  Provide new value.
+	(INSN_MCU): Rename to ASE_MCU.  Provide new value.
+	(INSN_MDMX): Rename to ASE_MDMX.  Provide new value.
+	(INSN_MIPS3d): Rename to ASE_MIPS3D.  Provide new value.
+	(INSN_MT): Rename to ASE_MT.  Provide new value.
+	(INSN_SMARTMIPS): Rename to ASE_SMARTMIPS.  Provide new value.
+	(INSN_VIRT): Rename to ASE_VIRT.  Provide new value.
+	(INSN_VIRT64): Rename to ASE_VIRT64.  Provide new value.
+	(opcode_is_member): Add ase argument.  Check ase.
+
+2013-05-06  Paul Brook  <paul@codesourcery.com>
+
+	include/elf/
+	* mips.h (R_MIPS_PC32): Update comment.
+
 2013-04-03  Jason Merrill  <jason@redhat.com>
 
 	Demangle C++11 ref-qualifier.
@@ -345,6 +456,20 @@
 	DEMANGLE_COMPONENT_REFERENCE_THIS,
 	DEMANGLE_COMPONENT_RVALUE_REFERENCE_THIS.
 
+2013-03-12  Sebastian Huber <sebastian.huber@embedded-brains.de>
+
+	* opcode/nios2.h: Edit comment.
+
+2013-03-11  Sebastian Huber <sebastian.huber@embedded-brains.de>
+
+	* opcode/nios2.h (OPX_WRPRS): New define.
+	(OP_MATCH_WRPRS): Likewise.
+
+2013-03-11  Sebastian Huber <sebastian.huber@embedded-brains.de>
+
+	* opcode/nios2.h (OP_RDPRS): New define.
+	(OP_MATCH_RDPRS): Likewise.
+
 2013-03-01  Cary Coutant  <ccoutant@google.com>
 
 	* dwarf2.h (enum dwarf_sect): New enum type.
@@ -391,6 +516,12 @@
 	* fopen-bin.h: Likewise.
 	* fopen-same.h: Likewise.
 	* fopen-vms.h: Likewise.
+	* aout/hppa.h: Likewise.
+	* opcode/tahoe.h: Likewise.
+
+2012-12-11  Edgar E. Iglesias <edgar.iglesias@gmail.com>
+
+	* elf/microblaze.h: Add TLS relocs to START_RELOC_NUMBERS
 
 2012-11-09  Jason Merrill  <jason@redhat.com>
 
@@ -439,6 +570,14 @@
 	PR other/54411
 	* objalloc.h (objalloc_alloc): Do not use fast path on wraparound.
 
+2012-09-27  Anthony Green  <green@moxielogic.com>
+
+	* opcode/moxie.h (MOXIE_BAD): New define.
+
+2012-09-12  Chris Schlumberger-Socha  <chris.schlumberger-socha@arm.com>
+
+	* elf/aarch64.h (R_AARCH64_GOT_LD_PREL19): New reloc.
+
 2012-09-06  Cary Coutant  <ccoutant@google.com>
 
 	* dwarf2.def: Edit comment.
@@ -453,6 +592,30 @@
 	(tv_allow_unique_segment_for_sections): New member.
 	(tv_unique_segment_for_sections): New member.
 
+2012-08-24  Matthew Gretton-Dann  <matthew.gretton-dann@arm.com>
+
+	* opcode/arm.h (ARM_CPU_IS_ANY): New define.
+
+2012-08-24  Matthew Gretton-Dann  <matthew.gretton-dann@arm.com>
+
+	* elf/arm.h (TAG_CPU_ARCH_V8): New define.
+	(MAX_TAG_CPU_ARCH): Update.
+	* opcode/arm.h (ARM_EXT_V8): New define.
+	(FPU_VFP_EXT_ARMV8): Likewise.
+	(FPU_NEON_EXT_ARMV8): Likewise.
+	(FPU_CRYPTO_EXT_ARMV8): Likewise.
+	(ARM_AEXT_V8A): Likewise.
+	(FPU_VFP_ARMV8): Likwise.
+	(FPU_NEON_ARMV8): Likewise.
+	(FPU_CRYPTO_ARMV8): Likewise.
+	(FPU_ARCH_VFP_ARMV8): Likewise.
+	(FPU_ARCH_NEON_VFP_ARMV8): Likewise.
+	(FPU_ARCH_CRYPTO_NEON_VFP_ARMV8): Likewise.
+	(ARM_ARCH_V8A): Likwise.
+	(ARM_ARCH_V8A_FP): Likewise.
+	(ARM_ARCH_V8A_SIMD): Likewise.
+	(ARM_ARCH_V8A_CRYPTO): Likewise.
+
 2012-08-13  Ian Bolton  <ian.bolton@arm.com>
 	    Laurent Desnogues  <laurent.desnogues@arm.com>
 	    Jim MacArthur  <jim.macarthur@arm.com>
@@ -468,6 +631,10 @@
 	(print_aarch64_disassembler_options): New declaration.
 	(aarch64_symbol_is_valid): New declaration.
 
+2012-08-02  Sean Keys  <skeys@ipdatasys.com>
+
+	* elf/m68hc11.h: #define E_M68HC11_NO_BANK_WARNING 0x000000200
+
 2012-07-24  Stephan McCamant  <smcc@cs.berkeley.edu>
 	    Dr David Alan Gilbert  <dave@treblig.org>
 
@@ -479,6 +646,15 @@
 	* filenames.h: #include "hashtab.h".
 	(filename_hash, filename_eq): Declare.
 
+2012-07-13  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>
+
+	* elf/s390.h (START_RELOC_NUMBERS): Define R_390_IRELATIVE reloc.
+
+2012-07-05  Sean Keys  <skeys@ipdatasys.com>
+
+	* opcode/xgate.h: Changed the format string for mode
+	XGATE_OP_DYA_MON.
+
 2012-06-18  Doug Evans  <dje@google.com>
 
 	* dwarf2.def (DW_OP): Add DW_OP_GNU_const_index.
@@ -548,6 +724,11 @@
 	(get_DW_OP_name, get_DW_ATE_name): Declare.
 	* dwarf2.def: New file, from dwarf2.h.
 
+2012-04-12  David S. Miller  <davem@davemloft.net>
+
+	* elf/sparc.h (R_SPARC_WDISP10): New reloc.
+	* opcode/sparc.h: Define '=' as generating R_SPARC_WDISP10.
+
 2012-04-10  Tristan Gingold  <gingold@adacore.com>
 
 	* splay-tree.h: Conditionnaly includes stdint.h and inttypes.h
@@ -565,7 +746,7 @@
 
 	Add DWARF attribute value for the "Borland fastcall" calling
 	convention.
-	* dwarf2.h: Add DW_CC_GNU_borland_fastcall_i386 constant.
+	* elf/dwarf2.h: Add DW_CC_GNU_borland_fastcall_i386 constant.
 
 2012-01-31  H.J. Lu  <hongjiu.lu@intel.com>
 
@@ -868,6 +1049,14 @@
 
 	* libiberty.h (setproctitle): Add prototype.
 
+2010-09-29  Bernd Schmidt  <bernds@codesourcery.com>
+
+	* opcode/tic6x-control-registers.h (tscl): Now read_write.
+
+2010-09-27  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>
+
+	* opcode/s390.h: Add S390_OPCODE_Z196 to enum s390_opcode_cpu_val.
+
 2010-09-23  Matthew Gretton-Dann  <matthew.gretton-dann@arm.com>
 
 	* arm.h (ARM_EXT_V6Z): Remove.
@@ -1070,7 +1259,7 @@
 
 2009-10-15  Jakub Jelinek  <jakub@redhat.com>
 
-	* dwarf2.h (DW_LANG_Python): Add comment that it is
+	* include/dwarf2.h (DW_LANG_Python): Add comment that it is
 	a DWARF 4 addition.
 
 2009-10-14  Alan Modra  <amodra@bigpond.net.au>
@@ -1159,6 +1348,16 @@
 	* bfdlink.h (struct bfd_link_hash_common_entry): Move to top
 	level.
 
+2009-09-04  Jie Zhang  <jie.zhang@analog.com>
+
+	* opcode/bfin.h (PseudoDbg_Assert): Add bits_grp and mask_grp.
+	(PseudoDbg_Assert_grp_bits, PseudoDbg_Assert_grp_mask): Define.
+	(PseudoDbg_Assert_dbgop_bits, PseudoDbg_Assert_dbgop_mask,
+	PseudoDbg_Assert_dontcare_bits, PseudoDbg_Assert_dontcare_mask):
+	Adjust accordingly.
+	(init_PseudoDbg_Assert): Add PseudoDbg_Assert_grp_bits and
+	PseudoDbg_Assert_grp_mask.
+
 2009-08-06  Michael Eager <eager@eagercon.com>
 
 	* dis-asm.h: Decl print_insn_microblaze().
@@ -1319,6 +1518,10 @@
 	* demangle.h (enum demangle_component_type): Add
 	DEMANGLE_COMPONENT_PACK_EXPANSION.
 
+2008-09-24  Richard Henderson  <rth@redhat.com>
+
+	* elf/dwarf2.h (DW_OP_GNU_encoded_addr): New.
+
 2008-09-22 Rafael Espindola  <espindola@google.com>
 
 	* plugin-api.h (ld_plugin_status): Remove comma from the last item.
@@ -1347,17 +1550,32 @@
 
 	* bfdlink.h (bfd_generic_link_read_symbols): Declare.
 
+2008-08-08  Anatoly Sokolov  <aesok@post.ru>
+
+	* elf/avr.h (E_AVR_MACH_AVR25, E_AVR_MACH_AVR31,
+	E_AVR_MACH_AVR35, E_AVR_MACH_AVR51): Define.
+	(EF_AVR_MACH): Redefine to 0x7F.
+	* opcode/avr.h (AVR_ISA_TINY3, AVR_ISA_ALL, AVR_ISA_USB162): Remove.
+	(AVR_ISA_AVR3): Redefine.
+	(AVR_ISA_AVR1, AVR_ISA_AVR2, AVR_ISA_AVR31, AVR_ISA_AVR35,
+	AVR_ISA_AVR3_ALL, AVR_ISA_AVR4, AVR_ISA_AVR5, AVR_ISA_AVR51,
+	AVR_ISA_AVR6): Define.
+
 2008-07-12  Jie Zhang  <jie.zhang@analog.com>
 
 	Revert
 	2008-07-12  Jie Zhang  <jie.zhang@analog.com>
 	* bfdlink.h (struct bfd_link_info): Add sep_code member
 	variable.
+	* elf/bfin.h (EF_BFIN_CODE_IN_L1): Define.
+	(EF_BFIN_DATA_IN_L1): Define.
 
 2008-07-12  Jie Zhang  <jie.zhang@analog.com>
 
 	* bfdlink.h (struct bfd_link_info): Add sep_code member
 	variable.
+	* elf/bfin.h (EF_BFIN_CODE_IN_L1): Define.
+	(EF_BFIN_DATA_IN_L1): Define.
 
 2008-07-07  Stan Shebs  <stan@codesourcery.com>
 
@@ -1720,6 +1938,10 @@
 
 	* libiberty.h (strverscmp): Prototype.
 
+2005-06-17  Jakub Jelinek  <jakub@redhat.com>
+
+	* elf/external.h (GRP_ENTRY_SIZE): Define.
+
 2005-06-08  Zack Weinberg  <zack@codesourcery.com>
 
 	* dis-asm.h (get_arm_regnames): Update prototype.
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/include/elf/ChangeLog binutils-2.26-avr/include/elf/ChangeLog
--- binutils-2.26.1-src/include/elf/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/include/elf/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -58,18 +58,6 @@
 
 	* aarch64.h (R_AARCH64_P32_TLSLD_ADR_PAGE21): Define.
 
-2015-07-16  Jiong Wang  <jiong.wang@arm.com>
-
-	* aarch64.h (R_AARCH64_P32_TLSLD_ADR_PREL21): New enumeration.
-
-2015-07-09  Catherine Moore  <clm@codesourcery.com>
-
-	* mips.h (Val_GNU_MIPS_ABI_FP_NAN2008): New.
-
-2015-07-08  Pitchumani Sivanupandi <pitchumani.s@atmel.com>
-
-	* avr.h: Add new 32 bit PC relative relocation.
-
 2015-07-01  Sandra Loosemore  <sandra@codesourcery.com>
 	    Cesar Philippidis  <cesar@codesourcery.com>
 
@@ -93,19 +81,11 @@
 
 	* nios2.h (EF_NIOS2_ARCH_R1, EF_NIOS2_ARCH_R2): Define.
 
-2015-06-26  Matthew Fortune  <matthew.fortune@imgtec.com>
-
-	* mips.h (DT_MIPS_RLD_MAP_REL): New macro.
-
 2015-05-29  Roland McGrath  <mcgrathr@google.com>
 
 	* common.h (GNU_ABI_TAG_SYLLABLE): New macro.
 	(GNU_ABI_TAG_NACL): New macro.
 
-2015-05-12  Jiong Wang  <jiong.wang@arm.com>
-
-	* aarch64.h (R_AARCH64_P32_LD32_GOTPAGE_LO14): New enumeration.
-
 2015-05-11  H.J. Lu  <hongjiu.lu@intel.com>
 
 	* common.h (EM_486): Renamed to ...
@@ -153,11 +133,6 @@
 	(E_FLAG_RL78_CPU_MASK, E_FLAG_RL78_ANY_CPU, E_FLAG_RL78_G13
 	E_FLAG_RL78_G14): New flags.
 
-2015-03-10  Matthew Wahab  <matthew.wahab@arm.com>
-
-	PR ld/16572
-	* arm.h (EF_ARM_HASENTRY): Remove.
-
 2015-02-19  Marcus Shawcroft  <marcus.shawcroft@arm.com>
 
 	* aarch64.h (R_AARCH64_P32_TLSGD_ADR_PREL21): Add.
@@ -213,15 +188,6 @@
 
 	* x86-64.h (R_X86_64_GOTPLT64): Mark it obsolete.
 
-2014-10-30  Andrew Pinski  <apinski@cavium.com>
-
-	* mips.h (AFL_EXT_OCTEON3): Define.
-	(INSN_OCTEON3, CPU_OCTEON3): Define.
-
-2014-10-22  Matthew Fortune  <matthew.fortune@imgtec.com>
-
-	* mips.h (AFL_ASE_MASK): Define.
-
 2014-10-17  Jose E. Marchesi  <jose.marchesi@oracle.com>
 
 	* sparc.h (ELF_SPARC_HWCAP2_VIS3B): Documentation improved.
@@ -261,28 +227,6 @@
 
 	* rl78.h (RL78_RELAXA_MASK): New.  Relax types are enums, not bits
 
-2014-07-29  Matthew Fortune  <matthew.fortune@imgtec.com>
-
-	* mips.h (PT_MIPS_ABIFLAGS, SHT_MIPS_ABIFLAGS): Define.
-	(Val_GNU_MIPS_ABI_FP_OLD_64): Rename from Val_GNU_MIPS_ABI_FP_64.
-	(Val_GNU_MIPS_ABI_FP_64): Redefine.
-	(Val_GNU_MIPS_ABI_FP_XX): Define.
-	(Elf_External_ABIFlags_v0, Elf_Internal_ABIFlags_v0): New structures.
-	(AFL_REG_NONE, AFL_REG_32, AFL_REG_64, AFL_REG_128): Define.
-	(AFL_ASE_DSP, AFL_ASE_DSPR2, AFL_ASE_EVA, AFL_ASE_MCU): Likewise.
-	(AFL_ASE_MDMX, AFL_ASE_MIPS3D, AFL_ASE_MT, AFL_ASE_SMARTMIPS): Likewise.
-	(AFL_ASE_VIRT, AFL_ASE_MSA, AFL_ASE_MIPS16): Likewise.
-	(AFL_ASE_MICROMIPS, AFL_ASE_XPA): Likewise.
-	(AFL_EXT_XLR, AFL_EXT_OCTEON2, AFL_EXT_OCTEONP): Likewise.
-	(AFL_EXT_LOONGSON_3A, AFL_EXT_OCTEON, AFL_EXT_5900): Likewise.
-	(AFL_EXT_4650, AFL_EXT_4010, AFL_EXT_4100, AFL_EXT_3900): Likewise.
-	(AFL_EXT_10000, AFL_EXT_SB1, AFL_EXT_4111, AFL_EXT_4120): Likewise.
-	(AFL_EXT_5400, AFL_EXT_5500, AFL_EXT_LOONGSON_2E): Likewise.
-	(AFL_EXT_LOONGSON_2F): Likewise.
-	(bfd_mips_elf_swap_abiflags_v0_in): Prototype.
-	(bfd_mips_elf_swap_abiflags_v0_out): Likewise.
-	(bfd_mips_isa_ext): Likewise.
-
 2014-07-07  Barney Stratford  <barney_stratford@fastmail.fm>
 
 	* avr.h: Add R_AVR_PORT5 and R_AVR_PORT6.
@@ -308,10 +252,6 @@
 	* openrisc.h: Delete.
 	* or32.h: Delete.
 
-2014-04-10  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
-
-	* avr.h: Add new DIFF relocs.
-
 2014-03-05  Alan Modra  <amodra@gmail.com>
 
 	Update copyright years.
@@ -455,10 +395,6 @@
 	(EM_INTEL208): Likewise.
 	(EM_INTEL209): Likewise.
 
-2013-05-06  Paul Brook  <paul@codesourcery.com>
-
-	* mips.h (R_MIPS_PC32): Update comment.
-
 2013-05-02  Nick Clifton  <nickc@redhat.com>
 
 	* msp430.h: Add MSP430X relocs.
@@ -507,10 +443,6 @@
 	* mips.h: Add MIPS machine variant number for r5900 which is
 	compatible with old Playstation 2 software.
 
-2012-12-11  Edgar E. Iglesias <edgar.iglesias@gmail.com>
-
-	* microblaze.h: Add TLS relocs to START_RELOC_NUMBERS
-
 2012-11-16  H.J. Lu  <hongjiu.lu@intel.com>
 
 	* common.h (DF_1_CONLFAT): Renamed to ...
@@ -545,17 +477,13 @@
 
 2012-10-30  Steve McIntyre  <steve.mcintyre@linaro.org>
 
-	* arm.h (EF_ARM_ABI_FLOAT_SOFT): New define.
+	* elf/arm.h (EF_ARM_ABI_FLOAT_SOFT): New define.
 	(EF_ARM_ABI_FLOAT_HARD): Likewise.
 
 2012-10-23  Tom Tromey  <tromey@redhat.com>
 
 	* common.h (NT_SIGINFO, NT_FILE): New defines.
 
-2012-09-12  Chris Schlumberger-Socha  <chris.schlumberger-socha@arm.com>
-
-	* aarch64.h (R_AARCH64_GOT_LD_PREL19): New reloc.
-
 2012-08-27  Walter Lee  <walt@tilera.com>
 
 	* tilegx.h (R_TILEGX_IMM16_X0_HW0_PLT_PCREL): New relocation.
@@ -573,11 +501,6 @@
 	(R_TILEGX_IMM16_X0_HW2_LAST_PLT_PCREL	): Ditto.
 	(R_TILEGX_IMM16_X1_HW2_LAST_PLT_PCREL): Ditto.
 
-2012-08-24  Matthew Gretton-Dann  <matthew.gretton-dann@arm.com>
-
-	* arm.h (TAG_CPU_ARCH_V8): New define.
-	(MAX_TAG_CPU_ARCH): Update.
-
 2012-08-13  Ian Bolton  <ian.bolton@arm.com>
 	    Laurent Desnogues  <laurent.desnogues@arm.com>
 	    Jim MacArthur  <jim.macarthur@arm.com>
@@ -593,14 +516,6 @@
 	* common.h (EM_res183): Rename to EM_AARCH64.
 	(EM_res184): Rename to EM_ARM184.
 
-2012-08-02  Sean Keys  <skeys@ipdatasys.com>
-
-	* m68hc11.h: #define E_M68HC11_NO_BANK_WARNING 0x000000200
-
-2012-07-13  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>
-
-	* s390.h (START_RELOC_NUMBERS): Define R_390_IRELATIVE reloc.
-
 2012-06-28  Iain Sandoe  <iain@codesourcery.com>
 
 	* common.h (AT_L1I_CACHESHAPE, AT_L1D_CACHESHAPE,
@@ -650,7 +565,7 @@
 2012-05-11  Georg-Johann Lay  <avr@gjlay.de
 
 	PR target/13503
-	* avr.h (RELOC_NUMBERS): Add values for R_AVR_8_LO8,
+	* elf/avr.h (RELOC_NUMBERS): Add values for R_AVR_8_LO8,
 	R_AVR_8_HI8, R_AVR_8_HHI8.
 
 2012-05-03  Sean Keys  <skeys@ipdatasys.com>
@@ -662,10 +577,6 @@
 	* sparc.h: Add new ELF_SPARC_HWCAP_* defines for crypto,
 	pause, and compare-and-branch instructions.
 
-2012-04-12  David S. Miller  <davem@davemloft.net>
-
-	* sparc.h (R_SPARC_WDISP10): New reloc.
-
 2012-03-07  Nick Clifton  <nickc@redhat.com>
 
 	* mn10300.h (elf_mn10300_reloc_type): Add R_MN10300_TLS_GD,
@@ -1185,13 +1096,13 @@
 
 2009-08-09  Michael Eager <eager@eagercon.com>
 
-	* common.h: Define EM_resnnn reserved values. Add EM_AVR32,
+	* elf/common.h: Define EM_resnnn reserved values. Add EM_AVR32,
 	EM_STM8, EM_TILE64, EM_TILEPRO.  Change EM_MICROBLAZE.
 
 2009-08-06  Michael Eager <eager@eagercon.com>
 
-	* common.h: Define EM_MICROBLAZE & EM_MICROBLAZE_OLD.
-	* microblaze.h: New reloc definitions.
+	* elf/common.h: Define EM_MICROBLAZE & EM_MICROBLAZE_OLD.
+	* elf/microblaze.h: New reloc definitions.
 
 2009-07-30  Alan Modra  <amodra@bigpond.net.au>
 
@@ -1260,7 +1171,7 @@
 
 2009-04-24  Cary Coutant  <ccoutant@google.com>
 
-	* dwarf2.h (DW_LNE_set_discriminator): New enum value.
+	 * dwarf2.h (DW_LNE_set_discriminator): New enum value.
 
 2009-04-15  Anthony Green  <green@moxielogic.com>
 
@@ -1392,22 +1303,12 @@
 	(R_CRIS_32_GOT_TPREL, R_CRIS_16_GOT_TPREL, R_CRIS_32_TPREL)
 	(R_CRIS_16_TPREL): New relocations.
 
-2008-09-24  Richard Henderson  <rth@redhat.com>
-
-	* dwarf2.h (DW_OP_GNU_encoded_addr): New.
-
 2008-08-20  Bob Wilson  <bob.wilson@acm.org>
 
 	* xtensa.h (R_XTENSA_TLSDESC_FN, R_XTENSA_TLSDESC_ARG)
 	(R_XTENSA_TLS_DTPOFF, R_XTENSA_TLS_TPOFF, R_XTENSA_TLS_FUNC)
 	(R_XTENSA_TLS_ARG, R_XTENSA_TLS_CALL): New.
 
-2008-08-08  Anatoly Sokolov  <aesok@post.ru>
-
-	* avr.h (E_AVR_MACH_AVR25, E_AVR_MACH_AVR31,
-	E_AVR_MACH_AVR35, E_AVR_MACH_AVR51): Define.
-	(EF_AVR_MACH): Redefine to 0x7F.
-
 2008-08-08  Richard Sandiford  <rdsandiford@googlemail.com>
 	    Daniel Jacobowitz  <dan@codesourcery.com>
 	    Catherine Moore  <clm@codesourcery.com>
@@ -1428,18 +1329,6 @@
 
 	* common.h: Define NT_PPC_VSX.
 
-2008-07-12  Jie Zhang  <jie.zhang@analog.com>
-
-	Revert
-	2008-07-12  Jie Zhang  <jie.zhang@analog.com>
-	* bfin.h (EF_BFIN_CODE_IN_L1): Define.
-	(EF_BFIN_DATA_IN_L1): Define.
-
-2008-07-12  Jie Zhang  <jie.zhang@analog.com>
-
-	* bfin.h (EF_BFIN_CODE_IN_L1): Define.
-	(EF_BFIN_DATA_IN_L1): Define.
-
 2008-07-10  Richard Sandiford  <rdsandiford@googlemail.com>
 
 	* mips.h (ELF_ST_IS_MIPS16, ELF_ST_SET_MIPS16): New macros.
@@ -1477,7 +1366,7 @@
 
 2008-04-16  David S. Miller  <davem@davemloft.net>
 
-	* sparc.h (R_SPARC_GOTDATA_HIX22,
+	* elf/sparc.h (R_SPARC_GOTDATA_HIX22,
 	R_SPARC_GOTDATA_LOX10, R_SPARC_GOTDATA_OP_HIX22,
 	R_SPARC_GOTDATA_OP_LOX10, R_SPARC_GOTDATA_OP,
 	R_SPARC_H34, R_SPARC_SIZE32, R_SPARC_SIZE64): New relocs.
@@ -1800,7 +1689,6 @@
 
 2006-05-24  Carlos O'Donell  <carlos@systemhalted.org>
 	    Randolph Chung  <randolph@tausq.org>
-
 	* hppa.h (R_PARISC_TLS_GD21L, R_PARISC_TLS_GD14R, R_PARISC_TLS_GDCALL,
 	R_PARISC_TLS_LDM21L, R_PARISC_TLS_LDM14R, R_PARISC_TLS_LDMCALL,
 	R_PARISC_TLS_LDO21L, R_PARISC_TLS_LDO14R, R_PARISC_TLS_DTPMOD32,
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/include/gdb/ChangeLog binutils-2.26-avr/include/gdb/ChangeLog
--- binutils-2.26.1-src/include/gdb/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/include/gdb/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -51,13 +51,9 @@
 
 	* section-scripts.h: New file.
 
-2013-10-22  Sterling Augustine  <saugustine@google.com>
-
-	* gdb-index.h: Merge from gdb tree.
-
 2013-03-15  Steve Ellcey  <sellcey@mips.com>
 
-	* remote-sim.h (sim_command_completer): Make char arguments const.
+	* gdb/remote-sim.h (sim_command_completer): Make char arguments const.
 
 2013-01-01  Joel Brobecker  <brobecker@adacore.com>
 
@@ -222,7 +218,7 @@
 
 2003-06-10  Corinna Vinschen  <vinschen@redhat.com>
 
-	* fileio.h: New file.
+	* gdb/fileio.h: New file.
 
 2003-05-07  Andrew Cagney  <cagney@redhat.com>
 
@@ -260,7 +256,7 @@
 2002-07-29  Andrey Volkov  <avolkov@transas.com>
 
 	* sim-h8300.h: Rename all enums from H8300_ to SIM_H8300_
-	prefix.
+	 prefix.
 
 2002-07-23  Andrey Volkov  <avolkov@transas.com>
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/include/opcode/ChangeLog binutils-2.26-avr/include/opcode/ChangeLog
--- binutils-2.26.1-src/include/opcode/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/include/opcode/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -95,10 +95,10 @@
 	* aarch64.h [__cplusplus]: Wrap in extern "C".
 
 2015-10-07  Claudiu Zissulescu  <claziss@synopsys.com>
-	    Cupertino Miranda  <cmiranda@synopsys.com>
+            Cupertino Miranda  <cmiranda@synopsys.com>
 
-	* arc-func.h: New file.
-	* arc.h: Likewise.
+        * arc-func.h: New file.
+        * arc.h: Likewise.
 
 2015-10-02  Yao Qi  <yao.qi@linaro.org>
 
@@ -115,10 +115,6 @@
 	(S390_INSTR_FLAG_VX): New flag.
 	(S390_INSTR_FLAG_FACILITY_MASK): New flag mask.
 
-2015-09-26  James Bowman  <james.bowman@ftdichip.com>
-
-	* ft32.h: Add instruction macros FT32_*()
-
 2015-09-23  Nick Clifton  <nickc@redhat.com>
 
 	* ppc.h (PPC_OPSHIFT_INV): Use an unsigned constant when left
@@ -262,14 +258,6 @@
 	(NIOS2_INSN_ORI, NIOS2_INSN_XORI): Delete.
 	(NIOS2_INSN_OPTARG): Renumber.
 
-2014-11-21  Terry Guo  <terry.guo@arm.com>
-
-	* arm.h (FPU_VFP_EXT_ARMV8xD): New macro.
-	(FPU_VFP_V5D16): Likewise.
-	(FPU_VFP_V5_SP_D16): Likewise.
-	(FPU_ARCH_VFP_V5D16): Likewise.
-	(FPU_ARCH_VFP_V5_SP_D16): Likewise.
-
 2014-11-06  Sandra Loosemore  <sandra@codesourcery.com>
 
 	* nios2.h (nios2_find_opcode_hash): Add mach parameter to
@@ -359,7 +347,7 @@
 	* mips.h (mips_operand_type): Add new entries: OP_SAME_RS_RT,
 	OP_CHECK_PREV and OP_NON_ZERO_REG.  Add descriptions for the MIPS R6
 	instruction arguments: -a, -b, -d, -s, -t, -u, -v, -w, -x, -y, -A, -B,
-	+I, +O, +R, +:, +\, +", +;
+	 +I, +O, +R, +:, +\, +", +;
 	(mips_check_prev_operand): New struct.
 	(INSN2_FORBIDDEN_SLOT): New define.
 	(INSN_ISA32R6): New define.
@@ -437,10 +425,6 @@
 
 	* mips.h (mips_isa_table): Avoid hard-coding INSN_ISA* values.
 
-2014-04-23  Andrew Bennett  <andrew.bennett@imgtec.com>
-
-	* mips.h (ASE_XPA): New define.
-
 2014-04-22  Christian Svensson  <blue@cmd.nu>
 
 	* or32.h: Delete.
@@ -488,11 +472,6 @@
 	* aarch64.h (aarch64_sys_reg_readonly_p): New declaration.
 	(aarch64_sys_reg_writeonly_p): Ditto.
 
-2013-11-11  Catherine Moore  <clm@codesourcery.com>
-
-	* mips.h (INSN_LOAD_MEMORY_DELAY): Rename to...
-	(INSN_LOAD_MEMORY): ...this.
-
 2013-11-05  Yufeng Zhang  <yufeng.zhang@arm.com>
 
 	* aarch64.h (aarch64_sys_reg): New typedef.
@@ -535,11 +514,6 @@
 	* mips.h (OP_OPTIONAL_REG): New mips_operand_type.
 	(mips_optional_operand_p): New function.
 
-2013-08-05  Eric Botcazou  <ebotcazou@adacore.com>
-	    Konrad Eisele  <konrad@gaisler.com>
-
-	* sparc.h (sparc_opcode_arch_val): Add SPARC_OPCODE_ARCH_LEON.
-
 2013-08-04  Jrgen Urban  <JuergenUrban@gmx.de>
 	    Richard Sandiford  <rdsandiford@googlemail.com>
 
@@ -703,21 +677,6 @@
 
 	* nios2.h (OP_MATCH_ERET): Correct eret encoding.
 
-2013-06-08  Catherine Moore  <clm@codesourcery.com>
-
-	* mips.h (mips_opcode): Add ase field.
-	(INSN_ASE_MASK): Delete.
-	(INSN_DSP): Rename to ASE_DSP.  Provide new value.
-	(INSN_DSPR2): Rename to ASE_DSPR2.  Provide new value.
-	(INSN_MCU): Rename to ASE_MCU.  Provide new value.
-	(INSN_MDMX): Rename to ASE_MDMX.  Provide new value.
-	(INSN_MIPS3d): Rename to ASE_MIPS3D.  Provide new value.
-	(INSN_MT): Rename to ASE_MT.  Provide new value.
-	(INSN_SMARTMIPS): Rename to ASE_SMARTMIPS.  Provide new value.
-	(INSN_VIRT): Rename to ASE_VIRT.  Provide new value.
-	(INSN_VIRT64): Rename to ASE_VIRT64.  Provide new value.
-	(opcode_is_member): Add ase argument.  Check ase.
-
 2013-05-22  Jrgen Urban  <JuergenUrban@gmx.de>
 
 	* mips.h (M_LQC2_AB, M_SQC2_AB): New macros.
@@ -782,20 +741,6 @@
 	* tic6x-opcode-table.h: Modify absdp, dpint, dpsp, dptrunc, rcpdp
 	and rsqrdp opcodes to use the new field coding types.
 
-2013-03-12  Sebastian Huber <sebastian.huber@embedded-brains.de>
-
-	* nios2.h: Edit comment.
-
-2013-03-11  Sebastian Huber <sebastian.huber@embedded-brains.de>
-
-	* nios2.h (OPX_WRPRS): New define.
-	(OP_MATCH_WRPRS): Likewise.
-
-2013-03-11  Sebastian Huber <sebastian.huber@embedded-brains.de>
-
-	* nios2.h (OP_RDPRS): New define.
-	(OP_MATCH_RDPRS): Likewise.
-
 2013-03-11  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>
 
 	* arm.h (CRC_EXT_ARMV8): New constant.
@@ -853,10 +798,6 @@
 	(make_instruction,match_opcode): Added function prototypes.
 	(cr16_words,cr16_allWords,cr16_currInsn): Declare as extern.
 
-2012-12-17  Nick Clifton  <nickc@redhat.com>
-
-	* tahoe.h: Add copyright notice.
-
 2012-11-23  Alan Modra  <amodra@gmail.com>
 
 	* ppc.h (ppc_parse_cpu): Update prototype.
@@ -870,36 +811,10 @@
 
 	* s390.h (s390_opcode_cpu_val): Add S390_OPCODE_ZEC12.
 
-2012-09-27  Anthony Green  <green@moxielogic.com>
-
-	* moxie.h (MOXIE_BAD): New define.
-
 2012-09-04  Sergey A. Guriev <sergey.a.guriev@intel.com>
 
 	* ia64.h (ia64_opnd): Add new operand types.
 
-2012-08-24  Matthew Gretton-Dann  <matthew.gretton-dann@arm.com>
-
-	* arm.h (ARM_CPU_IS_ANY): New define.
-
-2012-08-24  Matthew Gretton-Dann  <matthew.gretton-dann@arm.com>
-
-	* arm.h (ARM_EXT_V8): New define.
-	(FPU_VFP_EXT_ARMV8): Likewise.
-	(FPU_NEON_EXT_ARMV8): Likewise.
-	(FPU_CRYPTO_EXT_ARMV8): Likewise.
-	(ARM_AEXT_V8A): Likewise.
-	(FPU_VFP_ARMV8): Likwise.
-	(FPU_NEON_ARMV8): Likewise.
-	(FPU_CRYPTO_ARMV8): Likewise.
-	(FPU_ARCH_VFP_ARMV8): Likewise.
-	(FPU_ARCH_NEON_VFP_ARMV8): Likewise.
-	(FPU_ARCH_CRYPTO_NEON_VFP_ARMV8): Likewise.
-	(ARM_ARCH_V8A): Likwise.
-	(ARM_ARCH_V8A_FP): Likewise.
-	(ARM_ARCH_V8A_SIMD): Likewise.
-	(ARM_ARCH_V8A_CRYPTO): Likewise.
-
 2012-08-21  David S. Miller  <davem@davemloft.net>
 
 	* sparc.h (F3F4): New macro.
@@ -944,10 +859,6 @@
 
 	* mips.h: Fix a typo in description.
 
-2012-07-05  Sean Keys  <skeys@ipdatasys.com>
-
-	* xgate.h: Changed the format string for mode XGATE_OP_DYA_MON.
-
 2012-06-07  Georg-Johann Lay  <avr@gjlay.de>
 
 	* avr.h: (AVR_ISA_XCH): New define.
@@ -995,10 +906,6 @@
 	HWCAP_SHA256, HWCAP_SHA512, HWCAP_MPMUL, HWCAP_MONT, HWCAP_PAUSE,
 	HWCAP_CBCOND, HWCAP_CRC32): New defines.
 
-2012-04-12  David S. Miller  <davem@davemloft.net>
-
-	* sparc.h: Define '=' as generating R_SPARC_WDISP10.
-
 2012-03-10  Edmar Wienskoski  <edmar@freescale.com>
 
 	* ppc.h: Add PPC_OPCODE_ALTIVEC2, PPC_OPCODE_E6500, PPC_OPCODE_TMR.
@@ -1368,14 +1275,6 @@
 	* cgen.h (CGEN_ATTR, CGEN_ATTR_TYPE): Rename bool attribute to bool_.
 	(CGEN_ATTR_BOOLS, CGEN_ATTR_CGEN_INSN_ALIAS_VALUE): Likewise.
 
-2010-09-29  Bernd Schmidt  <bernds@codesourcery.com>
-
-	* tic6x-control-registers.h (tscl): Now read_write.
-
-2010-09-27  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>
-
-	* s390.h: Add S390_OPCODE_Z196 to enum s390_opcode_cpu_val.
-
 2010-09-23  Matthew Gretton-Dann  <matthew.gretton-dann@arm.com>
 
 	* arm.h (ARM_EXT_VIRT): New define.
@@ -1407,16 +1306,6 @@
 
 	* bfin.h: Strip trailing whitespace.
 
-2009-09-04  Jie Zhang  <jie.zhang@analog.com>
-
-	* bfin.h (PseudoDbg_Assert): Add bits_grp and mask_grp.
-	(PseudoDbg_Assert_grp_bits, PseudoDbg_Assert_grp_mask): Define.
-	(PseudoDbg_Assert_dbgop_bits, PseudoDbg_Assert_dbgop_mask,
-	PseudoDbg_Assert_dontcare_bits, PseudoDbg_Assert_dontcare_mask):
-	Adjust accordingly.
-	(init_PseudoDbg_Assert): Add PseudoDbg_Assert_grp_bits and
-	PseudoDbg_Assert_grp_mask.
-
 2010-07-29  DJ Delorie  <dj@redhat.com>
 
 	* rx.h (RX_Operand_Type): Add TwoReg.
@@ -1469,7 +1358,7 @@
 
 2010-05-26  Catherine Moore  <clm@codesourcery.com>
 
-	* mips.h (INSN_MIPS16): Remove.
+	* opcode/mips.h (INSN_MIPS16): Remove.
 
 2010-04-21  Joseph Myers  <joseph@codesourcery.com>
 
@@ -1539,7 +1428,7 @@
 
 2010-02-08  Philipp Tomsich  <philipp.tomsich@theobroma-systems.com>
 
-	* ppc.h (PPC_OPCODE_TITAN): Define.
+	* opcode/ppc.h (PPC_OPCODE_TITAN): Define.
 
 2010-01-14  H.J. Lu  <hongjiu.lu@intel.com>
 
@@ -1663,7 +1552,7 @@
 
 2009-01-28  Doug Evans  <dje@google.com>
 
-	* i386.h: Add multiple inclusion protection.
+	* opcode/i386.h: Add multiple inclusion protection.
 	(EAX_REG_NUM,ECX_REG_NUM,EDX_REGNUM,EBX_REG_NUM,ESI_REG_NUM)
 	(EDI_REG_NUM): New macros.
 	(MODRM_MOD_FIELD,MODRM_REG_FIELD,MODRM_RM_FIELD): New macros.
@@ -1694,14 +1583,6 @@
 	* ia64.h (ia64_resource_specifier): Add IA64_RS_CR_IIB.  Update
 	IA64_RS_CR.
 
-2008-08-08  Anatoly Sokolov  <aesok@post.ru>
-
-	* avr.h (AVR_ISA_TINY3, AVR_ISA_ALL, AVR_ISA_USB162): Remove.
-	(AVR_ISA_AVR3): Redefine.
-	(AVR_ISA_AVR1, AVR_ISA_AVR2, AVR_ISA_AVR31, AVR_ISA_AVR35,
-	AVR_ISA_AVR3_ALL, AVR_ISA_AVR4, AVR_ISA_AVR5, AVR_ISA_AVR51,
-	AVR_ISA_AVR6): Define.
-
 2008-08-01  Peter Bergner  <bergner@vnet.ibm.com>
 
 	* ppc.h (PPC_OPCODE_VSX, PPC_OPERAND_VSR): New.
@@ -2158,7 +2039,7 @@
 2005-07-28  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>
 
 	PR gas/336
-	* hppa.h (pa_opcodes): Allow 0 immediates in PA 2.0 variants of pdtlb
+ 	* hppa.h (pa_opcodes): Allow 0 immediates in PA 2.0 variants of pdtlb
 	and pitlb.
 
 2005-07-27  Jan Beulich  <jbeulich@novell.com>
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/ChangeLog binutils-2.26-avr/ld/ChangeLog
--- binutils-2.26.1-src/ld/ChangeLog	2016-06-29 00:59:51.000000000 -0700
+++ binutils-2.26-avr/ld/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -1,453 +1,96 @@
-2016-06-29  Tristan Gingold  <gingold@adacore.com>
+2016-11-15  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
 
-	* configure: Regenerate.
-
-2016-06-14  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
-
-	Backport from master
-	2016-06-14  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
-
-	PR ld/20254
-	* testsuite/ld-avr/avr-prop-6.d: New test.
-	* testsuite/ld-avr/avr-prop-6.s: New test.
-
-2016-06-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-06-13  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/20244
-	* testsuite/ld-i386/i386.exp: Run pr20244-2a, pr20244-2b,
-	pr20244-2c and pr20244-2d.
-	* testsuite/ld-i386/no-plt.exp: Run pr20244-3a and pr20244-3b.
-	* testsuite/ld-i386/pr20244-2.s: New file.
-	* testsuite/ld-i386/pr20244-2a.d: Likewise.
-	* testsuite/ld-i386/pr20244-2b.d: Likewise.
-	* testsuite/ld-i386/pr20244-2c.d: Likewise.
-	* testsuite/ld-i386/pr20244-2d.d: Likewise.
-	* testsuite/ld-i386/pr20244-3a.c: Likewise.
-	* testsuite/ld-i386/pr20244-3b.S: Likewise.
-	* testsuite/ld-i386/pr20244-3c.S: Likewise.
-	* testsuite/ld-i386/pr20244-3d.S: Likewise.
-
-	2016-06-13  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* testsuite/ld-i386/i386.exp: Run ifunc-1a and ifunc-1b.
-	* testsuite/ld-i386/ifunc-1a.c: New file.
-	* testsuite/ld-i386/ifunc-1b.S: Likewise.
-	* testsuite/ld-i386/ifunc-1c.S: Likewise.
-	* testsuite/ld-i386/ifunc-1d.S: Likewise.
-
-2016-06-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-06-11  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/20244
-	* testsuite/ld-i386/i386.exp: Run pr20244-1a and pr20244-1b.
-	* testsuite/ld-i386/pr20244-1.s: New file.
-	* testsuite/ld-i386/pr20244-1a.d: Likewise.
-	* testsuite/ld-i386/pr20244-1b.d: Likewise.
-	* testsuite/ld-i386/pr20244-1c.d: Likewise.
-
-2016-06-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-06-08  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* testsuite/ld-i386/libno-plt-1b.dd: New file.
-	* testsuite/ld-i386/libno-plt-1b.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1a.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1a.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1b.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1b.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1c.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1c.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1d.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1d.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1e.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1e.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1f.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1f.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1g.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1g.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1h.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1h.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1i.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1i.rd: Likewise.
-	* testsuite/ld-i386/no-plt-1j.dd: Likewise.
-	* testsuite/ld-i386/no-plt-1j.rd: Likewise.
-	* testsuite/ld-i386/no-plt-check1a.S: Likewise.
-	* testsuite/ld-i386/no-plt-check1b.S: Likewise.
-	* testsuite/ld-i386/no-plt-extern1a.S: Likewise.
-	* testsuite/ld-i386/no-plt-extern1b.S: Likewise.
-	* testsuite/ld-i386/no-plt-func1.c: Likewise.
-	* testsuite/ld-i386/no-plt-main1.c: Likewise.
-	* testsuite/ld-i386/no-plt.exp: Likewise.
-	* testsuite/ld-i386/pass.out Likewise.
-
-2016-06-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-06-12  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* testsuite/ld-x86-64/libno-plt-1b.dd: Updated for x32.
-	* testsuite/ld-x86-64/libno-plt-1b.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1a.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1a.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1b.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1b.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1c.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1c.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1d.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1e.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1e.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1f.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1f.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1g.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1g.rd: Likewise.
-
-	2016-06-08  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* testsuite/ld-x86-64/no-plt-1a.rd: Support any relocation order.
-	* testsuite/ld-x86-64/no-plt-1b.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1c.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1d.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1e.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1f.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1g.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt.exp: Fix a typo.
-
-	2016-06-08  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* testsuite/ld-x86-64/libno-plt-1b.dd: Likewise.
-	* testsuite/ld-x86-64/libno-plt-1b.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1a.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1a.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1b.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1b.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1c.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1c.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1d.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1d.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1e.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1e.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1f.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1f.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1g.dd: Likewise.
-	* testsuite/ld-x86-64/no-plt-1g.rd: Likewise.
-	* testsuite/ld-x86-64/no-plt-check1.S: Likewise.
-	* testsuite/ld-x86-64/no-plt.exp: Likewise.
-	* testsuite/ld-x86-64/no-plt-extern1.S: Likewise.
-	* testsuite/ld-x86-64/no-plt-func1.c: Likewise.
-	* testsuite/ld-x86-64/no-plt-main1.c: Likewise.
-	* testsuite/ld-x86-64/pass.out Likewise.
-
-2016-06-13  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
-
-	Backport from master
-	2016-06-08  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
-
-	PR ld/20221
-	* testsuite/ld-avr/avr-prop-5.d: New.
-	* testsuite/ld-avr/avr-prop-5.s: New.
-
-2016-06-11  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-04-13  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19774
-	* testsuite/ld-x86-64/x86-64.exp: Link tmpdir/pr17689b.o before
-	tmpdir/pr17689.so, fix gotpcrel1 test and add more --as-needed
-	tests.
-
-	2016-03-07  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19774
-	* testsuite/ld-i386/i386.exp: Link tmpdir/pr18900.o before
-	tmpdir/pr18900.so and test --as-needed.  Link tmpdir/gotpc1.o
-	before tmpdir/got1d.so and test --as-needed.
-	* testsuite/ld-x86-64/x86-64.exp: Link tmpdir/pr18900.o before
-	tmpdir/pr18900.so and test --as-needed.
-
-	2016-03-06  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* testsuite/ld-i386/i386.exp: Link tmpdir/copyreloc-main.o
-	before tmpdir/copyreloc-lib.so and test --as-needed.
-	* testsuite/ld-x86-64/x86-64.exp: Likewise.
-
-2016-05-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-05-19  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/20117
-	* testsuite/ld-i386/i386.exp: Run pr20117.
-	* testsuite/ld-i386/pr20117.d: New file.
-	* testsuite/ld-i386/pr20117.s: Likewise.
-
-2016-05-18  Christophe Monat  <christophe.monat@st.com>
-
-	Backport from master
-	2016-05-09  Christophe Monat  <christophe.monat@st.com>
-	PR ld/20030
-	* testsuite/ld-arm/arm-elf.exp: Run new stm32l4xx-fix-vldm-dp
-	tests. Fix misnamed stm32l4xx-fix-all.
-	* testsuite/ld-arm/stm32l4xx-fix-vldm-dp.s: New tests for multiple
-	loads with DP registers.
-	* testsuite/ld-arm/stm32l4xx-fix-vldm-dp.d: New reference file.
-	* testsuite/ld-arm/stm32l4xx-fix-vldm.s: Add missing comment.
-	* testsuite/ld-arm/stm32l4xx-fix-all.s: Add tests for multiple
-	loads with DP registers.
-	* testsuite/ld-arm/stm32l4xx-fix-all.d: Update reference.
-
-2016-05-15  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-05-13  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/20093
-	* testsuite/ld-x86-64/pr20093-1.d: New file.
-	* testsuite/ld-x86-64/pr20093-1.s: Likewise.
-	* testsuite/ld-x86-64/pr20093-2.d: Likewise.
-	* testsuite/ld-x86-64/pr20093-2.s: Likewise.
-	* testsuite/ld-x86-64/x86-64.exp: Run pr20093-1 and pr20093-2.
-
-2016-05-11  Alan Modra  <amodra@gmail.com>
-
-	PR 20060
-	* testsuite/ld-powerpc/powerpc.exp: Run new tests.
-	* testsuite/ld-powerpc/tlsdll.s: New.
-	* testsuite/ld-powerpc/tlsdll.ver: New.
-	* testsuite/ld-powerpc/tlsdll_32.s: New.
-	* testsuite/ld-powerpc/tlsopt5.d: New.
-	* testsuite/ld-powerpc/tlsopt5.s: New.
-	* testsuite/ld-powerpc/tlsopt5_32.d: New.
-	* testsuite/ld-powerpc/tlsopt5_32.s: New.
-
-2016-04-30  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-04-27  H.J. Lu  <hongjiu.lu@intel.com>
+	PR ld/20789
+	* ld/testsuite/ld-avr/pr20789.d: New test.
+	* ld/testsuite/ld-avr/pr20789.s: New test.
 
-	PR ld/20006
-	* testsuite/ld-elfvsb/elfvsb.exp (COMPRESS_LDFLAG): New.
-	(visibility_run): Pass COMPRESS_LDFLAG to visibility_test on
-	ELF targets.
 
-2016-04-30  H.J. Lu  <hongjiu.lu@intel.com>
+2016-09-02  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
 
-	Backport from master
-	2016-04-27  H.J. Lu  <hongjiu.lu@intel.com>
+	PR ld/20545
+	* testsuite/ld-avr/avr-prop-7.d: New test.
+	* testsuite/ld-avr/avr-prop-7.s: New test.
+	* testsuite/ld-avr/avr-prop-8.d: New test.
+	* testsuite/ld-avr/avr-prop-8.s: New test.
 
-	* testsuite/ld-elf/compressed1b.d: Only run for Linux/GNU targets.
+2016-06-28  Alan Modra  <amodra@gmail.com>
 
-	2016-04-27  H.J. Lu  <hongjiu.lu@intel.com>
+	PR ld/20302
+	* testsuite/ld-scripts/pr20302.d: Exclude *-*-*aout.
 
-	* testsuite/ld-elf/compressed1b.d: Pass
-	--compress-debug-sections=none to ld.
-	* testsuite/ld-elf/compressed1c.d: Likewise.
+2016-06-27  Nick Clifton  <nickc@redhat.com>
 
-2016-04-04  H.J. Lu  <hongjiu.lu@intel.com>
+	PR ld/20302
+	* lexsup.c (set_segment_start): If resetting the start address of
+	a section, remember to generate a new script element as well.
+	* testsuite/ld-scripts/pr20302.d: New test.
+	* testsuite/ld-scripts/scripts.exp: Run the new test.
 
-	Backport from master
-	2016-04-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19827
-	* testsuite/ld-i386/pr19827-nacl.rd: New file.
-	* testsuite/ld-x86-64/pr19827-nacl.rd: Likewise.
-
-2016-03-17  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-03-15  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19827
-	* testsuite/ld-i386/i386.exp: Run PR ld/19827 tests.
-	* testsuite/ld-x86-64/x86-64.exp: Likewise.
-	* testsuite/ld-i386/pr19827.rd: New file.
-	* testsuite/ld-i386/pr19827a.S: Likewise.
-	* testsuite/ld-i386/pr19827b.S: Likewise.
-	* testsuite/ld-x86-64/pr19827.rd: Likewise.
-	* testsuite/ld-x86-64/pr19827a.S: Likewise.
-	* testsuite/ld-x86-64/pr19827b.S: Likewise.
-
-2016-03-15  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* testsuite/ld-elf/pr19539.d: Skip cris*-*-* targets.
-
-	2016-01-30  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19539
-	* testsuite/ld-elf/pr19539.d: New file.
-	* testsuite/ld-elf/pr19539.s: Likewise.
-	* testsuite/ld-elf/pr19539.t: Likewise.
-
-2016-03-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2015-12-07  Jan Beulich  <jbeulich@suse.com>
-
-	* ld-elf/gabiend.rt: Accept any alignment.
-	* ld-elf/gabinormal.rt: Likewise.
-
-2016-03-09  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-03-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19579
-	* testsuite/ld-elf/pr19579a.c: New file.
-	* testsuite/ld-elf/pr19579b.c: Likewise.
-	* testsuite/ld-elf/shared.exp: Run PR ld/19579 test.
-
-2016-03-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-03-02  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19739
-	* emultempl/elf32.em (gld${EMULATION_NAME}_place_orphan): Don't
-	merge flags of other input sections for relocatable link.
-	* emultempl/mmo.em (mmo_place_orphan): Likewise.
-	* emultempl/pe.em (gld_${EMULATION_NAME}_place_orphan): Likewise.
-	* emultempl/pep.em (gld_${EMULATION_NAME}_place_orphan): Likewise.
-
-2016-03-01  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-03-01  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* testsuite/ld-plugin/lto.exp: Update PR ld/12365 test for GCC 6.
+2016-06-14  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
 
-2016-02-26  H.J. Lu  <hongjiu.lu@intel.com>
+	PR ld/20254
+	* testsuite/ld-avr/avr-prop-6.d: New test.
+	* testsuite/ld-avr/avr-prop-6.s: New test.
 
-	Backport from master
-	2016-02-24  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19698
-	* testsuite/ld-elf/pr19698.d: New file.
-	* testsuite/ld-elf/pr19698.s: Likewise.
-	* testsuite/ld-elf/pr19698.t: Likewise.
-
-2016-02-26  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-01  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19553
-	* testsuite/ld-elf/indirect.exp: Run tests for PR ld/19553.
-	* testsuite/ld-elf/pr19553.map: New file.
-	* testsuite/ld-elf/pr19553.map: Likewise.
-	* testsuite/ld-elf/pr19553a.c: Likewise.
-	* testsuite/ld-elf/pr19553b.c: Likewise.
-	* testsuite/ld-elf/pr19553b.out: Likewise.
-	* testsuite/ld-elf/pr19553c.c: Likewise.
-	* testsuite/ld-elf/pr19553c.out: Likewise.
-	* testsuite/ld-elf/pr19553d.c: Likewise.
-	* testsuite/ld-elf/pr19553d.out: Likewise.
-
-2016-02-25  Jiong Wang  <jiong.wang@arm.com>
-
-	Backport from master
-	2016-01-20  Jiong Wang  <jiong.wang@arm.com>
-
-	* testsuite/ld-aarch64/farcall-section.d: Delete.
-	* testsuite/ld-aarch64/farcall-section.s: Delete.
-	* testsuite/ld-aarch64/farcall-b-section.d: New expectation file.
-	* testsuite/ld-aarch64/farcall-bl-section.d: Likewise.
-	* testsuite/ld-aarch64/farcall-b-section.s: New testcase.
-	* testsuite/ld-aarch64/farcall-bl-section.s: Likewise.
-	* testsuite/ld-aarch64/aarch64-elf.exp: Likewise.
-
-2016-02-11  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-11  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/19615
-	* ld.texinfo: Document -Bsymbolic and -Bsymbolic-functions for
-	PIE.
-	* lexsup.c (parse_args): Enable -Bsymbolic and
-	-Bsymbolic-functions for PIE.
-	* testsuite/ld-i386/i386.exp: Run pr19615.
-	* testsuite/ld-i386/pr19615.d: New file.
-	* testsuite/ld-i386/pr19615.s: Likewise.
-	* testsuite/ld-x86-64/pr19615.d: Likewise.
-	* testsuite/ld-x86-64/pr19615.s: Likewise.
-
-2016-02-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR gas/19520
-	* testsuite/ld-i386/branch1.d: Pass -mrelax-relocations=yes to as.
-	* testsuite/ld-i386/call1.d: Likewise.
-	* testsuite/ld-i386/call2.d: Likewise.
-	* testsuite/ld-i386/call3a.d: Likewise.
-	* testsuite/ld-i386/call3b.d: Likewise.
-	* testsuite/ld-i386/call3c.d: Likewise.
-	* testsuite/ld-i386/call3d.d: Likewise.
-	* testsuite/ld-i386/call3e.d: Likewise.
-	* testsuite/ld-i386/call3f.d: Likewise.
-	* testsuite/ld-i386/call3g.d: Likewise.
-	* testsuite/ld-i386/call3h.d: Likewise.
-	* testsuite/ld-i386/jmp1.d: Likewise.
-	* testsuite/ld-i386/jmp2.d: Likewise.
-	* testsuite/ld-i386/lea1c.d: Likewise.
-	* testsuite/ld-i386/load1.d: Likewise.
-	* testsuite/ld-i386/load2.d: Likewise.
-	* testsuite/ld-i386/load3.d: Likewise.
-	* testsuite/ld-i386/load4a.d: Likewise.
-	* testsuite/ld-i386/load5a.d: Likewise.
-	* testsuite/ld-i386/mov2b.d: Likewise.
-	* testsuite/ld-i386/mov3.d: Likewise.
-	* testsuite/ld-ifunc/ifunc-21-x86-64.d: Likewise.
-	* testsuite/ld-ifunc/ifunc-22-x86-64.d: Likewise.
-	* testsuite/ld-ifunc/ifunc-5r-local-x86-64.d: Likewise.
-	* testsuite/ld-x86-64/call1a.d: Likewise.
-	* testsuite/ld-x86-64/call1b.d: Likewise.
-	* testsuite/ld-x86-64/call1c.d: Likewise.
-	* testsuite/ld-x86-64/call1d.d: Likewise.
-	* testsuite/ld-x86-64/call1e.d: Likewise.
-	* testsuite/ld-x86-64/call1f.d: Likewise.
-	* testsuite/ld-x86-64/call1h.d: Likewise.
-	* testsuite/ld-x86-64/call1i.d: Likewise.
-	* testsuite/ld-x86-64/load1a.d: Likewise.
-	* testsuite/ld-x86-64/load1b.d: Likewise.
-	* testsuite/ld-i386/got1a.S: Load GOT into %ecx and use it.
-	* testsuite/ld-i386/got1.dd: Updated.
-	* testsuite/ld-i386/got1d.S (1): Removed.
-	* testsuite/ld-i386/i386.exp: Add -Wa,-mrelax-relocations=yes.
-	* testsuite/ld-x86-64/x86-64.exp: Likewise.
-
-2016-02-02  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-02  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/18591
-	* testsuite/ld-x86-64/pr18591.d: New file.
-	* testsuite/ld-x86-64/pr18591.s: Likewise.
-	* testsuite/ld-x86-64/x86-64.exp: Run pr18591.
+2016-05-06  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
 
-2016-01-29  H.J. Lu  <hongjiu.lu@intel.com>
+	* ld/testsuite/ld-srec/srec.exp: Mark test as XFAIL for AVR.
 
-	Backport from master
-	2016-01-29  H.J. Lu  <hongjiu.lu@intel.com>
+2016-06-08  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
 
-	PR ld/19533
-	* configure.ac (compressed_debug_sections): Replace == with =.
-	* configure: Regenerated.
+	PR ld/20221
+	* testsuite/ld-avr/avr-prop-5.d: New.
+	* testsuite/ld-avr/avr-prop-5.s: New.
 
-2016-01-25  Tristan Gingold  <gingold@adacore.com>
+2016-06-09  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
 
-	* configure: Regenerate.
+	* testsuite/ld-avr/lds-mega.d: New test.
+	* testsuite/ld-avr/lds-mega.s: New test source.
+	* testsuite/ld-avr/lds-tiny.d: New test.
+	* testsuite/ld-avr/lds-tiny.s: New test source.
+
+2016-05-09  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
+	* testsuite/ld-elf/flags1.d (readelf): Dump section header instead
+	program headers.
+	(xfail): Remove avr-*-*.
+	Update regex to check the section flags.
+	* testsuite/ld-elf/merge.d (xfail): Remove avr-*-*.
+
+2016-05-17  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
+
+	* scripttempl/avr.sc (text): Place .progmem.data from avr-libc
+	above .progmem*.
+	* scripttempl/avrtiny.sc (text): Likewise.
+
+2016-05-04  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
+
+	* testsuite/ld-elf/pr18735.d: Allow other symbols.
+	* testsuite/ld-elf/sec64k.exp: Skip 64ksec for avr.
+	* testsuite/ld-gc/pr14265.d: Allow other symbols.
+	* testsuite/ld-plugin/plugin.exp: Add PR ld/17973 to
+	plugin_tests only if check_shared_lib_support is true.
+	* testsuite/ld-selective/selective.exp: Add --section-start
+	flag for avr.
+
+2016-05-03  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>
+
+	* testsuite/ld-elfcomm/elfcomm.exp: Check for shared lib support
+	before running STT_COMMON tests.
+
+2016-01-22  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
+
+	* scripttempl/avr.sc (.noinit): Force .noinit VMA to end of .bss VMA.
+	* scripttempl/avrtiny.sc (.noinit): Likewise.
+
+2015-11-17  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
+
+	* emultempl/avrelf.em: declare avr_non_bit_addressable_registers_mask.
+	(avr_elf_set_global_bfd_parameters): Pass non bit addressable registers
+	mask to bfd frontend.
+	(PARSE_AND_LIST_PROLOGUE): Add non bit addressable registers mask option.
+	(PARSE_AND_LIST_LONGOPTS): Likewise.
+	(PARSE_AND_LIST_OPTIONS): Likewise.
+	(PARSE_AND_LIST_ARGS_CASES): Handle the new option.
 
 2016-01-25  Tristan Gingold  <gingold@adacore.com>
 
@@ -540,7 +183,7 @@
 	decide placement.
 
 2015-10-27  Laurent Alfonsi <laurent.alfonsi@st.com>
-	    Christophe Monat <christophe.monat@st.com>
+            Christophe Monat <christophe.monat@st.com>
 
 	* ld.texinfo: Add description of the STM32L4xx erratum
 	workaround.
@@ -580,7 +223,7 @@
 
 2015-10-22  H.J. Lu  <hongjiu.lu@intel.com>
 
-	* ld.texinfo: Document "-z call-nop=PADDING" option.
+	* ld/ld.texinfo: Document "-z call-nop=PADDING" option.
 	* emulparams/call_nop.sh: New file.
 	* emulparams/elf_i386_be.sh: Source
 	${srcdir}/emulparams/call_nop.sh.
@@ -616,7 +259,7 @@
 
 2015-10-15  Simon Dardis  <Simon.Dardis@imgtec.com>
 
-	* ldexp.c: (try_copy_symbol_flags): New. Factored out from...
+	* ld/ldexp.c: (try_copy_symbol_flags): New. Factored out from...
 	(exp_fold_tree_1): Here.  Cope with ternary operator in
 	assignments.  Use new helper.
 
@@ -759,7 +402,7 @@
 2015-09-09  James Bowman  <james.bowman@ftdichip.com>
 
 	* scripttempl/ft32.sc: default linker script RAM and
-	FLASH size symbols
+        FLASH size symbols
 
 2015-09-09  Nick Clifton  <nickc@redhat.com>
 
@@ -810,58 +453,58 @@
 
 2015-08-18  H.J. Lu  <hongjiu.lu@intel.com>
 
-	* ldctor.c: Replace shared, executable, relocatable and pie
+	* ld/ldctor.c: Replace shared, executable, relocatable and pie
 	fields with bfd_link_executable, bfd_link_dll,
 	bfd_link_relocatable, bfd_link_pic and bfd_link_pie.
-	* ldemul.c: Likewise.
-	* ldfile.c: Likewise.
-	* ldlang.c: Likewise.
-	* ldmain.c: Likewise.
-	* ldwrite.c: Likewise.
-	* lexsup.c: Likewise.
-	* pe-dll.c: Likewise.
-	* plugin.c: Likewise.
-	* emultempl/aarch64elf.em: Likewise.
-	* emultempl/aix.em: Likewise.
-	* emultempl/alphaelf.em: Likewise.
-	* emultempl/armcoff.em: Likewise.
-	* emultempl/armelf.em: Likewise.
-	* emultempl/avrelf.em: Likewise.
-	* emultempl/beos.em: Likewise.
-	* emultempl/cr16elf.em: Likewise.
-	* emultempl/elf-generic.em: Likewise.
-	* emultempl/elf32.em: Likewise.
-	* emultempl/genelf.em: Likewise.
-	* emultempl/generic.em: Likewise.
-	* emultempl/gld960.em: Likewise.
-	* emultempl/gld960c.em: Likewise.
-	* emultempl/hppaelf.em: Likewise.
-	* emultempl/irix.em: Likewise.
-	* emultempl/linux.em: Likewise.
-	* emultempl/lnk960.em: Likewise.
-	* emultempl/m68hc1xelf.em: Likewise.
-	* emultempl/m68kcoff.em: Likewise.
-	* emultempl/m68kelf.em: Likewise.
-	* emultempl/metagelf.em: Likewise.
-	* emultempl/mipself.em: Likewise.
-	* emultempl/mmo.em: Likewise.
-	* emultempl/msp430.em: Likewise.
-	* emultempl/nds32elf.em: Likewise.
-	* emultempl/needrelax.em: Likewise.
-	* emultempl/nios2elf.em: Likewise.
-	* emultempl/pe.em: Likewise.
-	* emultempl/pep.em: Likewise.
-	* emultempl/ppc32elf.em: Likewise.
-	* emultempl/ppc64elf.em: Likewise.
-	* emultempl/sh64elf.em: Likewise.
-	* emultempl/solaris2.em: Likewise.
-	* emultempl/spuelf.em: Likewise.
-	* emultempl/sunos.em: Likewise.
-	* emultempl/tic6xdsbt.em: Likewise.
-	* emultempl/ticoff.em: Likewise.
-	* emultempl/v850elf.em: Likewise.
-	* emultempl/vms.em: Likewise.
-	* emultempl/vxworks.em: Likewise.
+	* ld/ldemul.c: Likewise.
+	* ld/ldfile.c: Likewise.
+	* ld/ldlang.c: Likewise.
+	* ld/ldmain.c: Likewise.
+	* ld/ldwrite.c: Likewise.
+	* ld/lexsup.c: Likewise.
+	* ld/pe-dll.c: Likewise.
+	* ld/plugin.c: Likewise.
+	* ld/emultempl/aarch64elf.em: Likewise.
+	* ld/emultempl/aix.em: Likewise.
+	* ld/emultempl/alphaelf.em: Likewise.
+	* ld/emultempl/armcoff.em: Likewise.
+	* ld/emultempl/armelf.em: Likewise.
+	* ld/emultempl/avrelf.em: Likewise.
+	* ld/emultempl/beos.em: Likewise.
+	* ld/emultempl/cr16elf.em: Likewise.
+	* ld/emultempl/elf-generic.em: Likewise.
+	* ld/emultempl/elf32.em: Likewise.
+	* ld/emultempl/genelf.em: Likewise.
+	* ld/emultempl/generic.em: Likewise.
+	* ld/emultempl/gld960.em: Likewise.
+	* ld/emultempl/gld960c.em: Likewise.
+	* ld/emultempl/hppaelf.em: Likewise.
+	* ld/emultempl/irix.em: Likewise.
+	* ld/emultempl/linux.em: Likewise.
+	* ld/emultempl/lnk960.em: Likewise.
+	* ld/emultempl/m68hc1xelf.em: Likewise.
+	* ld/emultempl/m68kcoff.em: Likewise.
+	* ld/emultempl/m68kelf.em: Likewise.
+	* ld/emultempl/metagelf.em: Likewise.
+	* ld/emultempl/mipself.em: Likewise.
+	* ld/emultempl/mmo.em: Likewise.
+	* ld/emultempl/msp430.em: Likewise.
+	* ld/emultempl/nds32elf.em: Likewise.
+	* ld/emultempl/needrelax.em: Likewise.
+	* ld/emultempl/nios2elf.em: Likewise.
+	* ld/emultempl/pe.em: Likewise.
+	* ld/emultempl/pep.em: Likewise.
+	* ld/emultempl/ppc32elf.em: Likewise.
+	* ld/emultempl/ppc64elf.em: Likewise.
+	* ld/emultempl/sh64elf.em: Likewise.
+	* ld/emultempl/solaris2.em: Likewise.
+	* ld/emultempl/spuelf.em: Likewise.
+	* ld/emultempl/sunos.em: Likewise.
+	* ld/emultempl/tic6xdsbt.em: Likewise.
+	* ld/emultempl/ticoff.em: Likewise.
+	* ld/emultempl/v850elf.em: Likewise.
+	* ld/emultempl/vms.em: Likewise.
+	* ld/emultempl/vxworks.em: Likewise.
 
 2015-08-18  Alan Modra  <amodra@gmail.com>
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/configure binutils-2.26-avr/ld/configure
--- binutils-2.26.1-src/ld/configure	2016-06-29 00:59:51.000000000 -0700
+++ binutils-2.26-avr/ld/configure	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.64 for ld 2.26.1.
+# Generated by GNU Autoconf 2.64 for ld 2.26.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software
@@ -556,8 +556,8 @@
 # Identity of this package.
 PACKAGE_NAME='ld'
 PACKAGE_TARNAME='ld'
-PACKAGE_VERSION='2.26.1'
-PACKAGE_STRING='ld 2.26.1'
+PACKAGE_VERSION='2.26'
+PACKAGE_STRING='ld 2.26'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
@@ -1350,7 +1350,7 @@
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures ld 2.26.1 to adapt to many kinds of systems.
+\`configure' configures ld 2.26 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1421,7 +1421,7 @@
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of ld 2.26.1:";;
+     short | recursive ) echo "Configuration of ld 2.26:";;
    esac
   cat <<\_ACEOF
 
@@ -1545,7 +1545,7 @@
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-ld configure 2.26.1
+ld configure 2.26
 generated by GNU Autoconf 2.64
 
 Copyright (C) 2009 Free Software Foundation, Inc.
@@ -2254,7 +2254,7 @@
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by ld $as_me 2.26.1, which was
+It was created by ld $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   $ $0 $@
@@ -4063,7 +4063,7 @@
 
 # Define the identity of the package.
  PACKAGE='ld'
- VERSION='2.26.1'
+ VERSION='2.26'
 
 
 cat >>confdefs.h <<_ACEOF
@@ -17134,7 +17134,7 @@
   fi
 done
 
-if test x$ac_default_compressed_debug_sections = xyes ; then
+if test x$ac_default_compressed_debug_sections == xyes ; then
 
 $as_echo "#define DEFAULT_FLAG_COMPRESS_DEBUG 1" >>confdefs.h
 
@@ -17740,7 +17740,7 @@
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by ld $as_me 2.26.1, which was
+This file was extended by ld $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -17804,7 +17804,7 @@
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_version="\\
-ld config.status 2.26.1
+ld config.status 2.26
 configured by $0, generated by GNU Autoconf 2.64,
   with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/configure.ac binutils-2.26-avr/ld/configure.ac
--- binutils-2.26.1-src/ld/configure.ac	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/configure.ac	2016-11-16 03:51:00.000000000 -0800
@@ -384,7 +384,7 @@
   fi
 done
 
-if test x$ac_default_compressed_debug_sections = xyes ; then
+if test x$ac_default_compressed_debug_sections == xyes ; then
   AC_DEFINE(DEFAULT_FLAG_COMPRESS_DEBUG, 1, [Define if you want compressed debug sections by default.])
 fi
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/emultempl/avrelf.em binutils-2.26-avr/ld/emultempl/avrelf.em
--- binutils-2.26.1-src/ld/emultempl/avrelf.em	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/emultempl/avrelf.em	2016-11-16 03:51:00.000000000 -0800
@@ -44,6 +44,8 @@
 static bfd_boolean avr_debug_stubs = FALSE;
 static bfd_boolean avr_replace_call_ret_sequences = TRUE;
 static bfd_vma avr_pc_wrap_around = 0x10000000;
+static bfd_boolean avr_detailed_mem_usage = FALSE;
+static unsigned int avr_non_bit_addressable_registers_mask = 0;
 
 /* Transfers information to the bfd frontend.  */
 
@@ -57,7 +59,8 @@
                           avr_debug_stubs,
                           avr_debug_relax,
                           avr_pc_wrap_around,
-                          avr_replace_call_ret_sequences);
+                          avr_replace_call_ret_sequences,
+                          avr_non_bit_addressable_registers_mask);
 }
 
 
@@ -211,6 +214,140 @@
 
   finish_default ();
 }
+static bfd_boolean
+is_section_discarded (asection *s)
+{
+  return ((s->output_section == NULL
+              || s->output_section->owner != link_info.output_bfd)
+	      && (s->flags & (SEC_LINKER_CREATED | SEC_KEEP)) == 0);
+}
+
+typedef struct llist {
+  const char *name;
+  bfd_size_type len;
+  struct llist *next;
+} llist_type;
+
+static void
+add_to_seclist (asection* input_sec, llist_type** list_head_ptr)
+{
+  llist_type *lptr = (llist_type*) malloc(sizeof(llist_type));
+  lptr->name = input_sec->name;
+  lptr->len = input_sec->size;
+  lptr->next = NULL;
+
+  if (*list_head_ptr == NULL)
+    *list_head_ptr = lptr;
+  else {
+    llist_type* llast = *list_head_ptr;
+    while (llast->next)
+      llast = llast->next;
+      llast->next = lptr;
+    }
+}
+
+static void
+freeup_list (llist_type* lptr)
+{
+  if (lptr == NULL)
+    return;
+  if (lptr->next)
+    freeup_list(lptr->next);
+  else
+    free(lptr);
+}
+
+#define SECTION_NAME_MAP_LENGTH (30)
+static void
+align_next_column (int len)
+{
+  if (len >= SECTION_NAME_MAP_LENGTH - 1)
+    {
+      print_nl ();
+      len = 0;
+    }
+  while (len < SECTION_NAME_MAP_LENGTH)
+    {
+      print_space ();
+      ++len;
+    }
+}
+
+static void
+avr_extra_map_file_text (bfd *abfd ATTRIBUTE_UNUSED, struct bfd_link_info *info ATTRIBUTE_UNUSED, FILE *mapf)
+{
+  if (avr_detailed_mem_usage == FALSE)
+    return;
+
+  fprintf (mapf, _("\nInput files and contributions to "
+              "output file."));
+
+  LANG_FOR_EACH_INPUT_STATEMENT (f)
+    {
+      if ((f->the_bfd->flags & (BFD_LINKER_CREATED | DYNAMIC)) != 0
+	  || f->flags.just_syms || f->the_bfd->filename == NULL)
+	    continue;
+
+      bfd_boolean does_bfd_contribute = FALSE;
+      lang_output_section_statement_type *os;
+
+      for (os = &lang_output_section_statement.head->output_section_statement;
+           os != NULL;
+           os = os->next)
+        {
+          llist_type *input_seclist_head=NULL;
+          asection *output_section = os->bfd_section;
+
+          /* Skip if null or section contains debug info */
+          if ((output_section == NULL) || ((output_section->flags & SEC_ALLOC) == 0))
+            continue;
+
+          asection *i;
+          bfd_size_type size_from_this_bfd = 0;
+
+          for (i = f->the_bfd->sections; i != NULL; i = i->next)
+            {
+              if ((is_section_discarded (i)) ||
+                  (i->output_section != output_section) ||
+                  (i->size == 0))
+                continue;
+
+              add_to_seclist (i, &input_seclist_head);
+              size_from_this_bfd += i->size;
+            }
+
+          if (size_from_this_bfd > 0)
+            {
+              int len;
+
+              if (does_bfd_contribute == FALSE)
+                {
+                  does_bfd_contribute = TRUE;
+                  fprintf (mapf, "\n\n%s\n", f->the_bfd->filename);
+                }
+
+              minfo ("\n%s", output_section->name);
+
+              len = strlen (output_section->name);
+              align_next_column (len);
+              minfo ("%W", size_from_this_bfd);
+			  minfo ("\t(%s)", os->region->name_list.name);
+
+              /* Print input sections and size */
+              llist_type *lptr = input_seclist_head;
+              while(lptr) {
+                minfo ("\n  %s", lptr->name);
+                len = strlen(lptr->name) + 2;
+                align_next_column (len);
+                minfo ("%W", lptr->len);
+                lptr = lptr->next;
+              }
+              freeup_list(input_seclist_head);
+            }
+          }
+     }
+}
+
 EOF
 
 
@@ -221,6 +358,8 @@
 #define OPTION_NO_STUBS                303
 #define OPTION_DEBUG_STUBS             304
 #define OPTION_DEBUG_RELAX             305
+#define OPTION_DETAILED_MEM_USAGE      306
+#define OPTION_NON_BIT_ADDRESSABLE_REGISTERS_MASK 307
 '
 
 PARSE_AND_LIST_LONGOPTS='
@@ -234,6 +373,10 @@
     NULL, OPTION_DEBUG_STUBS},
   { "debug-relax", no_argument,
     NULL, OPTION_DEBUG_RELAX},
+  { "detailed-mem-usage", no_argument,
+    NULL, OPTION_DETAILED_MEM_USAGE},
+  { "non-bit-addressable-registers-mask", required_argument,
+    NULL, OPTION_NON_BIT_ADDRESSABLE_REGISTERS_MASK},
 '
 
 PARSE_AND_LIST_OPTIONS='
@@ -263,6 +406,11 @@
 		   "Used for debugging avr-ld.\n"));
   fprintf (file, _("  --debug-relax               "
 		   "Used for debugging avr-ld.\n"));
+  fprintf (file, _("  --detailed-mem-usage        "
+           "Dump detailed memory usage (object file wise) to map file.\n"));
+  fprintf (file, _("  --non-bit-addressable-registers-mask=<32 bit mask>\n"
+           "                              "
+           "Specify the non bit addressable registers mask.\n"));
 '
 
 PARSE_AND_LIST_ARGS_CASES='
@@ -301,6 +449,15 @@
         avr_replace_call_ret_sequences = FALSE;
       }
       break;
+    case OPTION_DETAILED_MEM_USAGE:
+      avr_detailed_mem_usage = TRUE;
+      break;
+    case OPTION_NON_BIT_ADDRESSABLE_REGISTERS_MASK:
+      {
+        if (optarg != NULL)
+          avr_non_bit_addressable_registers_mask = strtoul (optarg, NULL, 0);
+      }
+      break;
 '
 
 #
@@ -311,3 +468,4 @@
 LDEMUL_AFTER_ALLOCATION=avr_elf_after_allocation
 LDEMUL_CREATE_OUTPUT_SECTION_STATEMENTS=avr_elf_create_output_section_statements
 LDEMUL_FINISH=avr_finish
+LDEMUL_EXTRA_MAP_FILE_TEXT=avr_extra_map_file_text
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/emultempl/elf32.em binutils-2.26-avr/ld/emultempl/elf32.em
--- binutils-2.26.1-src/ld/emultempl/elf32.em	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/emultempl/elf32.em	2016-11-16 03:51:00.000000000 -0800
@@ -1946,32 +1946,25 @@
       return os;
     }
 
-  flags = s->flags;
-  if (!bfd_link_relocatable (&link_info))
-    {
-      nexts = s;
-      while ((nexts = bfd_get_next_section_by_name (nexts->owner, nexts))
-	     != NULL)
-	if (nexts->output_section == NULL
-	    && (nexts->flags & SEC_EXCLUDE) == 0
-	    && ((nexts->flags ^ flags) & (SEC_LOAD | SEC_ALLOC)) == 0
-	    && (nexts->owner->flags & DYNAMIC) == 0
-	    && nexts->owner->usrdata != NULL
-	    && !(((lang_input_statement_type *) nexts->owner->usrdata)
-		 ->flags.just_syms)
-	    && _bfd_elf_match_sections_by_type (nexts->owner, nexts,
-						s->owner, s))
-	  flags = (((flags ^ SEC_READONLY)
-		    | (nexts->flags ^ SEC_READONLY))
-		   ^ SEC_READONLY);
-    }
-
   /* Decide which segment the section should go in based on the
      section name and section flags.  We put loadable .note sections
      right after the .interp section, so that the PT_NOTE segment is
      stored right after the program headers where the OS can read it
      in the first page.  */
 
+  flags = s->flags;
+  nexts = s;
+  while ((nexts = bfd_get_next_section_by_name (nexts->owner, nexts)) != NULL)
+    if (nexts->output_section == NULL
+	&& (nexts->flags & SEC_EXCLUDE) == 0
+	&& ((nexts->flags ^ flags) & (SEC_LOAD | SEC_ALLOC)) == 0
+	&& (nexts->owner->flags & DYNAMIC) == 0
+	&& nexts->owner->usrdata != NULL
+	&& !(((lang_input_statement_type *) nexts->owner->usrdata)
+	     ->flags.just_syms)
+	&& _bfd_elf_match_sections_by_type (nexts->owner, nexts, s->owner, s))
+      flags = (((flags ^ SEC_READONLY) | (nexts->flags ^ SEC_READONLY))
+	       ^ SEC_READONLY);
   place = NULL;
   if ((flags & (SEC_ALLOC | SEC_DEBUGGING)) == 0)
     place = &hold[orphan_nonalloc];
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/emultempl/mmo.em binutils-2.26-avr/ld/emultempl/mmo.em
--- binutils-2.26.1-src/ld/emultempl/mmo.em	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/emultempl/mmo.em	2016-11-16 03:51:00.000000000 -0800
@@ -107,28 +107,22 @@
       return os;
     }
 
-  flags = s->flags;
-  if (!bfd_link_relocatable (&link_info))
-    {
-      nexts = s;
-      while ((nexts = bfd_get_next_section_by_name (nexts->owner, nexts))
-	     != NULL)
-	if (nexts->output_section == NULL
-	    && (nexts->flags & SEC_EXCLUDE) == 0
-	    && ((nexts->flags ^ flags) & (SEC_LOAD | SEC_ALLOC)) == 0
-	    && (nexts->owner->flags & DYNAMIC) == 0
-	    && nexts->owner->usrdata != NULL
-	    && !(((lang_input_statement_type *) nexts->owner->usrdata)
-		 ->flags.just_syms))
-	  flags = (((flags ^ SEC_READONLY) | (nexts->flags ^ SEC_READONLY))
-		   ^ SEC_READONLY);
-    }
-
   /* Check for matching section type flags for sections we care about.
      A section without contents can have SEC_LOAD == 0, but we still
      want it attached to a sane section so the symbols appear as
      expected.  */
-
+  flags = s->flags;
+  nexts = s;
+  while ((nexts = bfd_get_next_section_by_name (nexts->owner, nexts)) != NULL)
+    if (nexts->output_section == NULL
+	&& (nexts->flags & SEC_EXCLUDE) == 0
+	&& ((nexts->flags ^ flags) & (SEC_LOAD | SEC_ALLOC)) == 0
+	&& (nexts->owner->flags & DYNAMIC) == 0
+	&& nexts->owner->usrdata != NULL
+	&& !(((lang_input_statement_type *) nexts->owner->usrdata)
+	     ->flags.just_syms))
+      flags = (((flags ^ SEC_READONLY) | (nexts->flags ^ SEC_READONLY))
+	       ^ SEC_READONLY);
   if ((flags & (SEC_ALLOC | SEC_READONLY)) != SEC_READONLY)
     for (i = 0; i < sizeof (holds) / sizeof (holds[0]); i++)
       if ((flags & holds[i].nonzero_flags) != 0)
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/emultempl/pe.em binutils-2.26-avr/ld/emultempl/pe.em
--- binutils-2.26.1-src/ld/emultempl/pe.em	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/emultempl/pe.em	2016-11-16 03:51:00.000000000 -0800
@@ -2225,27 +2225,21 @@
 	  orphan_init_done = 1;
 	}
 
-      flags = s->flags;
-      if (!bfd_link_relocatable (&link_info))
-	{
-	  nexts = s;
-	  while ((nexts = bfd_get_next_section_by_name (nexts->owner,
-							nexts)))
-	    if (nexts->output_section == NULL
-		&& (nexts->flags & SEC_EXCLUDE) == 0
-		&& ((nexts->flags ^ flags) & (SEC_LOAD | SEC_ALLOC)) == 0
-		&& (nexts->owner->flags & DYNAMIC) == 0
-		&& nexts->owner->usrdata != NULL
-		&& !(((lang_input_statement_type *) nexts->owner->usrdata)
-		     ->flags.just_syms))
-	      flags = (((flags ^ SEC_READONLY)
-			| (nexts->flags ^ SEC_READONLY))
-		       ^ SEC_READONLY);
-	}
-
       /* Try to put the new output section in a reasonable place based
 	 on the section name and section flags.  */
 
+      flags = s->flags;
+      nexts = s;
+      while ((nexts = bfd_get_next_section_by_name (nexts->owner, nexts)))
+	if (nexts->output_section == NULL
+	    && (nexts->flags & SEC_EXCLUDE) == 0
+	    && ((nexts->flags ^ flags) & (SEC_LOAD | SEC_ALLOC)) == 0
+	    && (nexts->owner->flags & DYNAMIC) == 0
+	    && nexts->owner->usrdata != NULL
+	    && !(((lang_input_statement_type *) nexts->owner->usrdata)
+		 ->flags.just_syms))
+	  flags = (((flags ^ SEC_READONLY) | (nexts->flags ^ SEC_READONLY))
+		   ^ SEC_READONLY);
       place = NULL;
       if ((flags & SEC_ALLOC) == 0)
 	;
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/emultempl/pep.em binutils-2.26-avr/ld/emultempl/pep.em
--- binutils-2.26.1-src/ld/emultempl/pep.em	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/emultempl/pep.em	2016-11-16 03:51:00.000000000 -0800
@@ -1996,27 +1996,21 @@
 	  orphan_init_done = 1;
 	}
 
-      flags = s->flags;
-      if (!bfd_link_relocatable (&link_info))
-	{
-	  nexts = s;
-	  while ((nexts = bfd_get_next_section_by_name (nexts->owner,
-							nexts)))
-	    if (nexts->output_section == NULL
-		&& (nexts->flags & SEC_EXCLUDE) == 0
-		&& ((nexts->flags ^ flags) & (SEC_LOAD | SEC_ALLOC)) == 0
-		&& (nexts->owner->flags & DYNAMIC) == 0
-		&& nexts->owner->usrdata != NULL
-		&& !(((lang_input_statement_type *) nexts->owner->usrdata)
-		     ->flags.just_syms))
-	      flags = (((flags ^ SEC_READONLY)
-			| (nexts->flags ^ SEC_READONLY))
-		       ^ SEC_READONLY);
-	}
-
       /* Try to put the new output section in a reasonable place based
 	 on the section name and section flags.  */
 
+      flags = s->flags;
+      nexts = s;
+      while ((nexts = bfd_get_next_section_by_name (nexts->owner, nexts)))
+	if (nexts->output_section == NULL
+	    && (nexts->flags & SEC_EXCLUDE) == 0
+	    && ((nexts->flags ^ flags) & (SEC_LOAD | SEC_ALLOC)) == 0
+	    && (nexts->owner->flags & DYNAMIC) == 0
+	    && nexts->owner->usrdata != NULL
+	    && !(((lang_input_statement_type *) nexts->owner->usrdata)
+		 ->flags.just_syms))
+	  flags = (((flags ^ SEC_READONLY) | (nexts->flags ^ SEC_READONLY))
+		   ^ SEC_READONLY);
       place = NULL;
       if ((flags & SEC_ALLOC) == 0)
 	;
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/ld.1 binutils-2.26-avr/ld/ld.1
--- binutils-2.26.1-src/ld/ld.1	2016-06-29 01:03:40.000000000 -0700
+++ binutils-2.26-avr/ld/ld.1	2016-11-16 03:51:00.000000000 -0800
@@ -133,7 +133,7 @@
 .\" ========================================================================
 .\"
 .IX Title "LD 1"
-.TH LD 1 "2016-06-29" "binutils-2.26.1" "GNU Development Tools"
+.TH LD 1 "2016-01-25" "binutils-2.26" "GNU Development Tools"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
@@ -1196,20 +1196,14 @@
 When creating a shared library, bind references to global symbols to the
 definition within the shared library, if any.  Normally, it is possible
 for a program linked against a shared library to override the definition
-within the shared library.  This option can also be used with the
-\&\fB\-\-export\-dynamic\fR option, when creating a position independent
-executable, to bind references to global symbols to the definition within
-the executable.  This option is only meaningful on \s-1ELF\s0 platforms which
-support shared libraries and position independent executables.
+within the shared library.  This option is only meaningful on \s-1ELF\s0
+platforms which support shared libraries.
 .IP "\fB\-Bsymbolic\-functions\fR" 4
 .IX Item "-Bsymbolic-functions"
 When creating a shared library, bind references to global function
 symbols to the definition within the shared library, if any.
-This option can also be used with the \fB\-\-export\-dynamic\fR option,
-when creating a position independent executable, to bind references
-to global function symbols to the definition within the executable.
 This option is only meaningful on \s-1ELF\s0 platforms which support shared
-libraries and position independent executables.
+libraries.
 .IP "\fB\-\-dynamic\-list=\fR\fIdynamic-list-file\fR" 4
 .IX Item "--dynamic-list=dynamic-list-file"
 Specify the name of a dynamic list file to the linker.  This is
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/ld.info binutils-2.26-avr/ld/ld.info
--- binutils-2.26.1-src/ld/ld.info	2016-06-29 01:03:40.000000000 -0700
+++ binutils-2.26-avr/ld/ld.info	2016-11-16 03:51:00.000000000 -0800
@@ -980,21 +980,14 @@
      When creating a shared library, bind references to global symbols
      to the definition within the shared library, if any.  Normally, it
      is possible for a program linked against a shared library to
-     override the definition within the shared library.  This option
-     can also be used with the `--export-dynamic' option, when creating
-     a position independent executable, to bind references to global
-     symbols to the definition within the executable.  This option is
-     only meaningful on ELF platforms which support shared libraries
-     and position independent executables.
+     override the definition within the shared library.  This option is
+     only meaningful on ELF platforms which support shared libraries.
 
 `-Bsymbolic-functions'
      When creating a shared library, bind references to global function
      symbols to the definition within the shared library, if any.  This
-     option can also be used with the `--export-dynamic' option, when
-     creating a position independent executable, to bind references to
-     global function symbols to the definition within the executable.
-     This option is only meaningful on ELF platforms which support
-     shared libraries and position independent executables.
+     option is only meaningful on ELF platforms which support shared
+     libraries.
 
 `--dynamic-list=DYNAMIC-LIST-FILE'
      Specify the name of a dynamic list file to the linker.  This is
@@ -7599,76 +7592,76 @@
 * -(:                                    Options.            (line  804)
 * --accept-unknown-input-arch:           Options.            (line  822)
 * --add-needed:                          Options.            (line  850)
-* --add-stdcall-alias:                   Options.            (line 1750)
-* --allow-multiple-definition:           Options.            (line 1128)
-* --allow-shlib-undefined:               Options.            (line 1134)
+* --add-stdcall-alias:                   Options.            (line 1743)
+* --allow-multiple-definition:           Options.            (line 1121)
+* --allow-shlib-undefined:               Options.            (line 1127)
 * --architecture=ARCH:                   Options.            (line  123)
 * --as-needed:                           Options.            (line  832)
 * --audit AUDITLIB:                      Options.            (line  112)
 * --auxiliary=NAME:                      Options.            (line  255)
-* --bank-window:                         Options.            (line 2204)
-* --base-file:                           Options.            (line 1755)
+* --bank-window:                         Options.            (line 2197)
+* --base-file:                           Options.            (line 1748)
 * --be8:                                 ARM.                (line   28)
 * --bss-plt:                             PowerPC ELF32.      (line   16)
-* --build-id:                            Options.            (line 1712)
-* --build-id=STYLE:                      Options.            (line 1712)
-* --check-sections:                      Options.            (line  936)
-* --compress-debug-sections=none:        Options.            (line 1682)
-* --compress-debug-sections=zlib:        Options.            (line 1682)
-* --compress-debug-sections=zlib-gabi:   Options.            (line 1682)
-* --compress-debug-sections=zlib-gnu:    Options.            (line 1682)
-* --copy-dt-needed-entries:              Options.            (line  948)
-* --cref:                                Options.            (line  968)
-* --default-imported-symver:             Options.            (line 1171)
+* --build-id:                            Options.            (line 1705)
+* --build-id=STYLE:                      Options.            (line 1705)
+* --check-sections:                      Options.            (line  929)
+* --compress-debug-sections=none:        Options.            (line 1675)
+* --compress-debug-sections=zlib:        Options.            (line 1675)
+* --compress-debug-sections=zlib-gabi:   Options.            (line 1675)
+* --compress-debug-sections=zlib-gnu:    Options.            (line 1675)
+* --copy-dt-needed-entries:              Options.            (line  941)
+* --cref:                                Options.            (line  961)
+* --default-imported-symver:             Options.            (line 1164)
 * --default-script=SCRIPT:               Options.            (line  562)
-* --default-symver:                      Options.            (line 1167)
-* --defsym=SYMBOL=EXP:                   Options.            (line  997)
-* --demangle[=STYLE]:                    Options.            (line 1009)
+* --default-symver:                      Options.            (line 1160)
+* --defsym=SYMBOL=EXP:                   Options.            (line  990)
+* --demangle[=STYLE]:                    Options.            (line 1002)
 * --depaudit AUDITLIB:                   Options.            (line  177)
-* --disable-auto-image-base:             Options.            (line 1942)
-* --disable-auto-import:                 Options.            (line 2077)
-* --disable-large-address-aware:         Options.            (line 1881)
-* --disable-long-section-names:          Options.            (line 1765)
-* --disable-new-dtags:                   Options.            (line 1658)
-* --disable-runtime-pseudo-reloc:        Options.            (line 2090)
-* --disable-stdcall-fixup:               Options.            (line 1787)
+* --disable-auto-image-base:             Options.            (line 1935)
+* --disable-auto-import:                 Options.            (line 2070)
+* --disable-large-address-aware:         Options.            (line 1874)
+* --disable-long-section-names:          Options.            (line 1758)
+* --disable-new-dtags:                   Options.            (line 1651)
+* --disable-runtime-pseudo-reloc:        Options.            (line 2083)
+* --disable-stdcall-fixup:               Options.            (line 1780)
 * --discard-all:                         Options.            (line  647)
 * --discard-locals:                      Options.            (line  651)
-* --dll:                                 Options.            (line 1760)
-* --dll-search-prefix:                   Options.            (line 1948)
+* --dll:                                 Options.            (line 1753)
+* --dll-search-prefix:                   Options.            (line 1941)
 * --dotsyms:                             PowerPC64 ELF64.    (line   33)
-* --dsbt-index:                          Options.            (line 2181)
-* --dsbt-size:                           Options.            (line 2176)
-* --dynamic-linker=FILE:                 Options.            (line 1022)
-* --dynamic-list-cpp-new:                Options.            (line  928)
-* --dynamic-list-cpp-typeinfo:           Options.            (line  932)
-* --dynamic-list-data:                   Options.            (line  925)
-* --dynamic-list=DYNAMIC-LIST-FILE:      Options.            (line  912)
-* --dynamicbase:                         Options.            (line 2130)
-* --eh-frame-hdr:                        Options.            (line 1649)
+* --dsbt-index:                          Options.            (line 2174)
+* --dsbt-size:                           Options.            (line 2169)
+* --dynamic-linker=FILE:                 Options.            (line 1015)
+* --dynamic-list-cpp-new:                Options.            (line  921)
+* --dynamic-list-cpp-typeinfo:           Options.            (line  925)
+* --dynamic-list-data:                   Options.            (line  918)
+* --dynamic-list=DYNAMIC-LIST-FILE:      Options.            (line  905)
+* --dynamicbase:                         Options.            (line 2123)
+* --eh-frame-hdr:                        Options.            (line 1642)
 * --emit-relocs:                         Options.            (line  497)
 * --emit-stack-syms:                     SPU ELF.            (line   46)
 * --emit-stub-syms <1>:                  PowerPC ELF32.      (line   47)
 * --emit-stub-syms <2>:                  SPU ELF.            (line   15)
 * --emit-stub-syms:                      PowerPC64 ELF64.    (line   29)
-* --enable-auto-image-base:              Options.            (line 1933)
-* --enable-auto-import:                  Options.            (line 1957)
-* --enable-extra-pe-debug:               Options.            (line 2095)
-* --enable-long-section-names:           Options.            (line 1765)
-* --enable-new-dtags:                    Options.            (line 1658)
-* --enable-runtime-pseudo-reloc:         Options.            (line 2082)
-* --enable-stdcall-fixup:                Options.            (line 1787)
+* --enable-auto-image-base:              Options.            (line 1926)
+* --enable-auto-import:                  Options.            (line 1950)
+* --enable-extra-pe-debug:               Options.            (line 2088)
+* --enable-long-section-names:           Options.            (line 1758)
+* --enable-new-dtags:                    Options.            (line 1651)
+* --enable-runtime-pseudo-reloc:         Options.            (line 2075)
+* --enable-stdcall-fixup:                Options.            (line 1780)
 * --entry=ENTRY:                         Options.            (line  187)
-* --error-unresolved-symbols:            Options.            (line 1602)
-* --exclude-all-symbols:                 Options.            (line 1841)
+* --error-unresolved-symbols:            Options.            (line 1595)
+* --exclude-all-symbols:                 Options.            (line 1834)
 * --exclude-libs:                        Options.            (line  197)
 * --exclude-modules-for-implib:          Options.            (line  208)
-* --exclude-symbols:                     Options.            (line 1835)
-* --export-all-symbols:                  Options.            (line 1811)
+* --exclude-symbols:                     Options.            (line 1828)
+* --export-all-symbols:                  Options.            (line 1804)
 * --export-dynamic:                      Options.            (line  221)
 * --extra-overlay-stubs:                 SPU ELF.            (line   19)
-* --fatal-warnings:                      Options.            (line 1035)
-* --file-alignment:                      Options.            (line 1845)
+* --fatal-warnings:                      Options.            (line 1028)
+* --file-alignment:                      Options.            (line 1838)
 * --filter=NAME:                         Options.            (line  276)
 * --fix-arm1176:                         ARM.                (line  112)
 * --fix-cortex-a53-835769:               ARM.                (line  213)
@@ -7677,66 +7670,66 @@
 * --fix-v4bx:                            ARM.                (line   50)
 * --fix-v4bx-interworking:               ARM.                (line   63)
 * --force-dynamic:                       Options.            (line  506)
-* --force-exe-suffix:                    Options.            (line 1040)
-* --forceinteg:                          Options.            (line 2135)
+* --force-exe-suffix:                    Options.            (line 1033)
+* --forceinteg:                          Options.            (line 2128)
 * --format=FORMAT:                       Options.            (line  134)
 * --format=VERSION:                      TI COFF.            (line    6)
-* --gc-sections:                         Options.            (line 1050)
-* --got:                                 Options.            (line 2217)
+* --gc-sections:                         Options.            (line 1043)
+* --got:                                 Options.            (line 2210)
 * --got=TYPE:                            M68K.               (line    6)
 * --gpsize=VALUE:                        Options.            (line  309)
-* --hash-size=NUMBER:                    Options.            (line 1668)
-* --hash-style=STYLE:                    Options.            (line 1676)
-* --heap:                                Options.            (line 1851)
-* --help:                                Options.            (line 1101)
-* --high-entropy-va:                     Options.            (line 2126)
-* --image-base:                          Options.            (line 1858)
-* --insert-timestamp:                    Options.            (line 2158)
+* --hash-size=NUMBER:                    Options.            (line 1661)
+* --hash-style=STYLE:                    Options.            (line 1669)
+* --heap:                                Options.            (line 1844)
+* --help:                                Options.            (line 1094)
+* --high-entropy-va:                     Options.            (line 2119)
+* --image-base:                          Options.            (line 1851)
+* --insert-timestamp:                    Options.            (line 2151)
 * --insn32 <1>:                          MIPS.               (line    6)
-* --insn32:                              Options.            (line 2229)
+* --insn32:                              Options.            (line 2222)
 * --just-symbols=FILE:                   Options.            (line  529)
-* --kill-at:                             Options.            (line 1867)
-* --large-address-aware:                 Options.            (line 1872)
-* --ld-generated-unwind-info:            Options.            (line 1653)
-* --leading-underscore:                  Options.            (line 1805)
+* --kill-at:                             Options.            (line 1860)
+* --large-address-aware:                 Options.            (line 1865)
+* --ld-generated-unwind-info:            Options.            (line 1646)
+* --leading-underscore:                  Options.            (line 1798)
 * --library-path=DIR:                    Options.            (line  367)
 * --library=NAMESPEC:                    Options.            (line  334)
 * --local-store=lo:hi:                   SPU ELF.            (line   24)
 * --long-plt:                            ARM.                (line  224)
-* --major-image-version:                 Options.            (line 1888)
-* --major-os-version:                    Options.            (line 1893)
-* --major-subsystem-version:             Options.            (line 1897)
+* --major-image-version:                 Options.            (line 1881)
+* --major-os-version:                    Options.            (line 1886)
+* --major-subsystem-version:             Options.            (line 1890)
 * --merge-exidx-entries:                 ARM.                (line  221)
-* --minor-image-version:                 Options.            (line 1902)
-* --minor-os-version:                    Options.            (line 1907)
-* --minor-subsystem-version:             Options.            (line 1911)
+* --minor-image-version:                 Options.            (line 1895)
+* --minor-os-version:                    Options.            (line 1900)
+* --minor-subsystem-version:             Options.            (line 1904)
 * --mri-script=MRI-CMDFILE:              Options.            (line  158)
 * --multi-subspace:                      HPPA ELF32.         (line    6)
 * --nmagic:                              Options.            (line  439)
 * --no-accept-unknown-input-arch:        Options.            (line  822)
 * --no-add-needed:                       Options.            (line  850)
-* --no-allow-shlib-undefined:            Options.            (line 1134)
+* --no-allow-shlib-undefined:            Options.            (line 1127)
 * --no-as-needed:                        Options.            (line  832)
-* --no-bind:                             Options.            (line 2149)
-* --no-check-sections:                   Options.            (line  936)
-* --no-copy-dt-needed-entries:           Options.            (line  948)
-* --no-define-common:                    Options.            (line  981)
-* --no-demangle:                         Options.            (line 1009)
+* --no-bind:                             Options.            (line 2142)
+* --no-check-sections:                   Options.            (line  929)
+* --no-copy-dt-needed-entries:           Options.            (line  941)
+* --no-define-common:                    Options.            (line  974)
+* --no-demangle:                         Options.            (line 1002)
 * --no-dotsyms:                          PowerPC64 ELF64.    (line   33)
-* --no-dynamic-linker:                   Options.            (line 1029)
+* --no-dynamic-linker:                   Options.            (line 1022)
 * --no-enum-size-warning:                ARM.                (line  159)
 * --no-export-dynamic:                   Options.            (line  221)
-* --no-fatal-warnings:                   Options.            (line 1035)
+* --no-fatal-warnings:                   Options.            (line 1028)
 * --no-fix-arm1176:                      ARM.                (line  112)
 * --no-fix-cortex-a53-835769:            ARM.                (line  213)
 * --no-fix-cortex-a8:                    ARM.                (line  204)
-* --no-gc-sections:                      Options.            (line 1050)
-* --no-insn32 <1>:                       Options.            (line 2230)
+* --no-gc-sections:                      Options.            (line 1043)
+* --no-insn32 <1>:                       Options.            (line 2223)
 * --no-insn32:                           MIPS.               (line    6)
-* --no-isolation:                        Options.            (line 2142)
-* --no-keep-memory:                      Options.            (line 1113)
-* --no-leading-underscore:               Options.            (line 1805)
-* --no-merge-exidx-entries <1>:          Options.            (line 2188)
+* --no-isolation:                        Options.            (line 2135)
+* --no-keep-memory:                      Options.            (line 1106)
+* --no-leading-underscore:               Options.            (line 1798)
+* --no-merge-exidx-entries <1>:          Options.            (line 2181)
 * --no-merge-exidx-entries:              ARM.                (line  221)
 * --no-multi-toc:                        PowerPC64 ELF64.    (line   97)
 * --no-omagic:                           Options.            (line  454)
@@ -7745,74 +7738,74 @@
 * --no-plt-align:                        PowerPC64 ELF64.    (line  119)
 * --no-plt-static-chain:                 PowerPC64 ELF64.    (line  127)
 * --no-plt-thread-safe:                  PowerPC64 ELF64.    (line  133)
-* --no-print-gc-sections:                Options.            (line 1074)
+* --no-print-gc-sections:                Options.            (line 1067)
 * --no-save-restore-funcs:               PowerPC64 ELF64.    (line   44)
-* --no-seh:                              Options.            (line 2145)
+* --no-seh:                              Options.            (line 2138)
 * --no-tls-get-addr-optimize:            PowerPC64 ELF64.    (line   57)
 * --no-tls-optimize <1>:                 PowerPC64 ELF64.    (line   52)
 * --no-tls-optimize:                     PowerPC ELF32.      (line   51)
 * --no-toc-optimize:                     PowerPC64 ELF64.    (line   83)
 * --no-toc-sort:                         PowerPC64 ELF64.    (line  109)
-* --no-trampoline:                       Options.            (line 2198)
-* --no-undefined:                        Options.            (line 1120)
-* --no-undefined-version:                Options.            (line 1162)
-* --no-warn-mismatch:                    Options.            (line 1175)
-* --no-warn-search-mismatch:             Options.            (line 1184)
+* --no-trampoline:                       Options.            (line 2191)
+* --no-undefined:                        Options.            (line 1113)
+* --no-undefined-version:                Options.            (line 1155)
+* --no-warn-mismatch:                    Options.            (line 1168)
+* --no-warn-search-mismatch:             Options.            (line 1177)
 * --no-wchar-size-warning:               ARM.                (line  166)
-* --no-whole-archive:                    Options.            (line 1188)
-* --noinhibit-exec:                      Options.            (line 1192)
+* --no-whole-archive:                    Options.            (line 1181)
+* --noinhibit-exec:                      Options.            (line 1185)
 * --non-overlapping-opd:                 PowerPC64 ELF64.    (line   77)
-* --nxcompat:                            Options.            (line 2138)
-* --oformat=OUTPUT-FORMAT:               Options.            (line 1204)
+* --nxcompat:                            Options.            (line 2131)
+* --oformat=OUTPUT-FORMAT:               Options.            (line 1197)
 * --omagic:                              Options.            (line  445)
 * --orphan-handling=MODE:                Options.            (line  606)
-* --out-implib:                          Options.            (line 1924)
-* --output-def:                          Options.            (line 1916)
+* --out-implib:                          Options.            (line 1917)
+* --output-def:                          Options.            (line 1909)
 * --output=OUTPUT:                       Options.            (line  460)
-* --pic-executable:                      Options.            (line 1217)
+* --pic-executable:                      Options.            (line 1210)
 * --pic-veneer:                          ARM.                (line  172)
 * --plt-align:                           PowerPC64 ELF64.    (line  119)
 * --plt-static-chain:                    PowerPC64 ELF64.    (line  127)
 * --plt-thread-safe:                     PowerPC64 ELF64.    (line  133)
 * --plugin:                              SPU ELF.            (line    6)
 * --pop-state:                           Options.            (line  494)
-* --print-gc-sections:                   Options.            (line 1074)
+* --print-gc-sections:                   Options.            (line 1067)
 * --print-map:                           Options.            (line  402)
-* --print-memory-usage:                  Options.            (line 1089)
-* --print-output-format:                 Options.            (line 1083)
+* --print-memory-usage:                  Options.            (line 1082)
+* --print-output-format:                 Options.            (line 1076)
 * --push-state:                          Options.            (line  476)
-* --reduce-memory-overheads:             Options.            (line 1698)
-* --relax:                               Options.            (line 1233)
+* --reduce-memory-overheads:             Options.            (line 1691)
+* --relax:                               Options.            (line 1226)
 * --relax on i960:                       i960.               (line   31)
 * --relax on Nios II:                    Nios II.            (line    6)
 * --relax on PowerPC:                    PowerPC ELF32.      (line    6)
 * --relax on Xtensa:                     Xtensa.             (line   27)
 * --relocatable:                         Options.            (line  510)
 * --require-defined=SYMBOL:              Options.            (line  588)
-* --retain-symbols-file=FILENAME:        Options.            (line 1259)
+* --retain-symbols-file=FILENAME:        Options.            (line 1252)
 * --save-restore-funcs:                  PowerPC64 ELF64.    (line   44)
 * --script=SCRIPT:                       Options.            (line  553)
 * --sdata-got:                           PowerPC ELF32.      (line   33)
-* --section-alignment:                   Options.            (line 2100)
-* --section-start=SECTIONNAME=ORG:       Options.            (line 1415)
+* --section-alignment:                   Options.            (line 2093)
+* --section-start=SECTIONNAME=ORG:       Options.            (line 1408)
 * --secure-plt:                          PowerPC ELF32.      (line   26)
-* --sort-common:                         Options.            (line 1357)
-* --sort-section=alignment:              Options.            (line 1372)
-* --sort-section=name:                   Options.            (line 1368)
-* --split-by-file:                       Options.            (line 1376)
-* --split-by-reloc:                      Options.            (line 1381)
-* --stack:                               Options.            (line 2106)
+* --sort-common:                         Options.            (line 1350)
+* --sort-section=alignment:              Options.            (line 1365)
+* --sort-section=name:                   Options.            (line 1361)
+* --split-by-file:                       Options.            (line 1369)
+* --split-by-reloc:                      Options.            (line 1374)
+* --stack:                               Options.            (line 2099)
 * --stack-analysis:                      SPU ELF.            (line   29)
-* --stats:                               Options.            (line 1394)
+* --stats:                               Options.            (line 1387)
 * --strip-all:                           Options.            (line  540)
 * --strip-debug:                         Options.            (line  544)
 * --stub-group-size:                     PowerPC64 ELF64.    (line    6)
 * --stub-group-size=N <1>:               HPPA ELF32.         (line   12)
 * --stub-group-size=N:                   ARM.                (line  177)
-* --subsystem:                           Options.            (line 2113)
+* --subsystem:                           Options.            (line 2106)
 * --support-old-code:                    ARM.                (line    6)
-* --sysroot=DIRECTORY:                   Options.            (line 1398)
-* --target-help:                         Options.            (line 1105)
+* --sysroot=DIRECTORY:                   Options.            (line 1391)
+* --target-help:                         Options.            (line 1098)
 * --target1-abs:                         ARM.                (line   33)
 * --target1-rel:                         ARM.                (line   33)
 * --target2=TYPE:                        ARM.                (line   38)
@@ -7820,38 +7813,38 @@
 * --tls-get-addr-optimize:               PowerPC64 ELF64.    (line   57)
 * --trace:                               Options.            (line  549)
 * --trace-symbol=SYMBOL:                 Options.            (line  657)
-* --traditional-format:                  Options.            (line 1403)
-* --tsaware:                             Options.            (line 2155)
+* --traditional-format:                  Options.            (line 1396)
+* --tsaware:                             Options.            (line 2148)
 * --undefined=SYMBOL:                    Options.            (line  575)
 * --unique[=SECTION]:                    Options.            (line  632)
-* --unresolved-symbols:                  Options.            (line 1445)
+* --unresolved-symbols:                  Options.            (line 1438)
 * --use-blx:                             ARM.                (line   75)
 * --use-nul-prefixed-import-tables:      ARM.                (line   23)
-* --verbose[=NUMBER]:                    Options.            (line 1474)
+* --verbose[=NUMBER]:                    Options.            (line 1467)
 * --version:                             Options.            (line  641)
-* --version-script=VERSION-SCRIPTFILE:   Options.            (line 1482)
+* --version-script=VERSION-SCRIPTFILE:   Options.            (line 1475)
 * --vfp11-denorm-fix:                    ARM.                (line   84)
-* --warn-alternate-em:                   Options.            (line 1594)
-* --warn-common:                         Options.            (line 1493)
-* --warn-constructors:                   Options.            (line 1561)
-* --warn-multiple-gp:                    Options.            (line 1566)
-* --warn-once:                           Options.            (line 1580)
-* --warn-section-align:                  Options.            (line 1584)
-* --warn-shared-textrel:                 Options.            (line 1591)
-* --warn-unresolved-symbols:             Options.            (line 1597)
-* --wdmdriver:                           Options.            (line 2152)
-* --whole-archive:                       Options.            (line 1606)
-* --wrap=SYMBOL:                         Options.            (line 1620)
+* --warn-alternate-em:                   Options.            (line 1587)
+* --warn-common:                         Options.            (line 1486)
+* --warn-constructors:                   Options.            (line 1554)
+* --warn-multiple-gp:                    Options.            (line 1559)
+* --warn-once:                           Options.            (line 1573)
+* --warn-section-align:                  Options.            (line 1577)
+* --warn-shared-textrel:                 Options.            (line 1584)
+* --warn-unresolved-symbols:             Options.            (line 1590)
+* --wdmdriver:                           Options.            (line 2145)
+* --whole-archive:                       Options.            (line 1599)
+* --wrap=SYMBOL:                         Options.            (line 1613)
 * -A ARCH:                               Options.            (line  122)
 * -a KEYWORD:                            Options.            (line  105)
 * -assert KEYWORD:                       Options.            (line  857)
 * -b FORMAT:                             Options.            (line  134)
 * -Bdynamic:                             Options.            (line  860)
 * -Bgroup:                               Options.            (line  870)
-* -Bshareable:                           Options.            (line 1350)
+* -Bshareable:                           Options.            (line 1343)
 * -Bstatic:                              Options.            (line  877)
 * -Bsymbolic:                            Options.            (line  892)
-* -Bsymbolic-functions:                  Options.            (line  903)
+* -Bsymbolic-functions:                  Options.            (line  899)
 * -c MRI-CMDFILE:                        Options.            (line  158)
 * -call_shared:                          Options.            (line  860)
 * -d:                                    Options.            (line  168)
@@ -7871,42 +7864,42 @@
 * -G VALUE:                              Options.            (line  309)
 * -h NAME:                               Options.            (line  316)
 * -i:                                    Options.            (line  325)
-* -IFILE:                                Options.            (line 1022)
+* -IFILE:                                Options.            (line 1015)
 * -init=NAME:                            Options.            (line  328)
 * -L DIR:                                Options.            (line  367)
 * -l NAMESPEC:                           Options.            (line  334)
 * -M:                                    Options.            (line  402)
 * -m EMULATION:                          Options.            (line  392)
-* -Map=MAPFILE:                          Options.            (line 1109)
+* -Map=MAPFILE:                          Options.            (line 1102)
 * -n:                                    Options.            (line  439)
 * -N:                                    Options.            (line  445)
-* -no-relax:                             Options.            (line 1233)
+* -no-relax:                             Options.            (line 1226)
 * -non_shared:                           Options.            (line  877)
-* -nostdlib:                             Options.            (line 1198)
+* -nostdlib:                             Options.            (line 1191)
 * -O LEVEL:                              Options.            (line  466)
 * -o OUTPUT:                             Options.            (line  460)
 * -P AUDITLIB:                           Options.            (line  177)
-* -pie:                                  Options.            (line 1217)
+* -pie:                                  Options.            (line 1210)
 * -q:                                    Options.            (line  497)
-* -qmagic:                               Options.            (line 1227)
-* -Qy:                                   Options.            (line 1230)
+* -qmagic:                               Options.            (line 1220)
+* -Qy:                                   Options.            (line 1223)
 * -r:                                    Options.            (line  510)
 * -R FILE:                               Options.            (line  529)
-* -rpath-link=DIR:                       Options.            (line 1295)
-* -rpath=DIR:                            Options.            (line 1273)
+* -rpath-link=DIR:                       Options.            (line 1288)
+* -rpath=DIR:                            Options.            (line 1266)
 * -s:                                    Options.            (line  540)
 * -S:                                    Options.            (line  544)
-* -shared:                               Options.            (line 1350)
+* -shared:                               Options.            (line 1343)
 * -soname=NAME:                          Options.            (line  316)
 * -static:                               Options.            (line  877)
 * -t:                                    Options.            (line  549)
 * -T SCRIPT:                             Options.            (line  553)
-* -Tbss=ORG:                             Options.            (line 1424)
-* -Tdata=ORG:                            Options.            (line 1424)
-* -Tldata-segment=ORG:                   Options.            (line 1440)
-* -Trodata-segment=ORG:                  Options.            (line 1434)
-* -Ttext-segment=ORG:                    Options.            (line 1430)
-* -Ttext=ORG:                            Options.            (line 1424)
+* -Tbss=ORG:                             Options.            (line 1417)
+* -Tdata=ORG:                            Options.            (line 1417)
+* -Tldata-segment=ORG:                   Options.            (line 1433)
+* -Trodata-segment=ORG:                  Options.            (line 1427)
+* -Ttext-segment=ORG:                    Options.            (line 1423)
+* -Ttext=ORG:                            Options.            (line 1417)
 * -u SYMBOL:                             Options.            (line  575)
 * -Ur:                                   Options.            (line  596)
 * -v:                                    Options.            (line  641)
@@ -7915,9 +7908,9 @@
 * -X:                                    Options.            (line  651)
 * -Y PATH:                               Options.            (line  666)
 * -y SYMBOL:                             Options.            (line  657)
-* -z defs:                               Options.            (line 1120)
+* -z defs:                               Options.            (line 1113)
 * -z KEYWORD:                            Options.            (line  670)
-* -z muldefs:                            Options.            (line 1128)
+* -z muldefs:                            Options.            (line 1121)
 * .:                                     Location Counter.   (line    6)
 * /DISCARD/:                             Output Section Discarding.
                                                              (line   26)
@@ -7983,7 +7976,7 @@
                                                              (line   19)
 * CHIP (MRI):                            MRI.                (line   58)
 * COLLECT_NO_DEMANGLE:                   Environment.        (line   29)
-* combining symbols, warnings on:        Options.            (line 1493)
+* combining symbols, warnings on:        Options.            (line 1486)
 * command files:                         Scripts.            (line    6)
 * command line:                          Options.            (line    6)
 * common allocation:                     Options.            (line  168)
@@ -8008,7 +8001,7 @@
 * CREATE_OBJECT_SYMBOLS:                 Output Section Keywords.
                                                              (line    9)
 * creating a DEF file:                   WIN32.              (line  158)
-* cross reference table:                 Options.            (line  968)
+* cross reference table:                 Options.            (line  961)
 * cross references:                      Miscellaneous Commands.
                                                              (line   82)
 * current output location:               Location Counter.   (line    6)
@@ -8018,25 +8011,25 @@
                                                              (line   82)
 * DATA_SEGMENT_END(EXP):                 Builtin Functions.  (line  104)
 * DATA_SEGMENT_RELRO_END(OFFSET, EXP):   Builtin Functions.  (line  110)
-* dbx:                                   Options.            (line 1408)
-* DEF files, creating:                   Options.            (line 1916)
+* dbx:                                   Options.            (line 1401)
+* DEF files, creating:                   Options.            (line 1909)
 * default emulation:                     Environment.        (line   21)
 * default input format:                  Environment.        (line    9)
 * defined symbol:                        Options.            (line  588)
 * DEFINED(SYMBOL):                       Builtin Functions.  (line  123)
 * deleting local symbols:                Options.            (line  647)
 * demangling, default:                   Environment.        (line   29)
-* demangling, from command line:         Options.            (line 1009)
+* demangling, from command line:         Options.            (line 1002)
 * direct linking to a dll:               WIN32.              (line  239)
 * discarding sections:                   Output Section Discarding.
                                                              (line    6)
 * discontinuous memory:                  MEMORY.             (line    6)
-* DLLs, creating:                        Options.            (line 1924)
-* DLLs, linking to:                      Options.            (line 1948)
+* DLLs, creating:                        Options.            (line 1917)
+* DLLs, linking to:                      Options.            (line 1941)
 * dot:                                   Location Counter.   (line    6)
 * dot inside sections:                   Location Counter.   (line   36)
 * dot outside sections:                  Location Counter.   (line   66)
-* dynamic linker, from command line:     Options.            (line 1022)
+* dynamic linker, from command line:     Options.            (line 1015)
 * dynamic symbol table:                  Options.            (line  221)
 * ELF program headers:                   PHDRS.              (line    6)
 * emulation:                             Options.            (line  392)
@@ -8080,7 +8073,7 @@
 * forcing the creation of dynamic sections: Options.         (line  506)
 * FORMAT (MRI):                          MRI.                (line   66)
 * functions in expressions:              Builtin Functions.  (line    6)
-* garbage collection <1>:                Options.            (line 1050)
+* garbage collection <1>:                Options.            (line 1043)
 * garbage collection:                    Input Section Keep. (line    6)
 * generating optimized output:           Options.            (line  466)
 * GNU linker:                            Overview.           (line    6)
@@ -8090,8 +8083,8 @@
 * groups of archives:                    Options.            (line  804)
 * H8/300 support:                        H8/300.             (line    6)
 * header size:                           Builtin Functions.  (line  191)
-* heap size:                             Options.            (line 1851)
-* help:                                  Options.            (line 1101)
+* heap size:                             Options.            (line 1844)
+* help:                                  Options.            (line 1094)
 * HIDDEN:                                HIDDEN.             (line    6)
 * holes:                                 Location Counter.   (line   12)
 * holes, filling:                        Output Section Data.
@@ -8099,13 +8092,13 @@
 * HPPA multiple sub-space stubs:         HPPA ELF32.         (line    6)
 * HPPA stub grouping:                    HPPA ELF32.         (line   12)
 * i960 support:                          i960.               (line    6)
-* image base:                            Options.            (line 1858)
+* image base:                            Options.            (line 1851)
 * implicit linker scripts:               Implicit Linker Scripts.
                                                              (line    6)
 * import libraries:                      WIN32.              (line   10)
 * INCLUDE FILENAME:                      File Commands.      (line    9)
 * including a linker script:             File Commands.      (line    9)
-* including an entire archive:           Options.            (line 1606)
+* including an entire archive:           Options.            (line 1599)
 * incremental link:                      Options.            (line  325)
 * INHIBIT_COMMON_ALLOCATION:             Miscellaneous Commands.
                                                              (line   51)
@@ -8141,14 +8134,14 @@
 * ld bugs, reporting:                    Bug Reporting.      (line    6)
 * LD_FEATURE(STRING):                    Miscellaneous Commands.
                                                              (line  104)
-* ldata segment origin, cmd line:        Options.            (line 1441)
+* ldata segment origin, cmd line:        Options.            (line 1434)
 * LDEMULATION:                           Environment.        (line   21)
 * len =:                                 MEMORY.             (line   74)
 * LENGTH =:                              MEMORY.             (line   74)
 * LENGTH(MEMORY):                        Builtin Functions.  (line  140)
 * library search path in linker script:  File Commands.      (line   76)
 * link map:                              Options.            (line  402)
-* link-time runtime library search path: Options.            (line 1295)
+* link-time runtime library search path: Options.            (line 1288)
 * linker crash:                          Bug Criteria.       (line    9)
 * linker script concepts:                Basic Script Concepts.
                                                              (line    6)
@@ -8183,7 +8176,7 @@
 * memory regions:                        MEMORY.             (line    6)
 * memory regions and sections:           Output Section Region.
                                                              (line    6)
-* memory usage:                          Options.            (line 1113)
+* memory usage:                          Options.            (line 1106)
 * Merging exidx entries:                 ARM.                (line  221)
 * MIN:                                   Builtin Functions.  (line  153)
 * MIPS microMIPS instruction choice selection: MIPS.         (line    6)
@@ -8225,10 +8218,10 @@
 * ORIGIN(MEMORY):                        Builtin Functions.  (line  163)
 * orphan:                                Orphan Sections.    (line    6)
 * orphan sections:                       Options.            (line  606)
-* output file after errors:              Options.            (line 1192)
+* output file after errors:              Options.            (line 1185)
 * output file format in linker script:   Format Commands.    (line   10)
 * output file name in linker script:     File Commands.      (line   66)
-* output format:                         Options.            (line 1083)
+* output format:                         Options.            (line 1076)
 * output section alignment:              Forced Output Alignment.
                                                              (line    6)
 * output section attributes:             Output Section Attributes.
@@ -8248,7 +8241,7 @@
 * PHDRS:                                 PHDRS.              (line    6)
 * PIC_VENEER:                            ARM.                (line  172)
 * pop state governing input file handling: Options.          (line  494)
-* position independent executables:      Options.            (line 1219)
+* position independent executables:      Options.            (line 1212)
 * PowerPC ELF32 options:                 PowerPC ELF32.      (line   16)
 * PowerPC GOT:                           PowerPC ELF32.      (line   33)
 * PowerPC long branches:                 PowerPC ELF32.      (line    6)
@@ -8293,7 +8286,7 @@
 * REGION_ALIAS(ALIAS, REGION):           REGION_ALIAS.       (line    6)
 * regions of memory:                     MEMORY.             (line    6)
 * relative expressions:                  Expression Section. (line    6)
-* relaxing addressing modes:             Options.            (line 1233)
+* relaxing addressing modes:             Options.            (line 1226)
 * relaxing on H8/300:                    H8/300.             (line    9)
 * relaxing on i960:                      i960.               (line   31)
 * relaxing on M68HC11:                   M68HC11/68HC12.     (line   12)
@@ -8306,13 +8299,13 @@
 * reporting bugs in ld:                  Reporting Bugs.     (line    6)
 * requirements for BFD:                  BFD.                (line   16)
 * retain relocations in final executable: Options.           (line  497)
-* retaining specified symbols:           Options.            (line 1259)
-* rodata segment origin, cmd line:       Options.            (line 1435)
+* retaining specified symbols:           Options.            (line 1252)
+* rodata segment origin, cmd line:       Options.            (line 1428)
 * ROM initialized data:                  Output Section LMA. (line   39)
 * round up expression:                   Builtin Functions.  (line   38)
 * round up location counter:             Builtin Functions.  (line   38)
 * runtime library name:                  Options.            (line  316)
-* runtime library search path:           Options.            (line 1273)
+* runtime library search path:           Options.            (line 1266)
 * runtime pseudo-relocation:             WIN32.              (line  217)
 * scaled integers:                       Constants.          (line   15)
 * scommon section:                       Input Section Common.
@@ -8327,7 +8320,7 @@
                                                              (line    6)
 * section address in expression:         Builtin Functions.  (line   17)
 * section alignment:                     Builtin Functions.  (line   64)
-* section alignment, warnings on:        Options.            (line 1584)
+* section alignment, warnings on:        Options.            (line 1577)
 * section data:                          Output Section Data.
                                                              (line    6)
 * section fill pattern:                  Output Section Fill.
@@ -8347,10 +8340,10 @@
 * sections, discarding:                  Output Section Discarding.
                                                              (line    6)
 * sections, orphan:                      Options.            (line  606)
-* segment origins, cmd line:             Options.            (line 1424)
+* segment origins, cmd line:             Options.            (line 1417)
 * SEGMENT_START(SEGMENT, DEFAULT):       Builtin Functions.  (line  166)
 * segments, ELF:                         PHDRS.              (line    6)
-* shared libraries:                      Options.            (line 1352)
+* shared libraries:                      Options.            (line 1345)
 * SHORT(EXPRESSION):                     Output Section Data.
                                                              (line    6)
 * SIZEOF(SECTION):                       Builtin Functions.  (line  175)
@@ -8376,14 +8369,14 @@
 * SPU plugins:                           SPU ELF.            (line    6)
 * SQUAD(EXPRESSION):                     Output Section Data.
                                                              (line    6)
-* stack size:                            Options.            (line 2106)
+* stack size:                            Options.            (line 2099)
 * standard Unix system:                  Options.            (line    7)
 * start of execution:                    Entry Point.        (line    6)
 * STARTUP(FILENAME):                     File Commands.      (line   84)
 * STM32L4xx erratum workaround:          ARM.                (line  121)
 * strip all symbols:                     Options.            (line  540)
 * strip debugger symbols:                Options.            (line  544)
-* stripping all but some symbols:        Options.            (line 1259)
+* stripping all but some symbols:        Options.            (line 1252)
 * STUB_GROUP_SIZE:                       ARM.                (line  177)
 * SUBALIGN(SUBSECTION_ALIGN):            Forced Input Alignment.
                                                              (line    6)
@@ -8395,46 +8388,46 @@
 * symbol versions:                       VERSION.            (line    6)
 * symbol-only input:                     Options.            (line  529)
 * symbolic constants:                    Symbolic Constants. (line    6)
-* symbols, from command line:            Options.            (line  997)
+* symbols, from command line:            Options.            (line  990)
 * symbols, relocatable and absolute:     Expression Section. (line    6)
 * symbols, require defined:              Options.            (line  588)
-* symbols, retaining selectively:        Options.            (line 1259)
-* synthesizing linker:                   Options.            (line 1233)
+* symbols, retaining selectively:        Options.            (line 1252)
+* synthesizing linker:                   Options.            (line 1226)
 * synthesizing on H8/300:                H8/300.             (line   14)
 * TARGET(BFDNAME):                       Format Commands.    (line   35)
 * TARGET1:                               ARM.                (line   33)
 * TARGET2:                               ARM.                (line   38)
-* text segment origin, cmd line:         Options.            (line 1431)
+* text segment origin, cmd line:         Options.            (line 1424)
 * thumb entry point:                     ARM.                (line   17)
 * TI COFF versions:                      TI COFF.            (line    6)
-* traditional format:                    Options.            (line 1403)
+* traditional format:                    Options.            (line 1396)
 * trampoline generation on M68HC11:      M68HC11/68HC12.     (line   31)
 * trampoline generation on M68HC12:      M68HC11/68HC12.     (line   31)
 * unallocated address, next:             Builtin Functions.  (line  157)
 * undefined symbol:                      Options.            (line  575)
 * undefined symbol in linker script:     Miscellaneous Commands.
                                                              (line   39)
-* undefined symbols, warnings on:        Options.            (line 1580)
+* undefined symbols, warnings on:        Options.            (line 1573)
 * uninitialized data placement:          Input Section Common.
                                                              (line    6)
 * unspecified memory:                    Output Section Data.
                                                              (line   39)
-* usage:                                 Options.            (line 1101)
+* usage:                                 Options.            (line 1094)
 * USE_BLX:                               ARM.                (line   75)
 * using a DEF file:                      WIN32.              (line   57)
 * using auto-export functionality:       WIN32.              (line   22)
 * Using decorations:                     WIN32.              (line  162)
 * variables, defining:                   Assignments.        (line    6)
-* verbose[=NUMBER]:                      Options.            (line 1474)
+* verbose[=NUMBER]:                      Options.            (line 1467)
 * version:                               Options.            (line  641)
 * version script:                        VERSION.            (line    6)
-* version script, symbol versions:       Options.            (line 1482)
+* version script, symbol versions:       Options.            (line 1475)
 * VERSION {script text}:                 VERSION.            (line    6)
 * versions of symbols:                   VERSION.            (line    6)
 * VFP11_DENORM_FIX:                      ARM.                (line   84)
-* warnings, on combining symbols:        Options.            (line 1493)
-* warnings, on section alignment:        Options.            (line 1584)
-* warnings, on undefined symbols:        Options.            (line 1580)
+* warnings, on combining symbols:        Options.            (line 1486)
+* warnings, on section alignment:        Options.            (line 1577)
+* warnings, on undefined symbols:        Options.            (line 1573)
 * weak externals:                        WIN32.              (line  407)
 * what is this?:                         Overview.           (line    6)
 * wildcard file name patterns:           Input Section Wildcards.
@@ -8449,87 +8442,87 @@
 Node: Overview1493
 Node: Invocation2607
 Node: Options3015
-Node: Environment104154
-Node: Scripts105914
-Node: Basic Script Concepts107648
-Node: Script Format110356
-Node: Simple Example111219
-Node: Simple Commands114315
-Node: Entry Point114821
-Node: File Commands115754
-Node: Format Commands119874
-Node: REGION_ALIAS121830
-Node: Miscellaneous Commands126662
-Node: Assignments131286
-Node: Simple Assignments131797
-Node: HIDDEN133532
-Node: PROVIDE134162
-Node: PROVIDE_HIDDEN135355
-Node: Source Code Reference135599
-Node: SECTIONS139515
-Node: Output Section Description141406
-Node: Output Section Name142650
-Node: Output Section Address143526
-Node: Input Section145761
-Node: Input Section Basics146562
-Node: Input Section Wildcards150468
-Node: Input Section Common155675
-Node: Input Section Keep157157
-Node: Input Section Example157647
-Node: Output Section Data158615
-Node: Output Section Keywords161392
-Node: Output Section Discarding164961
-Node: Output Section Attributes166454
-Node: Output Section Type167555
-Node: Output Section LMA168626
-Node: Forced Output Alignment171697
-Node: Forced Input Alignment172127
-Node: Output Section Constraint172516
-Node: Output Section Region172944
-Node: Output Section Phdr173377
-Node: Output Section Fill174041
-Node: Overlay Description175183
-Node: MEMORY179629
-Node: PHDRS184006
-Node: VERSION189260
-Node: Expressions197353
-Node: Constants198282
-Node: Symbolic Constants199157
-Node: Symbols199708
-Node: Orphan Sections200455
-Node: Location Counter201792
-Node: Operators206228
-Node: Evaluation207150
-Node: Expression Section208514
-Node: Builtin Functions212378
-Node: Implicit Linker Scripts220618
-Node: Machine Dependent221393
-Node: H8/300222517
-Node: i960224579
-Node: M68HC11/68HC12226275
-Node: ARM227717
-Node: HPPA ELF32238737
-Node: M68K240360
-Node: MIPS241269
-Node: MMIX241793
-Node: MSP430242958
-Node: NDS32243998
-Node: Nios II244964
-Node: PowerPC ELF32246280
-Node: PowerPC64 ELF64249111
-Node: SPU ELF256443
-Node: TI COFF259075
-Node: WIN32259601
-Node: Xtensa279727
-Node: BFD282692
-Node: BFD outline284147
-Node: BFD information loss285433
-Node: Canonical format287950
-Node: Reporting Bugs292307
-Node: Bug Criteria293001
-Node: Bug Reporting293700
-Node: MRI300739
-Node: GNU Free Documentation License305382
-Node: LD Index330538
+Node: Environment103651
+Node: Scripts105411
+Node: Basic Script Concepts107145
+Node: Script Format109853
+Node: Simple Example110716
+Node: Simple Commands113812
+Node: Entry Point114318
+Node: File Commands115251
+Node: Format Commands119371
+Node: REGION_ALIAS121327
+Node: Miscellaneous Commands126159
+Node: Assignments130783
+Node: Simple Assignments131294
+Node: HIDDEN133029
+Node: PROVIDE133659
+Node: PROVIDE_HIDDEN134852
+Node: Source Code Reference135096
+Node: SECTIONS139012
+Node: Output Section Description140903
+Node: Output Section Name142147
+Node: Output Section Address143023
+Node: Input Section145258
+Node: Input Section Basics146059
+Node: Input Section Wildcards149965
+Node: Input Section Common155172
+Node: Input Section Keep156654
+Node: Input Section Example157144
+Node: Output Section Data158112
+Node: Output Section Keywords160889
+Node: Output Section Discarding164458
+Node: Output Section Attributes165951
+Node: Output Section Type167052
+Node: Output Section LMA168123
+Node: Forced Output Alignment171194
+Node: Forced Input Alignment171624
+Node: Output Section Constraint172013
+Node: Output Section Region172441
+Node: Output Section Phdr172874
+Node: Output Section Fill173538
+Node: Overlay Description174680
+Node: MEMORY179126
+Node: PHDRS183503
+Node: VERSION188757
+Node: Expressions196850
+Node: Constants197779
+Node: Symbolic Constants198654
+Node: Symbols199205
+Node: Orphan Sections199952
+Node: Location Counter201289
+Node: Operators205725
+Node: Evaluation206647
+Node: Expression Section208011
+Node: Builtin Functions211875
+Node: Implicit Linker Scripts220115
+Node: Machine Dependent220890
+Node: H8/300222014
+Node: i960224076
+Node: M68HC11/68HC12225772
+Node: ARM227214
+Node: HPPA ELF32238234
+Node: M68K239857
+Node: MIPS240766
+Node: MMIX241290
+Node: MSP430242455
+Node: NDS32243495
+Node: Nios II244461
+Node: PowerPC ELF32245777
+Node: PowerPC64 ELF64248608
+Node: SPU ELF255940
+Node: TI COFF258572
+Node: WIN32259098
+Node: Xtensa279224
+Node: BFD282189
+Node: BFD outline283644
+Node: BFD information loss284930
+Node: Canonical format287447
+Node: Reporting Bugs291804
+Node: Bug Criteria292498
+Node: Bug Reporting293197
+Node: MRI300236
+Node: GNU Free Documentation License304879
+Node: LD Index330035
 
 End Tag Table
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/ld.texinfo binutils-2.26-avr/ld/ld.texinfo
--- binutils-2.26.1-src/ld/ld.texinfo	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/ld.texinfo	2016-11-16 03:51:00.000000000 -0800
@@ -1325,21 +1325,15 @@
 When creating a shared library, bind references to global symbols to the
 definition within the shared library, if any.  Normally, it is possible
 for a program linked against a shared library to override the definition
-within the shared library.  This option can also be used with the
-@option{--export-dynamic} option, when creating a position independent
-executable, to bind references to global symbols to the definition within
-the executable.  This option is only meaningful on ELF platforms which
-support shared libraries and position independent executables.
+within the shared library.  This option is only meaningful on ELF
+platforms which support shared libraries.
 
 @kindex -Bsymbolic-functions
 @item -Bsymbolic-functions
 When creating a shared library, bind references to global function
 symbols to the definition within the shared library, if any.
-This option can also be used with the @option{--export-dynamic} option,
-when creating a position independent executable, to bind references
-to global function symbols to the definition within the executable.
 This option is only meaningful on ELF platforms which support shared
-libraries and position independent executables.
+libraries.
 
 @kindex --dynamic-list=@var{dynamic-list-file}
 @item --dynamic-list=@var{dynamic-list-file}
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/lexsup.c binutils-2.26-avr/ld/lexsup.c
--- binutils-2.26.1-src/ld/lexsup.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/lexsup.c	2016-11-16 03:51:00.000000000 -0800
@@ -1586,14 +1586,15 @@
   /* We may have -Bsymbolic, -Bsymbolic-functions, --dynamic-list-data,
      --dynamic-list-cpp-new, --dynamic-list-cpp-typeinfo and
      --dynamic-list FILE.  -Bsymbolic and -Bsymbolic-functions are
-     for PIC outputs.  -Bsymbolic overrides all others and vice versa.  */
+     for shared libraries.  -Bsymbolic overrides all others and vice
+     versa.  */
   switch (command_line.symbolic)
     {
     case symbolic_unset:
       break;
     case symbolic:
-      /* -Bsymbolic is for PIC output only.  */
-      if (bfd_link_pic (&link_info))
+      /* -Bsymbolic is for shared library only.  */
+      if (bfd_link_dll (&link_info))
 	{
 	  link_info.symbolic = TRUE;
 	  /* Should we free the unused memory?  */
@@ -1602,8 +1603,8 @@
 	}
       break;
     case symbolic_functions:
-      /* -Bsymbolic-functions is for PIC output only.  */
-      if (bfd_link_pic (&link_info))
+      /* -Bsymbolic-functions is for shared library only.  */
+      if (bfd_link_dll (&link_info))
 	command_line.dynamic_list = dynamic_list_data;
       break;
     }
@@ -1686,6 +1687,7 @@
     if (strcmp (seg->name, name) == 0)
       {
 	seg->value = val;
+	lang_section_start (section, exp_intop (val), seg);
 	return;
       }
   /* There was no existing value so we must create a new segment
Only in binutils-2.26-avr/ld/po: .cvsignore
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/scripttempl/avr.sc binutils-2.26-avr/ld/scripttempl/avr.sc
--- binutils-2.26.1-src/ld/scripttempl/avr.sc	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/scripttempl/avr.sc	2016-11-16 03:51:00.000000000 -0800
@@ -113,6 +113,10 @@
     ${RELOCATING+ *(.trampolines*)}
     ${CONSTRUCTING+ __trampolines_end = . ; }
 
+    /* avr-libc expects these data to reside in lower 64K. */
+    ${RELOCATING+ *libprintf_flt.a:*(.progmem.data)}
+    ${RELOCATING+ *libc.a:*(.progmem.data)}
+
     ${RELOCATING+ *(.progmem*)}
     
     ${RELOCATING+. = ALIGN(2);}
@@ -210,7 +214,7 @@
   ${RELOCATING+ __data_load_end = __data_load_start + SIZEOF(.data); }
 
   /* Global data not cleared after reset.  */
-  .noinit ${RELOCATING-0}:
+  .noinit ${RELOCATING+ ADDR(.bss) + SIZEOF (.bss)} ${RELOCATING-0}: ${RELOCATING+ AT (ADDR (.noinit))}
   {
     ${RELOCATING+ PROVIDE (__noinit_start = .) ; }
     *(.noinit*)
@@ -244,6 +248,11 @@
     KEEP(*(.signature*))
   } ${RELOCATING+ > signature}
 
+  .user_signatures ${RELOCATING-0}:
+  {
+    KEEP(*(.user_signatures*))
+  } ${RELOCATING+ > user_signatures}
+
   /* Stabs debugging sections.  */
   .stab 0 : { *(.stab) }
   .stabstr 0 : { *(.stabstr) }
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/scripttempl/avrtiny.sc binutils-2.26-avr/ld/scripttempl/avrtiny.sc
--- binutils-2.26.1-src/ld/scripttempl/avrtiny.sc	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/scripttempl/avrtiny.sc	2016-11-16 03:51:00.000000000 -0800
@@ -96,7 +96,7 @@
   .rela.plt    ${RELOCATING-0} : { *(.rela.plt)	}
 
   /* Internal text space or external memory.  */
-  .text ${RELOCATING-0} : ${RELOCATING+ AT (0x0)}
+  .text ${RELOCATING-0} : 
   {
     *(.vectors)
     KEEP(*(.vectors))
@@ -113,6 +113,10 @@
     ${RELOCATING+ *(.trampolines*)}
     ${CONSTRUCTING+ __trampolines_end = . ; }
 
+    /* avr-libc expects these data to reside in lower 64K. */
+    ${RELOCATING+ *libprintf_flt.a:*(.progmem.data)}
+    ${RELOCATING+ *libc.a:*(.progmem.data)}
+
     ${RELOCATING+ *(.progmem*)}
 
     ${RELOCATING+. = ALIGN(2);}
@@ -210,7 +214,7 @@
   ${RELOCATING+ __data_load_end = __data_load_start + SIZEOF(.data); }
 
   /* Global data not cleared after reset.  */
-  .noinit ${RELOCATING-0}:
+  .noinit ${RELOCATING+ ADDR(.bss) + SIZEOF (.bss)} ${RELOCATING-0} : ${RELOCATING+ AT (ADDR (.noinit))}
   {
     ${RELOCATING+ PROVIDE (__noinit_start = .) ; }
     *(.noinit*)
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ChangeLog binutils-2.26-avr/ld/testsuite/ChangeLog
--- binutils-2.26.1-src/ld/testsuite/ChangeLog	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -1,3 +1,10 @@
+2015-11-17  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
+
+	* ld-avr/bit-insns-1.s: New test input.
+	* ld-avr/reloc-port5-1.d: New test for bit addressable register
+	relocation (BFD_RELOC_AVR_PORT5).
+	* ld-avr/reloc-port5-2.d: Likewise.
+
 2016-01-19  Nick Clifton  <nickc@redhat.com>
 
 	* ld-elf/pr18735.d: Allow for extra symbols between
@@ -117,12 +124,12 @@
 	* ld-x86-64/plt-main3.rd: Also check GOTPCRELX.
 
 2015-10-29  Catherine Moore  <clm@codesourcery.com>
-
-	* ld-mips-elf/mips16-fp-stub-1.s: New.
-	* ld-mips-elf/mips16-fp-stub-2.s: New.
-	* ld-mips-elf/mips16-fp-stub.d: New.
-	* ld-mips-elf/mips-elf.exp: Run new tests.
-	* ld-mips-elf/mips16-intermix.d: Update expected output.
+    
+    	* ld-mips-elf/mips16-fp-stub-1.s: New.
+    	* ld-mips-elf/mips16-fp-stub-2.s: New.
+    	* ld-mips-elf/mips16-fp-stub.d: New.
+    	* ld-mips-elf/mips-elf.exp: Run new tests.
+    	* ld-mips-elf/mips16-intermix.d: Update expected output.
 
 2015-10-28  H.J. Lu  <hongjiu.lu@intel.com>
 
@@ -133,7 +140,7 @@
 	* ld-x86-64/pr19162b.s: Likewise.
 
 2015-10-27  Laurent Alfonsi <laurent.alfonsi@st.com>
-	    Christophe Monat <christophe.monat@st.com>
+            Christophe Monat <christophe.monat@st.com>
 
 	* ld-arm/arm-elf.exp (armelftests_common): Add STM32L4XX
 	tests.
@@ -1069,6 +1076,7 @@
 
 2015-05-28  Catherine Moore  <clm@codesourcery.com>
 
+	ld/testsuite/
 	* ld-mips-elf/compact-eh.ld: New linker script.
 	* ld-mips-elf/compact-eh1.d: New.
 	* ld-mips-elf/compact-eh1.s: New.
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/config/default.exp binutils-2.26-avr/ld/testsuite/config/default.exp
--- binutils-2.26.1-src/ld/testsuite/config/default.exp	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/config/default.exp	2016-11-16 03:51:00.000000000 -0800
@@ -134,9 +134,14 @@
 proc get_target_emul {} {
     global target_triplet
     global srcdir
-    set status [catch "exec sh -c \"targ='$target_triplet' && . $srcdir/../configure.tgt && echo \\\$targ_emul\"" result]
-    if $status { error "Error getting emulation name: $result" }
-    return $result
+    global board
+    if {[board_info $board exists hosting_emu]} {
+      return [board_info $board hosting_emu]
+    } else {
+      set status [catch "exec sh -c \"targ='$target_triplet' && . $srcdir/../configure.tgt && echo \\\$targ_emul\"" result]
+      if $status { error "Error getting emulation name: $result" }
+      return $result
+   }
 }
 
 if [isnative] {
@@ -148,6 +153,11 @@
 }
 if ![info exists HOSTING_EMU] { set HOSTING_EMU "-m [get_target_emul]" }
 
+if { [istarget avr-*-*] } {
+    global ASFLAGS
+    set ASFLAGS "$HOSTING_EMU"
+}
+
 #
 # ld_version -- extract and print the version number of ld compiler (GCC)
 #
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-aarch64/aarch64-elf.exp binutils-2.26-avr/ld/testsuite/ld-aarch64/aarch64-elf.exp
--- binutils-2.26.1-src/ld/testsuite/ld-aarch64/aarch64-elf.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-aarch64/aarch64-elf.exp	2016-11-16 03:51:00.000000000 -0800
@@ -170,6 +170,7 @@
 
 run_dump_test "limit-b"
 run_dump_test "limit-bl"
+run_dump_test "farcall-section"
 run_dump_test "farcall-back"
 run_dump_test "farcall-b-defsym"
 run_dump_test "farcall-bl-defsym"
@@ -180,8 +181,6 @@
 run_dump_test "farcall-b"
 run_dump_test "farcall-b-none-function"
 run_dump_test "farcall-bl-none-function"
-run_dump_test "farcall-b-section"
-run_dump_test "farcall-bl-section"
 
 run_dump_test "tls-relax-all"
 run_dump_test "tls-relax-gd-le"
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-aarch64/farcall-bl-none-function.d binutils-2.26-avr/ld/testsuite/ld-aarch64/farcall-bl-none-function.d
--- binutils-2.26.1-src/ld/testsuite/ld-aarch64/farcall-bl-none-function.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-aarch64/farcall-bl-none-function.d	2016-11-16 03:51:00.000000000 -0800
@@ -2,23 +2,4 @@
 #source: farcall-bl-none-function.s
 #as:
 #ld: -Ttext 0x1000 --section-start .foo=0x8001000
-#objdump: -dr
-#...
-
-Disassembly of section .text:
-
-.* <_start>:
-    1000:	94000003 	bl	100c <__bar_veneer>
-    1004:	d65f03c0 	ret
-    1008:	14000007 	b	1024 <__bar_veneer\+0x18>
-
-.* <__bar_veneer>:
-    100c:	90040010 	adrp	x16, 8001000 <bar>
-    1010:	91000210 	add	x16, x16, #0x0
-    1014:	d61f0200 	br	x16
-	...
-
-Disassembly of section .foo:
-
-.* <bar>:
- 8001000:	d65f03c0 	ret
+#error: .*\(.text\+0x0\): relocation truncated to fit: R_AARCH64_CALL26 against symbol `bar'.*
Only in binutils-2.26.1-src/ld/testsuite/ld-aarch64: farcall-bl-section.d
Only in binutils-2.26.1-src/ld/testsuite/ld-aarch64: farcall-bl-section.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-aarch64/farcall-b-none-function.d binutils-2.26-avr/ld/testsuite/ld-aarch64/farcall-b-none-function.d
--- binutils-2.26.1-src/ld/testsuite/ld-aarch64/farcall-b-none-function.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-aarch64/farcall-b-none-function.d	2016-11-16 03:51:00.000000000 -0800
@@ -2,23 +2,4 @@
 #source: farcall-b-none-function.s
 #as:
 #ld: -Ttext 0x1000 --section-start .foo=0x8001000
-#objdump: -dr
-#...
-
-Disassembly of section .text:
-
-.* <_start>:
-    1000:	14000003 	b	100c <__bar_veneer>
-    1004:	d65f03c0 	ret
-    1008:	14000007 	b	1024 <__bar_veneer\+0x18>
-
-.* <__bar_veneer>:
-    100c:	90040010 	adrp	x16, 8001000 <bar>
-    1010:	91000210 	add	x16, x16, #0x0
-    1014:	d61f0200 	br	x16
-	...
-
-Disassembly of section .foo:
-
-.* <bar>:
- 8001000:	d65f03c0 	ret
+#error: .*\(.text\+0x0\): relocation truncated to fit: R_AARCH64_JUMP26 against symbol `bar'.*
Only in binutils-2.26.1-src/ld/testsuite/ld-aarch64: farcall-b-section.d
Only in binutils-2.26.1-src/ld/testsuite/ld-aarch64: farcall-b-section.s
Only in binutils-2.26-avr/ld/testsuite/ld-aarch64: farcall-section.d
Only in binutils-2.26-avr/ld/testsuite/ld-aarch64: farcall-section.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-arm/arm-elf.exp binutils-2.26-avr/ld/testsuite/ld-arm/arm-elf.exp
--- binutils-2.26.1-src/ld/testsuite/ld-arm/arm-elf.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-arm/arm-elf.exp	2016-11-16 03:51:00.000000000 -0800
@@ -167,14 +167,10 @@
      "-EL --fix-stm32l4xx-629360 -Ttext=0x8000" "" "-EL -mcpu=cortex-m4 -mfpu=fpv4-sp-d16" {stm32l4xx-fix-vldm.s}
      {{objdump -dr stm32l4xx-fix-vldm.d}}
      "stm32l4xx-fix-vldm"}
-    {"STM32L4XX erratum fix VLDM, DP registers"
-     "-EL --fix-stm32l4xx-629360 -Ttext=0x8000" "" "-EL -mcpu=cortex-m4 -mfpu=fpv4-sp-d16" {stm32l4xx-fix-vldm-dp.s}
-     {{objdump -dr stm32l4xx-fix-vldm-dp.d}}
-     "stm32l4xx-fix-vldm-dp"}
     {"STM32L4XX erratum fix ALL"
      "-EL --fix-stm32l4xx-629360=all -Ttext=0x8000" "" "-EL -mcpu=cortex-m4 -mfpu=fpv4-sp-d16" {stm32l4xx-fix-all.s}
      {{objdump -dr stm32l4xx-fix-all.d}}
-     "stm32l4xx-fix-all"}
+     "stm32l4xx-fix-vldm-all"}
     {"STM32L4XX erratum fix in IT context"
      "-EL --fix-stm32l4xx-629360 -Ttext=0x8000" "" "-EL -mcpu=cortex-m4 -mfpu=fpv4-sp-d16" {stm32l4xx-fix-it-block.s}
      {{objdump -dr stm32l4xx-fix-it-block.d}}
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-arm/stm32l4xx-fix-all.d binutils-2.26-avr/ld/testsuite/ld-arm/stm32l4xx-fix-all.d
--- binutils-2.26.1-src/ld/testsuite/ld-arm/stm32l4xx-fix-all.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-arm/stm32l4xx-fix-all.d	2016-11-16 03:51:00.000000000 -0800
@@ -6,37 +6,37 @@
 
 00008000 <__stm32l4xx_veneer_0>:
     8000:	e899 01fe 	ldmia\.w	r9, {r1, r2, r3, r4, r5, r6, r7, r8}
-    8004:	f000 b86e 	b\.w	80e4 <__stm32l4xx_veneer_0_r>
+    8004:	f000 b84a 	b\.w	809c <__stm32l4xx_veneer_0_r>
     8008:	f7f0 a000 	udf\.w	#0
     800c:	f7f0 a000 	udf\.w	#0
 
 00008010 <__stm32l4xx_veneer_1>:
     8010:	e8b9 01fe 	ldmia\.w	r9!, {r1, r2, r3, r4, r5, r6, r7, r8}
-    8014:	f000 b868 	b\.w	80e8 <__stm32l4xx_veneer_1_r>
+    8014:	f000 b844 	b\.w	80a0 <__stm32l4xx_veneer_1_r>
     8018:	f7f0 a000 	udf\.w	#0
     801c:	f7f0 a000 	udf\.w	#0
 
 00008020 <__stm32l4xx_veneer_2>:
     8020:	e919 01fe 	ldmdb	r9, {r1, r2, r3, r4, r5, r6, r7, r8}
-    8024:	f000 b862 	b\.w	80ec <__stm32l4xx_veneer_2_r>
+    8024:	f000 b83e 	b\.w	80a4 <__stm32l4xx_veneer_2_r>
     8028:	f7f0 a000 	udf\.w	#0
     802c:	f7f0 a000 	udf\.w	#0
 
 00008030 <__stm32l4xx_veneer_3>:
     8030:	e939 01fe 	ldmdb	r9!, {r1, r2, r3, r4, r5, r6, r7, r8}
-    8034:	f000 b85c 	b\.w	80f0 <__stm32l4xx_veneer_3_r>
+    8034:	f000 b838 	b\.w	80a8 <__stm32l4xx_veneer_3_r>
     8038:	f7f0 a000 	udf\.w	#0
     803c:	f7f0 a000 	udf\.w	#0
 
 00008040 <__stm32l4xx_veneer_4>:
     8040:	e8bd 01fe 	ldmia\.w	sp!, {r1, r2, r3, r4, r5, r6, r7, r8}
-    8044:	f000 b856 	b\.w	80f4 <__stm32l4xx_veneer_4_r>
+    8044:	f000 b832 	b\.w	80ac <__stm32l4xx_veneer_4_r>
     8048:	f7f0 a000 	udf\.w	#0
     804c:	f7f0 a000 	udf\.w	#0
 
 00008050 <__stm32l4xx_veneer_5>:
     8050:	ecd9 0a08 	vldmia	r9, {s1-s8}
-    8054:	f000 b850 	b\.w	80f8 <__stm32l4xx_veneer_5_r>
+    8054:	f000 b82c 	b\.w	80b0 <__stm32l4xx_veneer_5_r>
     8058:	f7f0 a000 	udf\.w	#0
     805c:	f7f0 a000 	udf\.w	#0
     8060:	f7f0 a000 	udf\.w	#0
@@ -44,7 +44,7 @@
 
 00008068 <__stm32l4xx_veneer_6>:
     8068:	ecf6 4a08 	vldmia	r6!, {s9-s16}
-    806c:	f000 b846 	b\.w	80fc <__stm32l4xx_veneer_6_r>
+    806c:	f000 b822 	b\.w	80b4 <__stm32l4xx_veneer_6_r>
     8070:	f7f0 a000 	udf\.w	#0
     8074:	f7f0 a000 	udf\.w	#0
     8078:	f7f0 a000 	udf\.w	#0
@@ -52,65 +52,32 @@
 
 00008080 <__stm32l4xx_veneer_7>:
     8080:	ecfd 0a08 	vpop	{s1-s8}
-    8084:	f000 b83c 	b\.w	8100 <__stm32l4xx_veneer_7_r>
+    8084:	f000 b818 	b\.w	80b8 <__stm32l4xx_veneer_7_r>
     8088:	f7f0 a000 	udf\.w	#0
     808c:	f7f0 a000 	udf\.w	#0
     8090:	f7f0 a000 	udf\.w	#0
     8094:	f7f0 a000 	udf\.w	#0
 
-00008098 <__stm32l4xx_veneer_8>:
-    8098:	ec99 1b08 	vldmia	r9, {d1-d4}
-    809c:	f000 b832 	b\.w	8104 <__stm32l4xx_veneer_8_r>
-    80a0:	f7f0 a000 	udf\.w	#0
-    80a4:	f7f0 a000 	udf\.w	#0
-    80a8:	f7f0 a000 	udf\.w	#0
-    80ac:	f7f0 a000 	udf\.w	#0
-
-000080b0 <__stm32l4xx_veneer_9>:
-    80b0:	ecb6 8b08 	vldmia	r6!, {d8-d11}
-    80b4:	f000 b828 	b\.w	8108 <__stm32l4xx_veneer_9_r>
-    80b8:	f7f0 a000 	udf\.w	#0
-    80bc:	f7f0 a000 	udf\.w	#0
-    80c0:	f7f0 a000 	udf\.w	#0
-    80c4:	f7f0 a000 	udf\.w	#0
-
-000080c8 <__stm32l4xx_veneer_a>:
-    80c8:	ecbd 1b08 	vpop	{d1-d4}
-    80cc:	f000 b81e 	b\.w	810c <__stm32l4xx_veneer_a_r>
-    80d0:	f7f0 a000 	udf\.w	#0
-    80d4:	f7f0 a000 	udf\.w	#0
-    80d8:	f7f0 a000 	udf\.w	#0
-    80dc:	f7f0 a000 	udf\.w	#0
-
-000080e0 <_start>:
-    80e0:	f7ff bf8e 	b\.w	8000 <__stm32l4xx_veneer_0>
-
-000080e4 <__stm32l4xx_veneer_0_r>:
-    80e4:	f7ff bf94 	b\.w	8010 <__stm32l4xx_veneer_1>
-
-000080e8 <__stm32l4xx_veneer_1_r>:
-    80e8:	f7ff bf9a 	b\.w	8020 <__stm32l4xx_veneer_2>
-
-000080ec <__stm32l4xx_veneer_2_r>:
-    80ec:	f7ff bfa0 	b\.w	8030 <__stm32l4xx_veneer_3>
-
-000080f0 <__stm32l4xx_veneer_3_r>:
-    80f0:	f7ff bfa6 	b\.w	8040 <__stm32l4xx_veneer_4>
-
-000080f4 <__stm32l4xx_veneer_4_r>:
-    80f4:	f7ff bfac 	b\.w	8050 <__stm32l4xx_veneer_5>
-
-000080f8 <__stm32l4xx_veneer_5_r>:
-    80f8:	f7ff bfb6 	b\.w	8068 <__stm32l4xx_veneer_6>
-
-000080fc <__stm32l4xx_veneer_6_r>:
-    80fc:	f7ff bfc0 	b\.w	8080 <__stm32l4xx_veneer_7>
+00008098 <_start>:
+    8098:	f7ff bfb2 	b\.w	8000 <__stm32l4xx_veneer_0>
 
-00008100 <__stm32l4xx_veneer_7_r>:
-    8100:	f7ff bfca 	b\.w	8098 <__stm32l4xx_veneer_8>
+0000809c <__stm32l4xx_veneer_0_r>:
+    809c:	f7ff bfb8 	b\.w	8010 <__stm32l4xx_veneer_1>
 
-00008104 <__stm32l4xx_veneer_8_r>:
-    8104:	f7ff bfd4 	b\.w	80b0 <__stm32l4xx_veneer_9>
+000080a0 <__stm32l4xx_veneer_1_r>:
+    80a0:	f7ff bfbe 	b\.w	8020 <__stm32l4xx_veneer_2>
 
-00008108 <__stm32l4xx_veneer_9_r>:
-    8108:	f7ff bfde 	b\.w	80c8 <__stm32l4xx_veneer_a>
+000080a4 <__stm32l4xx_veneer_2_r>:
+    80a4:	f7ff bfc4 	b\.w	8030 <__stm32l4xx_veneer_3>
+
+000080a8 <__stm32l4xx_veneer_3_r>:
+    80a8:	f7ff bfca 	b\.w	8040 <__stm32l4xx_veneer_4>
+
+000080ac <__stm32l4xx_veneer_4_r>:
+    80ac:	f7ff bfd0 	b\.w	8050 <__stm32l4xx_veneer_5>
+
+000080b0 <__stm32l4xx_veneer_5_r>:
+    80b0:	f7ff bfda 	b\.w	8068 <__stm32l4xx_veneer_6>
+
+000080b4 <__stm32l4xx_veneer_6_r>:
+    80b4:	f7ff bfe4 	b\.w	8080 <__stm32l4xx_veneer_7>
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-arm/stm32l4xx-fix-all.s binutils-2.26-avr/ld/testsuite/ld-arm/stm32l4xx-fix-all.s
--- binutils-2.26.1-src/ld/testsuite/ld-arm/stm32l4xx-fix-all.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-arm/stm32l4xx-fix-all.s	2016-11-16 03:51:00.000000000 -0800
@@ -20,6 +20,3 @@
         vldm r9, {s1-s8}
         vldm r6!, {s9-s16}
         vpop {s1-s8}
-        vldm r9, {d1-d4}
-        vldm r6!, {d8-d11}
-        vpop {d1-d4}
Only in binutils-2.26.1-src/ld/testsuite/ld-arm: stm32l4xx-fix-vldm-dp.d
Only in binutils-2.26.1-src/ld/testsuite/ld-arm: stm32l4xx-fix-vldm-dp.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-arm/stm32l4xx-fix-vldm.s binutils-2.26-avr/ld/testsuite/ld-arm/stm32l4xx-fix-vldm.s
--- binutils-2.26.1-src/ld/testsuite/ld-arm/stm32l4xx-fix-vldm.s	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-arm/stm32l4xx-fix-vldm.s	2016-11-16 03:51:00.000000000 -0800
@@ -21,7 +21,6 @@
         @ Explicit VPOP test
         vpop {s1-s9}
 
-        @ VLDM CASE #3
         @ vldmd rx!, {...}
         @ -> vldmb rx!, {8_words_or_less} for each needed 8_word
         vldmdb r11!, {s1-s31}
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-1.d binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-1.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-1.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-1.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR .avr.prop, single .org test.
-#as: -mmcu=avrxmega2 -mlink-relax
-#ld: -mavrxmega2 --relax
+#as: -mlink-relax
+#ld: --relax
 #source: avr-prop-1.s
 #nm: -n
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-2.d binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-2.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-2.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-2.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR .avr.prop, multiple .org test.
-#as: -mmcu=avrxmega2 -mlink-relax
-#ld: -mavrxmega2 --relax
+#as: -mlink-relax
+#ld: --relax
 #source: avr-prop-2.s
 #nm: -n
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-3.d binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-3.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-3.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-3.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR .avr.prop, single .align test.
-#as: -mmcu=avrxmega2 -mlink-relax
-#ld: -mavrxmega2 --relax
+#as: -mlink-relax
+#ld: --relax
 #source: avr-prop-3.s
 #nm: -n
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-4.d binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-4.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-4.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-4.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR .avr.prop, realign .align test.
-#as: -mmcu=avrxmega2 -mlink-relax
-#ld: -mavrxmega2 --relax
+#as: -mlink-relax
+#ld: --relax
 #source: avr-prop-4.s
 #nm: -n
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-5.d binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-5.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-5.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-5.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR .avr.prop, single .align proper sym val test.
-#as: -mmcu=avrxmega2 -mlink-relax
-#ld: -mavrxmega2 --relax
+#as: -mlink-relax
+#ld: --relax
 #source: avr-prop-5.s
 #objdump: -S
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-6.d binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-6.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/avr-prop-6.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-avr/avr-prop-6.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR .avr.prop, single .align sym at end of section test.
-#as: -mavrxmega2 -mlink-relax
-#ld: -mavrxmega2 --relax
+#as: -mlink-relax
+#ld: --relax
 #source: avr-prop-6.s
 #objdump: -S
 #target: avr-*-*
Only in binutils-2.26-avr/ld/testsuite/ld-avr: avr-prop-7.d
Only in binutils-2.26-avr/ld/testsuite/ld-avr: avr-prop-7.s
Only in binutils-2.26-avr/ld/testsuite/ld-avr: avr-prop-8.d
Only in binutils-2.26-avr/ld/testsuite/ld-avr: avr-prop-8.s
Only in binutils-2.26-avr/ld/testsuite/ld-avr: bit-insns-1.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/gc-section-debugline.d binutils-2.26-avr/ld/testsuite/ld-avr/gc-section-debugline.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/gc-section-debugline.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/gc-section-debugline.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: dwarf decoded line after gc-sections
-#as: -mmcu=avr51 -gdwarf-sections -g
-#ld: -mavr51 -gc-sections -u main
+#as: -gdwarf-sections -g
+#ld: -gc-sections -u main
 #objdump: --dwarf=decodedline
 #source: per-function-debugline.s
 #target: avr-*-*
@@ -9,7 +9,7 @@
 
 Decoded dump of debug contents of section .debug_line:
 
-CU: .*:
+.*:
 File name                            Line number    Starting address
 per-function-debugline.s                      39                   0
 
Only in binutils-2.26-avr/ld/testsuite/ld-avr: lds-mega.d
Only in binutils-2.26-avr/ld/testsuite/ld-avr: lds-mega.s
Only in binutils-2.26-avr/ld/testsuite/ld-avr: lds-tiny.d
Only in binutils-2.26-avr/ld/testsuite/ld-avr: lds-tiny.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/norelax_diff.d binutils-2.26-avr/ld/testsuite/ld-avr/norelax_diff.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/norelax_diff.d	2014-10-14 00:32:04.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-avr/norelax_diff.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR No change in behavior without relaxation
-#as: -mmcu=avrxmega2 
-#ld:  -mavrxmega2
+#as: 
+#ld:
 #source: relax.s
 #objdump: -s
 #target: avr-*-*
@@ -10,4 +10,4 @@
 Contents of section .text:
  0000 0c940000                             .*
 Contents of section .data:
- 802000 0400                               .* 
+ 80[0-9]+ 0400                               .*
Only in binutils-2.26-avr/ld/testsuite/ld-avr: pr20789.d
Only in binutils-2.26-avr/ld/testsuite/ld-avr: pr20789.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/region_overflow.d binutils-2.26-avr/ld/testsuite/ld-avr/region_overflow.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/region_overflow.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/region_overflow.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR catch region overflow errors
-#as: -mmcu=avrxmega2
-#ld:  -mavrxmega2 --relax --defsym __TEXT_REGION_LENGTH__=2
+#as: 
+#ld:  --relax --defsym __TEXT_REGION_LENGTH__=2
 #source: region_overflow.s
 #target: avr-*-*
 #error: `.text' will not fit in region `text'
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-02.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-02.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-02.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-02.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR relaxation, symbol at end of section.
-#as: -mmcu=avrxmega2 -mlink-relax
-#ld:  -mavrxmega2 --relax
+#as: -mlink-relax
+#ld: --relax
 #source: relax-02.s
 #objdump: -tzd
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-03.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-03.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-03.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-03.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR relaxation, single function in section.
-#as: -mmcu=avrxmega2 -mlink-relax
-#ld:  -mavrxmega2 --relax
+#as: -mlink-relax
+#ld: --relax
 #source: relax-03.s
 #objdump: -tzd
 #target: avr-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax_diff.d binutils-2.26-avr/ld/testsuite/ld-avr/relax_diff.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax_diff.d	2014-10-14 00:32:04.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax_diff.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR Account for relaxation in label differences
-#as: -mmcu=avrxmega2 -mlink-relax
-#ld:  -mavrxmega2 --relax
+#as: -mlink-relax
+#ld: --relax
 #source: relax.s
 #objdump: -s
 #target: avr-*-*
@@ -10,5 +10,5 @@
 Contents of section .text:
  0000 ffcf                                 .*
 Contents of section .data:
- 802000 0200                               .*
+ 80[0-9]+ 0200                               .*
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-01.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-01.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-01.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-01.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR, check link-relax flag is set on partial link
-#as: -mmcu=avrxmega2
-#ld: -r -mavrxmega2
+#as: 
+#ld: -r 
 #source: relax-elf-flags-a.s -mlink-relax
 #source: relax-elf-flags-b.s -mlink-relax
 #readelf: -h
@@ -8,5 +8,5 @@
 
 ELF Header:
 #...
-  Flags:                             0xe6, avr:102, link-relax
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9]+, link-relax
+#...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-02.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-02.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-02.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-02.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR, check link-relax flag is clear on partial link (first file)
-#as: -mmcu=avrxmega2
-#ld: -r -mavrxmega2
+#as: 
+#ld: -r 
 #source: relax-elf-flags-a.s -mno-link-relax
 #source: relax-elf-flags-b.s -mlink-relax
 #readelf: -h
@@ -8,5 +8,5 @@
 
 ELF Header:
 #...
-  Flags:                             0x66, avr:102
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9a-f]+
+#...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-03.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-03.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-03.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-03.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR, check link-relax flag is clear on partial link, second file.
-#as: -mmcu=avrxmega2
-#ld: -r -mavrxmega2
+#as: 
+#ld: -r 
 #source: relax-elf-flags-a.s -mlink-relax
 #source: relax-elf-flags-b.s -mno-link-relax
 #readelf: -h
@@ -8,5 +8,5 @@
 
 ELF Header:
 #...
-  Flags:                             0x66, avr:102
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9]+
+#...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-04.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-04.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-04.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-04.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR, check link-relax flag is clear on partial link (both files)
-#as: -mmcu=avrxmega2
-#ld: -r -mavrxmega2
+#as: 
+#ld: -r 
 #source: relax-elf-flags-a.s -mno-link-relax
 #source: relax-elf-flags-b.s -mno-link-relax
 #readelf: -h
@@ -8,5 +8,5 @@
 
 ELF Header:
 #...
-  Flags:                             0x66, avr:102
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9]+
+#...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-05.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-05.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-05.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-05.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR, check link-relax flag is set final link (no inputs relaxable)
-#as: -mmcu=avrxmega2
-#ld: -relax -mavrxmega2
+#as: 
+#ld: -relax 
 #source: relax-elf-flags-a.s -mno-link-relax
 #source: relax-elf-flags-b.s -mno-link-relax
 #readelf: -h
@@ -8,5 +8,5 @@
 
 ELF Header:
 #...
-  Flags:                             0xe6, avr:102, link-relax
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9]+, link-relax
+#...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-06.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-06.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-06.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-06.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR, check link-relax flag is set final link (first input relaxable)
-#as: -mmcu=avrxmega2
-#ld: -relax -mavrxmega2
+#as: 
+#ld: -relax 
 #source: relax-elf-flags-a.s -mlink-relax
 #source: relax-elf-flags-b.s -mno-link-relax
 #readelf: -h
@@ -8,5 +8,5 @@
 
 ELF Header:
 #...
-  Flags:                             0xe6, avr:102, link-relax
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9]+, link-relax
+#...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-07.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-07.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-07.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-07.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR, check link-relax flag is set final link (both inputs relaxable)
-#as: -mmcu=avrxmega2
-#ld: -relax -mavrxmega2
+#as: 
+#ld: -relax 
 #source: relax-elf-flags-a.s -mlink-relax
 #source: relax-elf-flags-b.s -mlink-relax
 #readelf: -h
@@ -8,5 +8,5 @@
 
 ELF Header:
 #...
-  Flags:                             0xe6, avr:102, link-relax
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9]+, link-relax
+#...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-08.d binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-08.d
--- binutils-2.26.1-src/ld/testsuite/ld-avr/relax-elf-flags-08.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-avr/relax-elf-flags-08.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #name: AVR, check link-relax flag is clear final link (both inputs relaxable)
-#as: -mmcu=avrxmega2
-#ld: -mavrxmega2
+#as: 
+#ld: 
 #source: relax-elf-flags-a.s -mlink-relax
 #source: relax-elf-flags-b.s -mlink-relax
 #readelf: -h
@@ -8,5 +8,5 @@
 
 ELF Header:
 #...
-  Flags:                             0x66, avr:102
-#...
\ No newline at end of file
+  Flags:                             0x[0-9a-f]+, avr:[0-9]+
+#...
Only in binutils-2.26-avr/ld/testsuite/ld-avr: reloc-port5-1.d
Only in binutils-2.26-avr/ld/testsuite/ld-avr: reloc-port5-2.d
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-checks/checks.exp binutils-2.26-avr/ld/testsuite/ld-checks/checks.exp
--- binutils-2.26.1-src/ld/testsuite/ld-checks/checks.exp	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-checks/checks.exp	2016-11-16 03:51:00.000000000 -0800
@@ -26,6 +26,7 @@
     global ld
     global srcdir
     global subdir
+    global HOSTING_EMU
 
     # The usage of .lcomm in asm.s is incompatible with ia64 and ppc coff.
     if { [istarget ia64-*-*]
@@ -58,7 +59,7 @@
     # Perform the equivalent of invoking ld_simple_link
     # except that we need to massage the output further.
 
-    set exec_output [run_host_cmd "$ld" "-o tmpdir/asm.x $ldflags tmpdir/asm.o"]
+    set exec_output [run_host_cmd "$ld" "$HOSTING_EMU -o tmpdir/asm.x $ldflags tmpdir/asm.o"]
     set exec_output [prune_warnings $exec_output]
 
     # Make sure that we got some output from the linker
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/compressed1b.d binutils-2.26-avr/ld/testsuite/ld-elf/compressed1b.d
--- binutils-2.26.1-src/ld/testsuite/ld-elf/compressed1b.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-elf/compressed1b.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,8 +1,7 @@
 #source: compress1.s
 #as: --compress-debug-sections=zlib-gabi
-#ld: -r --compress-debug-sections=none
+#ld: -r
 #readelf: -t
-#target: *-*-linux* *-*-gnu*
 
 #failif
 #...
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/compressed1c.d binutils-2.26-avr/ld/testsuite/ld-elf/compressed1c.d
--- binutils-2.26.1-src/ld/testsuite/ld-elf/compressed1c.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-elf/compressed1c.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #source: compress1.s
 #as: --compress-debug-sections=zlib-gabi
-#ld: -shared --compress-debug-sections=none
+#ld: -shared
 #readelf: -t
 #target: *-*-linux* *-*-gnu*
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/flags1.d binutils-2.26-avr/ld/testsuite/ld-elf/flags1.d
--- binutils-2.26.1-src/ld/testsuite/ld-elf/flags1.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-elf/flags1.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,11 +1,11 @@
 #name: --set-section-flags test 1 (sections)
 #ld: -Tflags1.ld
 #objcopy_linked_file: --set-section-flags .post_text_reserve=contents,alloc,load,readonly,code
-#readelf: -l --wide
-#xfail: "avr-*-*" "dlx-*-*" "h8300-*-*" "i960-*-*" "ip2k-*-*" "m32r-*-*"
+#readelf: -S --wide
+#xfail: "dlx-*-*" "h8300-*-*" "i960-*-*" "ip2k-*-*" "m32r-*-*"
 #xfail: "moxie-*-*" "mt-*-*" "visium-*-*" "*-*-nacl*"
 #xfail: "*-*-hpux*" "hppa*64*-*-*"
-# Fails on the AVR, DLX, H8300, I960, IP2K, M32R, MOXIE, MT, VISIUM
+# Fails on the DLX, H8300, I960, IP2K, M32R, MOXIE, MT, VISIUM
 #  and all NaCl targets,
 #  because the two sections are not merged into one segment.
 #  (There is no good reason why they have to be).
@@ -13,11 +13,8 @@
 # Fails on hppa64 because a PHDR is always added.
 
 #...
-Program Headers:
-  Type.*
-  LOAD +0x[0-9a-f]+ 0x0*0 0x0*0 0x0*01(6[1-9a-f]|70) 0x0*01(6[1-9a-f]|70) RWE 0x[0-9a-f]+
-
+Section Headers:
 #...
-  Segment Sections...
-   00[ \t]+.text .post_text_reserve[ \t]*
+  \[[ 0-9]+\] \.text.*[ \t]+PROGBITS[ \t0-9a-f]+AX.*
+  \[[ 0-9]+\] \.post_text_reserve.*[ \t]+PROGBITS[ \t0-9a-f]+AX.*
 #pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/gabiend.rt binutils-2.26-avr/ld/testsuite/ld-elf/gabiend.rt
--- binutils-2.26.1-src/ld/testsuite/ld-elf/gabiend.rt	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-elf/gabiend.rt	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
 #...
  +\[[0-9a-f]+\]: .*COMPRESSED
- +ZLIB, [0-9a-f]+, [1-9][0-9]*
+ +ZLIB, [0-9a-f]+, 1
 #pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/gabinormal.rt binutils-2.26-avr/ld/testsuite/ld-elf/gabinormal.rt
--- binutils-2.26.1-src/ld/testsuite/ld-elf/gabinormal.rt	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-elf/gabinormal.rt	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
 #...
  +\[[0-9a-f]+\]: .*COMPRESSED
- +ZLIB, [0-9a-f]+, [1-9][0-9]*
+ +ZLIB, [0-9a-f]+, 1
 #pass
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/indirect.exp binutils-2.26-avr/ld/testsuite/ld-elf/indirect.exp
--- binutils-2.26.1-src/ld/testsuite/ld-elf/indirect.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-elf/indirect.exp	2016-11-16 03:51:00.000000000 -0800
@@ -66,11 +66,7 @@
      || ![ld_compile $CC $srcdir/$subdir/indirect4a.c tmpdir/indirect4a.o]
      || ![ld_compile $CC $srcdir/$subdir/indirect4b.c tmpdir/indirect4b.o]
      || ![ld_compile "$CC -O2 -fPIC -I../bfd" $srcdir/$subdir/pr18720a.c tmpdir/pr18720a.o]
-     || ![ld_compile $CC $srcdir/$subdir/pr18720b.c tmpdir/pr18720b.o]
-     || ![ld_compile "$CC -fPIC" $srcdir/$subdir/pr19553d.c tmpdir/pr19553d.o]
-     || ![ld_compile "$CC -fPIC" $srcdir/$subdir/pr19553c.c tmpdir/pr19553c.o]
-     || ![ld_compile "$CC -fPIC" $srcdir/$subdir/pr19553b.c tmpdir/pr19553b.o]
-     || ![ld_compile $CC $srcdir/$subdir/pr19553a.c tmpdir/pr19553a.o] } {
+     || ![ld_compile $CC $srcdir/$subdir/pr18720b.c tmpdir/pr18720b.o] } {
     unresolved "Indirect symbol tests"
     return
 }
@@ -91,15 +87,6 @@
   {"Build pr18720b1.o"
    "-r -nostdlib tmpdir/pr18720b.o" ""
    {dummy.c} {} "pr18720b1.o"}
-  {"Build libpr19553b.so"
-   "-shared -Wl,--version-script=pr19553.map" "-fPIC"
-   {pr19553b.c} {} "libpr19553b.so"}
-  {"Build libpr19553c.so"
-   "-shared -Wl,--version-script=pr19553.map" "-fPIC"
-   {pr19553c.c} {} "libpr19553c.so"}
-  {"Build libpr19553d.so"
-   "-shared tmpdir/libpr19553c.so" "-fPIC"
-   {pr19553d.c} {} "libpr19553d.so"}
 }
 
 run_cc_link_tests $build_tests
@@ -168,15 +155,6 @@
     {"Run with libpr18720c.so 5"
      "tmpdir/libpr18720c.so tmpdir/pr18720b1.o tmpdir/pr18720a.o" ""
      {check-ptr-eq.c} "pr18720d" "pr18720.out"}
-    {"Run with libpr19553b.so"
-     "tmpdir/libpr19553b.so tmpdir/libpr19553d.so -rpath-link ." ""
-     {pr19553a.c} "pr19553b" "pr19553b.out"}
-    {"Run with libpr19553c.so"
-     "tmpdir/libpr19553c.so tmpdir/libpr19553b.so tmpdir/libpr19553d.so" ""
-     {pr19553a.c} "pr19553c" "pr19553c.out"}
-    {"Run with libpr19553d.so"
-     "tmpdir/libpr19553d.so tmpdir/libpr19553b.so -rpath-link ." ""
-     {pr19553a.c} "pr19553d" "pr19553d.out"}
 }
 
 run_ld_link_exec_tests [] $run_tests
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/merge.d binutils-2.26-avr/ld/testsuite/ld-elf/merge.d
--- binutils-2.26.1-src/ld/testsuite/ld-elf/merge.d	2014-10-14 00:32:04.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-elf/merge.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,7 +1,7 @@
 #source: merge.s
 #ld: -T merge.ld
 #objdump: -s
-#xfail: "arc-*-*" "avr-*-*" "bfin-*-*" "cr16-*-*" "cris*-*-*" "crx-*-*" "d10v-*-*" "d30v-*-*"
+#xfail: "arc-*-*" "bfin-*-*" "cr16-*-*" "cris*-*-*" "crx-*-*" "d10v-*-*" "d30v-*-*"
 #xfail: "dlx-*-*" "fr30-*-*" "frv-*-*" "hppa*64*-*-*" "h8300-*-*" "score-*-*"
 #xfail: "i370-*-*" "i860-*-*" "i960-*-*" "ip2k-*-*" "iq2000-*-*" "lm32-*-*"
 #xfail: "mcore-*-*" "mn102*-*-*" "ms1-*-*" "mep-*-*"
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/pr18735.d binutils-2.26-avr/ld/testsuite/ld-elf/pr18735.d
--- binutils-2.26.1-src/ld/testsuite/ld-elf/pr18735.d	2016-01-25 00:51:06.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-elf/pr18735.d	2016-11-16 03:51:00.000000000 -0800
@@ -6,6 +6,8 @@
 [ 	]*[0-9]+: [0-9a-fA-F]* +1 +OBJECT +GLOBAL +DEFAULT +[0-9]+ +foo@FOO
 #...
 [ 	]*[0-9]+: [0-9a-fA-F]* +1 +OBJECT +GLOBAL +DEFAULT +[0-9]+ +bar@@FOO
+#...
 [ 	]*[0-9]+: [0-9a-fA-F]* +1 +OBJECT +GLOBAL +DEFAULT +[0-9]+ +foo
+#...
 [ 	]*[0-9]+: [0-9a-fA-F]* +1 +OBJECT +GLOBAL +DEFAULT +[0-9]+ +bar
 #pass
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19539.d
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19539.s
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19539.t
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19553a.c
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19553b.c
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19553b.out
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19553c.c
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19553c.out
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19553d.c
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19553d.out
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19553.map
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19579a.c
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19579b.c
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19698.d
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19698.s
Only in binutils-2.26.1-src/ld/testsuite/ld-elf: pr19698.t
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/sec64k.exp binutils-2.26-avr/ld/testsuite/ld-elf/sec64k.exp
--- binutils-2.26.1-src/ld/testsuite/ld-elf/sec64k.exp	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-elf/sec64k.exp	2016-11-16 03:51:00.000000000 -0800
@@ -161,17 +161,15 @@
     return
 }
 
-# too big for d10v and msp
+# too big for avr, d10v and msp
 # lack of fancy orphan section handling causes overlap on fr30 and iq2000
 if { ![istarget "d10v-*-*"]
+     && ![istarget "avr-*-*"]
      && ![istarget "msp*-*-*"]
      && ![istarget "fr30-*-*"] 
      && ![istarget "iq2000-*-*"] } {
     foreach sfile $sfiles { puts $ofd "#source: $sfile" }
-    if { [istarget "avr-*-*"] } then {
-	puts $ofd "#as: -mmcu=avr6"
-	puts $ofd "#ld: -mavr6"
-    } elseif { [istarget spu*-*-*] } {
+    if { [istarget spu*-*-*] } {
 	puts $ofd "#ld: --local-store 0:0"
     } else {
 	puts $ofd "#ld:"
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elf/shared.exp binutils-2.26-avr/ld/testsuite/ld-elf/shared.exp
--- binutils-2.26.1-src/ld/testsuite/ld-elf/shared.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-elf/shared.exp	2016-11-16 03:51:00.000000000 -0800
@@ -524,21 +524,6 @@
 	    {} \
 	    "libpr2404b.a" \
 	] \
-	[list \
-	    "Build pr19579a.o" \
-	    "" "-fPIE" \
-	    {pr19579a.c} \
-	    {} \
-	    "libpr19579a.a" \
-	] \
-	[list \
-	    "Build libpr19579.so" \
-	    "-shared" \
-	    "-fPIC" \
-	    {pr19579b.c} \
-	    {} \
-	    "libpr19579.so" \
-	] \
     ]
     run_ld_link_exec_tests [] [list \
 	[list \
@@ -595,14 +580,5 @@
 	    "pass.out" \
 	    "-O2 -fPIC -I../bfd" \
 	] \
-	[list \
-	    "Run pr19579" \
-	    "-pie -z text tmpdir/pr19579a.o tmpdir/libpr19579.so" \
-	    "" \
-	    {dummy.c} \
-	    "pr19579" \
-	    "pass.out" \
-	    "-fPIE" \
-	] \
     ]
 }
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elfcomm/elfcomm.exp binutils-2.26-avr/ld/testsuite/ld-elfcomm/elfcomm.exp
--- binutils-2.26.1-src/ld/testsuite/ld-elfcomm/elfcomm.exp	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-elfcomm/elfcomm.exp	2016-11-16 03:51:00.000000000 -0800
@@ -266,6 +266,14 @@
     return
 }
 
+# Handling of -z common and -z nocommon flags is enabled only if
+# $GENERATE_SHLIB_SCRIPT is turned on in emulparams i.e. shared
+# libraries are supported.
+
+if ![check_shared_lib_support]  {
+    return
+}
+
 stt_common_test "-static -e 0" "static link of common symbols"
 stt_common_test "-shared"      "shared link of common symbols"
 stt_common_test "-pie"         "position independent link of common symbols"
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-elfvsb/elfvsb.exp binutils-2.26-avr/ld/testsuite/ld-elfvsb/elfvsb.exp
--- binutils-2.26.1-src/ld/testsuite/ld-elfvsb/elfvsb.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-elfvsb/elfvsb.exp	2016-11-16 03:51:00.000000000 -0800
@@ -62,7 +62,6 @@
 set tmpdir tmpdir
 set SHCFLAG ""
 set shared_needs_pic "no"
-set COMPRESS_LDFLAG "-Wl,--compress-debug-sections=zlib-gabi"
 
 if { [istarget rs6000*-*-aix*] || [istarget powerpc*-*-aix*] } {
 
@@ -229,7 +228,6 @@
     global support_protected
     global shared_needs_pic
     global PLT_CFLAGS
-    global COMPRESS_LDFLAG
 
     if [ string match $visibility "hidden" ] {
 	set VSBCFLAG "-DHIDDEN_TEST"
@@ -386,7 +384,7 @@
 	    } else { if { [istarget rs6000*-*-aix*] || [istarget powerpc*-*-aix*] } {
 		visibility_test $visibility vp "visibility ($visibility)" mainnp.o sh1p.o sh2p.o xcoff
 	    } else {
-		visibility_test $visibility vp "visibility ($visibility)" mainnp.o sh1p.o sh2p.o elfvsb $COMPRESS_LDFLAG
+		visibility_test $visibility vp "visibility ($visibility)" mainnp.o sh1p.o sh2p.o elfvsb
 	    } }
 	}
     }}
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-gc/pr14265.d binutils-2.26-avr/ld/testsuite/ld-gc/pr14265.d
--- binutils-2.26.1-src/ld/testsuite/ld-gc/pr14265.d	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-gc/pr14265.d	2016-11-16 03:51:00.000000000 -0800
@@ -5,7 +5,9 @@
 
 #...
 [0-9a-f]+[ 	][dD][ 	]_*foo1_start
+#...
 [0-9a-f]+[ 	]D[ 	]_*foo1
+#...
 [0-9a-f]+[ 	][dD][ 	]_*foo1_end
 [0-9a-f]+[ 	][dD][ 	]_*foo2_start
 [0-9a-f]+[ 	]D[ 	]_*foo2
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/branch1.d binutils-2.26-avr/ld/testsuite/ld-i386/branch1.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/branch1.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/branch1.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call1.d binutils-2.26-avr/ld/testsuite/ld-i386/call1.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call1.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call1.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,3 +1,3 @@
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -shared -melf_i386
 #error: direct GOT relocation R_386_GOT32X against `foo' without base register can not be used when making a shared object
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call2.d binutils-2.26-avr/ld/testsuite/ld-i386/call2.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call2.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call2.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,3 +1,3 @@
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -shared -melf_i386
 #error: direct GOT relocation R_386_GOT32X against `foo' without base register can not be used when making a shared object
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call3a.d binutils-2.26-avr/ld/testsuite/ld-i386/call3a.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call3a.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call3a.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call3.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call3b.d binutils-2.26-avr/ld/testsuite/ld-i386/call3b.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call3b.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call3b.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call3.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386 -z call-nop=prefix-addr
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call3c.d binutils-2.26-avr/ld/testsuite/ld-i386/call3c.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call3c.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call3c.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call3.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386 -z call-nop=prefix-nop
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call3d.d binutils-2.26-avr/ld/testsuite/ld-i386/call3d.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call3d.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call3d.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call3.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386 -z call-nop=suffix-nop
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call3e.d binutils-2.26-avr/ld/testsuite/ld-i386/call3e.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call3e.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call3e.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call3.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386 -z call-nop=prefix-0x67
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call3f.d binutils-2.26-avr/ld/testsuite/ld-i386/call3f.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call3f.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call3f.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call3.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386 -z call-nop=prefix-0x90
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call3g.d binutils-2.26-avr/ld/testsuite/ld-i386/call3g.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call3g.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call3g.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call3.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386 -z call-nop=suffix-0x90
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/call3h.d binutils-2.26-avr/ld/testsuite/ld-i386/call3h.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/call3h.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/call3h.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call3.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386 -z call-nop=suffix-144
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/got1a.S binutils-2.26-avr/ld/testsuite/ld-i386/got1a.S
--- binutils-2.26.1-src/ld/testsuite/ld-i386/got1a.S	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/got1a.S	2016-11-16 03:51:00.000000000 -0800
@@ -12,19 +12,10 @@
 	call	*%eax
 	movl	plt@GOT, %eax
 	call	*%eax
-	call	__x86.get_pc_thunk.cx
-	addl	$_GLOBAL_OFFSET_TABLE_, %ecx
-	movl	foo@GOT(%ecx), %ecx
+	movl	foo@GOT(%ebx), %ecx
 	call	*%ecx
 	subl	$12, %esp
 	pushl	$0
 	pushl	$0	# Push a dummy return address onto stack.
 	jmp	*myexit@GOT
 	.size	main, .-main
-	.section	.text.__x86.get_pc_thunk.cx,"axG",@progbits,__x86.get_pc_thunk.cx,comdat
-	.globl	__x86.get_pc_thunk.cx
-	.hidden	__x86.get_pc_thunk.cx
-	.type	__x86.get_pc_thunk.cx, @function
-__x86.get_pc_thunk.cx:
-	movl	(%esp), %ecx
-	ret
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/got1.dd binutils-2.26-avr/ld/testsuite/ld-i386/got1.dd
--- binutils-2.26.1-src/ld/testsuite/ld-i386/got1.dd	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/got1.dd	2016-11-16 03:51:00.000000000 -0800
@@ -10,8 +10,6 @@
 [ 	]*[a-f0-9]+:	ff d0                	call   \*%eax
 [ 	]*[a-f0-9]+:	[ a-f0-9]+    	mov   *0x[a-f0-9]+,%eax
 [ 	]*[a-f0-9]+:	ff d0                	call   \*%eax
-[ 	]*[a-f0-9]+:	[ a-f0-9]+    	call   [a-f0-9]+ <__x86.get_pc_thunk.cx>
-[ 	]*[a-f0-9]+:	[ a-f0-9]+    	add    \$0x[a-f0-9]+,%ecx
 [ 	]*[a-f0-9]+:	[ a-f0-9]+    	lea   *0x[a-f0-9]+,%ecx
 [ 	]*[a-f0-9]+:	ff d1                	call   \*%ecx
 [ 	]*[a-f0-9]+:	83 ec 0c             	sub    \$0xc,%esp
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/got1d.S binutils-2.26-avr/ld/testsuite/ld-i386/got1d.S
--- binutils-2.26.1-src/ld/testsuite/ld-i386/got1d.S	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/got1d.S	2016-11-16 03:51:00.000000000 -0800
@@ -19,6 +19,7 @@
 	pushl	%esi
 	pushl	%ebx
 	call	__x86.get_pc_thunk.bx
+1:
 	addl	$_GLOBAL_OFFSET_TABLE_, %ebx
 	subl	$20, %esp
 	leal	__FUNCTION__.1866@GOTOFF(%ebx), %esi
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/i386.exp binutils-2.26-avr/ld/testsuite/ld-i386/i386.exp
--- binutils-2.26.1-src/ld/testsuite/ld-i386/i386.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/i386.exp	2016-11-16 03:51:00.000000000 -0800
@@ -195,14 +195,6 @@
      "--32" {pr17709a.s} {} "libpr17709.so"}
     {"PR ld/17709 (2)" "-melf_i386 tmpdir/libpr17709.so" ""
      "--32" {pr17709b.s} {{readelf -r pr17709.rd}} "pr17709"}
-    {"Build pr19827a.o" "" ""
-     "--32" { pr19827a.S }}
-    {"Build pr19827b.so" "-melf_i386 -shared" ""
-     "--32" { pr19827b.S } {} "pr19827b.so"}
-    {"Build pr19827" "-melf_i386 -pie tmpdir/pr19827a.o tmpdir/pr19827b.so" ""
-     "--32" { dummy.s } {{readelf {-rW} pr19827.rd}} "pr19827"}
-    {"Build pr19827.so" "-melf_i386 -shared -Bsymbolic" ""
-     "--32" { pr19827a.S }  {{readelf {-rW} pr19827.rd}} "pr19827.so"}
 }
 
 # So as to avoid rewriting every last test case here in a nacl variant,
@@ -327,15 +319,6 @@
 run_dump_test "load5b"
 run_dump_test "load6"
 run_dump_test "pr19175"
-run_dump_test "pr19615"
-run_dump_test "pr20117"
-run_dump_test "pr20244-1a"
-run_dump_test "pr20244-1b"
-run_dump_test "pr20244-1c"
-run_dump_test "pr20244-2a"
-run_dump_test "pr20244-2b"
-run_dump_test "pr20244-2c"
-run_dump_test "pr20244-2d"
 
 if { !([istarget "i?86-*-linux*"]
        || [istarget "i?86-*-gnu*"]
@@ -374,7 +357,7 @@
 	[list \
 	    "Build libplt-main1.a" \
 	    "" \
-	    "-fPIC -Wa,-mrelax-relocations=yes" \
+	    "-fPIC" \
 	    { plt-main1.c } \
 	    {{readelf {-Wr} plt-main1.rd}} \
 	    "libplt-main1.a" \
@@ -382,7 +365,7 @@
 	[list \
 	    "Build libplt-main2.a" \
 	    "" \
-	    "-fPIC -Wa,-mrelax-relocations=yes" \
+	    "-fPIC" \
 	    { plt-main2.c } \
 	    {{readelf {-Wr} plt-main2.rd}} \
 	    "libplt-main2.a" \
@@ -390,7 +373,7 @@
 	[list \
 	    "Build libplt-main3.a" \
 	    "" \
-	    "-fPIC -Wa,-mrelax-relocations=yes $PLT_CFLAGS" \
+	    "-fPIC $PLT_CFLAGS" \
 	    { plt-main3.c } \
 	    {{readelf {-Wr} plt-main3.rd}} \
 	    "libplt-main3.a" \
@@ -398,7 +381,7 @@
 	[list \
 	    "Build libplt-main4.a" \
 	    "" \
-	    "-fPIC -Wa,-mrelax-relocations=yes $PLT_CFLAGS" \
+	    "-fPIC $PLT_CFLAGS" \
 	    { plt-main4.c } \
 	    {{readelf {-Wr} plt-main4.rd}} \
 	    "libplt-main4.a" \
@@ -430,26 +413,18 @@
 	    "copyreloc-lib.so" \
 	] \
 	[list \
-	    "Build libcopyreloc-main.a" \
-	    "" \
-	    "" \
-	    { copyreloc-main.S } \
-	    {} \
-	    "libcopyreloc-main.a" \
-	] \
-	[list \
 	    "Build copyreloc-main with PIE and GOTOFF (1)" \
-	    "tmpdir/copyreloc-main.o tmpdir/copyreloc-lib.so -pie" \
+	    "tmpdir/copyreloc-lib.so -pie" \
 	    "" \
-	    { dummy.s } \
+	    { copyreloc-main.S } \
 	    {{readelf {-Wr} copyreloc-main1.rd}} \
 	    "copyreloc-main" \
 	] \
 	[list \
 	    "Build copyreloc-main with PIE and GOTOFF (2)" \
-	    "tmpdir/copyreloc-main.o tmpdir/copyreloc-lib.so -pie" \
+	    "tmpdir/copyreloc-lib.so -pie" \
 	    "" \
-	    { dummy.s } \
+	    { copyreloc-main.S } \
 	    {{readelf {-Wr} copyreloc-main2.rd}} \
 	    "copyreloc-main" \
 	] \
@@ -526,26 +501,18 @@
 	    "pr18900.so" \
 	] \
 	[list \
-	    "Build pr18900.o" \
-	    "-r -nostdlib" \
-	    "" \
-	    { pr18900b.c pr18900c.c } \
-	    "" \
-	    "pr18900.o" \
-	] \
-	[list \
 	    "Build pr18900a" \
-	    "tmpdir/pr18900.o tmpdir/pr18900.so" \
+	    "tmpdir/pr18900.so" \
 	    "" \
-	    { dummy.s } \
+	    { pr18900b.c pr18900c.c } \
 	    {{readelf {-Wrd} pr18900a.rd}} \
 	    "pr18900a" \
 	] \
 	[list \
 	    "Build pr18900b" \
-	    "-Wl,--as-needed tmpdir/pr18900.o tmpdir/pr18900.so" \
+	    "tmpdir/pr18900.so" \
 	    "" \
-	    { dummy.s } \
+	    { pr18900b.c pr18900c.c } \
 	    {{readelf {-Wrd} pr18900b.rd}} \
 	    "pr18900b" \
 	] \
@@ -566,18 +533,10 @@
 	    "got1d.so" \
 	] \
 	[list \
-	    "Build gotpc1.o" \
-	    "-r -nostdlib" \
+	    "Build gotpc1" \
+	    "tmpdir/got1d.so" \
 	    "" \
 	    { got1a.S got1b.c got1c.c } \
-	    "" \
-	    "gotpc1.o" \
-	] \
-	[list \
-	    "Build gotpc1" \
-	    "-Wl,--as-needed tmpdir/gotpc1.o tmpdir/got1d.so" \
-	    "-Wa,-mrelax-relocations=yes" \
-	    { dummy.s } \
 	    {{objdump {-dw} got1.dd}} \
 	    "got1" \
 	] \
@@ -621,9 +580,9 @@
 	] \
 	[list \
 	    "Run copyreloc-main with PIE and GOTOFF" \
-	    "--as-needed tmpdir/copyreloc-main.o tmpdir/copyreloc-lib.so -pie" \
+	    "tmpdir/copyreloc-lib.so -pie" \
 	    "" \
-	    { dummy.s } \
+	    { copyreloc-main.S } \
 	    "copyreloc-main" \
 	    "copyreloc-main.out" \
 	] \
@@ -653,9 +612,9 @@
 	] \
 	[list \
 	    "Run pr18900" \
-	    "tmpdir/pr18900.o tmpdir/pr18900.so" \
+	    "tmpdir/pr18900.so" \
 	    "" \
-	    { dummy.s } \
+	    { pr18900b.c pr18900c.c } \
 	    "pr18900" \
 	    "pr18900.out" \
 	] \
@@ -677,42 +636,6 @@
 	] \
     ]
 }
-
-# Must be native with the C compiler and working IFUNC support,
-if { [isnative]
-     && [check_ifunc_available]
-     && [istarget "i?86-*-*"]
-     && [which $CC] != 0 } {
-    run_cc_link_tests [list \
-	[list \
-	    "Build ifunc-1a.o ifunc-1b.o ifunc-1c.o ifunc-1d.o" \
-	    "" \
-	    "-fPIC -O2 -g" \
-	    { ifunc-1a.c ifunc-1b.S ifunc-1c.S ifunc-1d.S } \
-	] \
-    ]
-
-    run_ld_link_exec_tests [] [list \
-	[list \
-	    "Run ifunc-1a" \
-	    "tmpdir/ifunc-1a.o tmpdir/ifunc-1b.o \
-	     tmpdir/ifunc-1c.o tmpdir/ifunc-1d.o" \
-	    "" \
-	    { dummy.c } \
-	    "ifunc-1a" \
-	    "pass.out" \
-	] \
-	[list \
-	    "Run ifunc-1b" \
-	    "--static tmpdir/ifunc-1a.o tmpdir/ifunc-1b.o \
-	    tmpdir/ifunc-1c.o tmpdir/ifunc-1d.o" \
-	    "" \
-	    { dummy.c } \
-	    "ifunc-1b" \
-	    "pass.out" \
-	] \
-    ]
-}
 
 if { !([istarget "i?86-*-linux*"]
        || [istarget "x86_64-*-linux*"]) } {
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: ifunc-1a.c
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: ifunc-1b.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: ifunc-1c.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: ifunc-1d.S
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/jmp1.d binutils-2.26-avr/ld/testsuite/ld-i386/jmp1.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/jmp1.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/jmp1.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,3 +1,3 @@
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -shared -melf_i386
 #error: direct GOT relocation R_386_GOT32X against `foo' without base register can not be used when making a shared object
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/jmp2.d binutils-2.26-avr/ld/testsuite/ld-i386/jmp2.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/jmp2.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/jmp2.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,3 +1,3 @@
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -shared -melf_i386
 #error: direct GOT relocation R_386_GOT32X against `foo' without base register can not be used when making a shared object
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/lea1c.d binutils-2.26-avr/ld/testsuite/ld-i386/lea1c.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/lea1c.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/lea1c.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: lea1.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386
 #objdump: -dw
 
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: libno-plt-1b.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: libno-plt-1b.rd
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/load1.d binutils-2.26-avr/ld/testsuite/ld-i386/load1.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/load1.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/load1.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386
 #objdump: -dw --sym
 #notarget: i?86-*-nacl* x86_64-*-nacl*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/load2.d binutils-2.26-avr/ld/testsuite/ld-i386/load2.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/load2.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/load2.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,3 +1,3 @@
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386 -shared
 #error: direct GOT relocation R_386_GOT32X against `foo' without base register can not be used when making a shared object
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/load3.d binutils-2.26-avr/ld/testsuite/ld-i386/load3.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/load3.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/load3.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,3 +1,3 @@
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386 -shared
 #error: direct GOT relocation R_386_GOT32X against `foo' without base register can not be used when making a shared object
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/load4a.d binutils-2.26-avr/ld/testsuite/ld-i386/load4a.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/load4a.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/load4a.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
 #source: load4.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -Bsymbolic -shared -melf_i386
 #error: direct GOT relocation R_386_GOT32X against `foo' without base register can not be used when making a shared object
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/load5a.d binutils-2.26-avr/ld/testsuite/ld-i386/load5a.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/load5a.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/load5a.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
 #source: load5.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -Bsymbolic -shared -melf_i386
 #error: direct GOT relocation R_386_GOT32X against `foo' without base register can not be used when making a shared object
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/mov2b.d binutils-2.26-avr/ld/testsuite/ld-i386/mov2b.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/mov2b.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/mov2b.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: mov2.s
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -pie -melf_i386
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-i386/mov3.d binutils-2.26-avr/ld/testsuite/ld-i386/mov3.d
--- binutils-2.26.1-src/ld/testsuite/ld-i386/mov3.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-i386/mov3.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
-#as: --32 -mrelax-relocations=yes
+#as: --32
 #ld: -melf_i386
 #objdump: -dw
 
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1a.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1a.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1b.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1b.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1c.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1c.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1d.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1d.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1e.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1e.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1f.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1f.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1g.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1g.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1h.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1h.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1i.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1i.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1j.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-1j.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-check1a.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-check1b.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt.exp
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-extern1a.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-extern1b.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-func1.c
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: no-plt-main1.c
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pass.out
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr19615.d
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr19615.s
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr19827a.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr19827b.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr19827-nacl.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr19827.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20117.d
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20117.s
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-1a.d
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-1b.d
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-1c.d
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-1.s
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-2a.d
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-2b.d
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-2c.d
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-2d.d
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-2.s
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-3a.c
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-3b.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-3c.S
Only in binutils-2.26.1-src/ld/testsuite/ld-i386: pr20244-3d.S
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-ifunc/ifunc-21-x86-64.d binutils-2.26-avr/ld/testsuite/ld-ifunc/ifunc-21-x86-64.d
--- binutils-2.26.1-src/ld/testsuite/ld-ifunc/ifunc-21-x86-64.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-ifunc/ifunc-21-x86-64.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64
 #objdump: -dw
 #target: x86_64-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-ifunc/ifunc-22-x86-64.d binutils-2.26-avr/ld/testsuite/ld-ifunc/ifunc-22-x86-64.d
--- binutils-2.26.1-src/ld/testsuite/ld-ifunc/ifunc-22-x86-64.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-ifunc/ifunc-22-x86-64.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,4 +1,4 @@
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64
 #objdump: -dw
 #target: x86_64-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-ifunc/ifunc-5r-local-x86-64.d binutils-2.26-avr/ld/testsuite/ld-ifunc/ifunc-5r-local-x86-64.d
--- binutils-2.26.1-src/ld/testsuite/ld-ifunc/ifunc-5r-local-x86-64.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-ifunc/ifunc-5r-local-x86-64.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: ifunc-5-local-x86-64.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -r -melf_x86_64
 #readelf: -r --wide
 #target: x86_64-*-*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-plugin/lto.exp binutils-2.26-avr/ld/testsuite/ld-plugin/lto.exp
--- binutils-2.26.1-src/ld/testsuite/ld-plugin/lto.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-plugin/lto.exp	2016-11-16 03:51:00.000000000 -0800
@@ -400,20 +400,9 @@
 	   || [istarget "x86_64-*-linux*"]
 	   || [istarget "amd64-*-linux*"]) } {
 	set testname "PR ld/12365"
-	set exec_output [run_host_cmd "$CC" "-O2 -flto -flto-partition=none -fuse-linker-plugin -o tmpdir/pr12365 tmpdir/pr12365a.o tmpdir/pr12365b.o tmpdir/pr12365c.o"]
+	set exec_output [run_host_cmd "$CC" "-O2 -flto -flto-partition=none -fuse-linker-plugin tmpdir/pr12365a.o tmpdir/pr12365b.o tmpdir/pr12365c.o"]
 	if { [ regexp "undefined reference to `my_bcopy'" $exec_output ] } {
-	    # Linker should catch the reference to undefined `my_bcopy'
-	    # error caused by a GCC bug.
 	    pass $testname
-	} elseif { [ string match "" $exec_output ] } {
-	    global READELF
-	    set exec_output [run_host_cmd "$READELF" "-s -W tmpdir/pr12365"]
-	    if { [ regexp "my_bcopy" $exec_output ] } {
-		# Verify that there is no `my_bcopy' symbol in executable.
-		fail $testname
-	    } {
-		pass $testname
-	    }
 	} {
 	    fail $testname
 	}
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-plugin/plugin.exp binutils-2.26-avr/ld/testsuite/ld-plugin/plugin.exp
--- binutils-2.26.1-src/ld/testsuite/ld-plugin/plugin.exp	2016-01-25 00:51:06.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-plugin/plugin.exp	2016-11-16 03:51:00.000000000 -0800
@@ -183,11 +183,15 @@
     $testobjfiles $libs" "" "" "" {{ld plugin-28.d}} "main.x" ] \
     [list "plugin warning" "-plugin $plugin2_path -plugin-opt warning \
     $testobjfiles $libs" "" "" "" {{ld plugin-29.d}} "main.x" ] \
-    [list "PR ld/17973" "-plugin $plugin2_path -shared $regassilent \
-			-plugin-opt add:tmpdir/pr17973.o \
-    tmpdir/dummy.o" "" "" "" {{readelf -sW pr17973.d}} "main.x" ] \
 ]
 
+if [check_shared_lib_support] {
+    lappend plugin_tests [list "PR ld/17973" "-plugin $plugin2_path -shared $regassilent \
+                       -plugin-opt add:tmpdir/pr17973.o \
+    tmpdir/dummy.o" "" "" "" {{readelf -sW pr17973.d}} "main.x" ]
+}
+
+
 set plugin_lib_tests [list \
     [list "plugin ignore lib" "-plugin $plugin_path $regclm \
 			$regas $regcln -plugin-opt claim:tmpdir/func.o \
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-powerpc/powerpc.exp binutils-2.26-avr/ld/testsuite/ld-powerpc/powerpc.exp
--- binutils-2.26.1-src/ld/testsuite/ld-powerpc/powerpc.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-powerpc/powerpc.exp	2016-11-16 03:51:00.000000000 -0800
@@ -138,11 +138,6 @@
     {"TLS32 opt 4" "-melf32ppc" "" "-a32"  {tlsopt4_32.s tlslib32.s}
      {{objdump -dr tlsopt4_32.d}}
       "tlsopt4_32"}
-    {"TLS32 DLL" "-shared -melf32ppc --version-script tlsdll.ver" "" "-a32" {tlsdll_32.s}
-     {} "tlsdll32.so"}
-    {"TLS32 opt 5" "-melf32ppc --gc-sections --secure-plt tmpdir/tlsdll32.so" "" "-a32"  {tlsopt5_32.s}
-     {{objdump -dr tlsopt5_32.d}}
-      "tlsopt5_32"}
     {"Shared library with global symbol" "-shared -melf32ppc" "" "-a32" {sdalib.s}
      {} "sdalib.so"}
     {"Dynamic application with SDA" "-melf32ppc tmpdir/sdalib.so" "" "-a32" {sdadyn.s}
@@ -208,11 +203,6 @@
     {"TLS opt 4" "-melf64ppc" "" "-a64"  {tlsopt4.s tlslib.s}
      {{objdump -dr tlsopt4.d}}
       "tlsopt4"}
-    {"TLS DLL" "-shared -melf64ppc --version-script tlsdll.ver" "" "-a64" {tlsdll.s}
-     {} "tlsdll.so"}
-    {"TLS opt 5" "-melf64ppc --gc-sections tmpdir/tlsdll.so" "" "-a64"  {tlsopt5.s}
-     {{objdump -dr tlsopt5.d}}
-      "tlsopt5"}
     {"sym@tocbase" "-shared -melf64ppc" "" "-a64" {symtocbase-1.s symtocbase-2.s}
 	{{objdump -dj.data symtocbase.d}} "symtocbase.so"}
     {"TOC opt" "-melf64ppc" "" "-a64"  {tocopt.s}
Only in binutils-2.26.1-src/ld/testsuite/ld-powerpc: tlsdll_32.s
Only in binutils-2.26.1-src/ld/testsuite/ld-powerpc: tlsdll.s
Only in binutils-2.26.1-src/ld/testsuite/ld-powerpc: tlsdll.ver
Only in binutils-2.26.1-src/ld/testsuite/ld-powerpc: tlsopt5_32.d
Only in binutils-2.26.1-src/ld/testsuite/ld-powerpc: tlsopt5_32.s
Only in binutils-2.26.1-src/ld/testsuite/ld-powerpc: tlsopt5.d
Only in binutils-2.26.1-src/ld/testsuite/ld-powerpc: tlsopt5.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-scripts/crossref.exp binutils-2.26-avr/ld/testsuite/ld-scripts/crossref.exp
--- binutils-2.26.1-src/ld/testsuite/ld-scripts/crossref.exp	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-scripts/crossref.exp	2016-11-16 03:51:00.000000000 -0800
@@ -82,7 +82,8 @@
 # IA64 has both ordered and unordered sections in an input file.
 setup_xfail ia64-*-*
 
-set exec_output [run_host_cmd "$ld" "$flags -o tmpdir/cross1 -T $srcdir/$subdir/cross1.t tmpdir/cross1.o tmpdir/cross2.o"]
+global HOSTING_EMU
+set exec_output [run_host_cmd "$ld" "$HOSTING_EMU $flags -o tmpdir/cross1 -T $srcdir/$subdir/cross1.t tmpdir/cross1.o tmpdir/cross2.o"]
 
 set exec_output [prune_warnings $exec_output]
 
@@ -108,7 +109,7 @@
     return
 }
 
-set exec_output [run_host_cmd "$ld" "$flags -o tmpdir/cross2 -T $srcdir/$subdir/cross2.t tmpdir/cross3.o"]
+set exec_output [run_host_cmd "$ld" "$HOSTING_EMU $flags -o tmpdir/cross2 -T $srcdir/$subdir/cross2.t tmpdir/cross3.o"]
 set exec_output [prune_warnings $exec_output]
 
 regsub -all "(^|\n)($ld: warning: cannot find entry symbol\[^\n\]*\n?)" $exec_output "\\1" exec_output
@@ -140,7 +141,7 @@
     return
 }
 
-set exec_output [run_host_cmd "$ld" "$flags -o tmpdir/cross3 -T $srcdir/$subdir/cross3.t tmpdir/cross3-partial.o tmpdir/cross2.o"]
+set exec_output [run_host_cmd "$ld" "$HOSTING_EMU $flags -o tmpdir/cross3 -T $srcdir/$subdir/cross3.t tmpdir/cross3-partial.o tmpdir/cross2.o"]
 
 set exec_output [prune_warnings $exec_output]
 
Only in binutils-2.26-avr/ld/testsuite/ld-scripts: pr20302.d
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-scripts/script.exp binutils-2.26-avr/ld/testsuite/ld-scripts/script.exp
--- binutils-2.26.1-src/ld/testsuite/ld-scripts/script.exp	2016-01-25 00:51:06.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-scripts/script.exp	2016-11-16 03:51:00.000000000 -0800
@@ -212,3 +212,4 @@
 }
 
 run_dump_test "align-with-input"
+run_dump_test "pr20302"
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-selective/selective.exp binutils-2.26-avr/ld/testsuite/ld-selective/selective.exp
--- binutils-2.26.1-src/ld/testsuite/ld-selective/selective.exp	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-selective/selective.exp	2016-11-16 03:51:00.000000000 -0800
@@ -64,6 +64,12 @@
     set ldflags "-e _start -mshelf32 $ldflags"
 }
 
+if [istarget avr-*-*] {
+    # Make .text start at a non-zero address, as some tests expect
+    # valid symbols to have non-zero values.
+    set ldflags "--section-start=.text=0x2 $ldflags"
+}
+
 # If we don't have g++ for the target, mark all tests as untested.
 if { ![is_remote host] && [which $CXX] == 0 } {
     foreach testitem $seltests {
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-srec/srec.exp binutils-2.26-avr/ld/testsuite/ld-srec/srec.exp
--- binutils-2.26.1-src/ld/testsuite/ld-srec/srec.exp	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/ld-srec/srec.exp	2016-11-16 03:51:00.000000000 -0800
@@ -241,36 +241,19 @@
 	set flags "$flags -Ttext 0x1000"
     }
 
-    if [istarget sh64*-*-elf] {
-        # This is what gcc passes to ld by default.
-        set flags "$flags -mshelf32"
-        # SH64 targets cannot convert format in the linker 
-        # using the -oformat command line switch.
-	setup_xfail "sh64*-*-*"
-    }
-
-    if {[istarget aarch64*-*-*]   || \
+    # ARM targets cannot convert format in the linker
+    # using the --oformat command line switch
+    if {[istarget aarch64*-*-*] || \
         [istarget arm*-*-*]} {
-        # ARM targets cannot convert format in the linker
-        # using the --oformat command line switch
 	setup_xfail "aarch64-*-*"
 	setup_xfail "aarch64_be-*-*"
 	setup_xfail "arm*-*-*"
     }
 
-    # V850 targets need libgcc.a
-    if [istarget v850*-*-elf] {
-	set objs "$objs -L ../gcc -lgcc"
-    }
-
-    # Xtensa ELF targets relax by default; S-Record linker does not
-    if [istarget xtensa*-*-*] {
-	set flags "$flags -no-relax"
-    }
-
-    # MSP430 targets always relax.
-    if [istarget msp430*-*-*] {
-	setup_xfail "msp430*-*-*"
+    # The AVR target does not correctly process
+    # relocs when output format is not ELF.
+    if [istarget avr-*-*] {
+	setup_xfail "avr-*-*"
     }
 
     # Epiphany needs some help too
@@ -294,6 +277,29 @@
 	setup_xfail "m9s12x*-*-*"
     }
 
+    # MSP430 targets always relax.
+    if [istarget msp430*-*-*] {
+	setup_xfail "msp430*-*-*"
+    }
+
+    # SH64 targets cannot convert format in the linker 
+    # using the -oformat command line switch.
+    if [istarget sh64*-*-elf] {
+        # This is what gcc passes to ld by default.
+        set flags "$flags -mshelf32"
+	setup_xfail "sh64*-*-*"
+    }
+
+    # V850 targets need libgcc.a
+    if [istarget v850*-*-elf] {
+	set objs "$objs -L ../gcc -lgcc"
+    }
+
+    # Xtensa ELF targets relax by default; S-Record linker does not
+    if [istarget xtensa*-*-*] {
+	set flags "$flags -no-relax"
+    }
+
     if { ![ld_simple_link $ld tmpdir/sr1 "$flags $objs"] \
 	 || ![ld_simple_link $ld tmpdir/sr2.sr "$flags --oformat srec $objs"] } {
 	fail $test
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1a.d binutils-2.26-avr/ld/testsuite/ld-x86-64/call1a.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1a.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/call1a.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call1.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1b.d binutils-2.26-avr/ld/testsuite/ld-x86-64/call1b.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1b.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/call1b.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call1.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64 -z call-nop=prefix-addr
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1c.d binutils-2.26-avr/ld/testsuite/ld-x86-64/call1c.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1c.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/call1c.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call1.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64 -z call-nop=prefix-nop
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1d.d binutils-2.26-avr/ld/testsuite/ld-x86-64/call1d.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1d.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/call1d.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call1.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64 -z call-nop=suffix-nop
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1e.d binutils-2.26-avr/ld/testsuite/ld-x86-64/call1e.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1e.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/call1e.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call1.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64 -z call-nop=prefix-0x67
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1f.d binutils-2.26-avr/ld/testsuite/ld-x86-64/call1f.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1f.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/call1f.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call1.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64 -z call-nop=prefix-0x90
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1g.d binutils-2.26-avr/ld/testsuite/ld-x86-64/call1g.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1g.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/call1g.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call1.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64 -z call-nop=suffix-0x90
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1h.d binutils-2.26-avr/ld/testsuite/ld-x86-64/call1h.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1h.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/call1h.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call1.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64 -z call-nop=suffix-144
 #objdump: -dw
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1i.d binutils-2.26-avr/ld/testsuite/ld-x86-64/call1i.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/call1i.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/call1i.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: call1.s
-#as: --x32 -mrelax-relocations=yes
+#as: --x32
 #ld: -melf32_x86_64 -z call-nop=suffix-0x90
 #objdump: -dw
 
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: libno-plt-1b.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: libno-plt-1b.rd
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/load1a.d binutils-2.26-avr/ld/testsuite/ld-x86-64/load1a.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/load1a.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/load1a.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: load1.s
-#as: --64 -mrelax-relocations=yes
+#as: --64
 #ld: -melf_x86_64
 #objdump: -dw --sym
 #notarget: x86_64-*-nacl*
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/load1b.d binutils-2.26-avr/ld/testsuite/ld-x86-64/load1b.d
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/load1b.d	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/load1b.d	2016-11-16 03:51:00.000000000 -0800
@@ -1,5 +1,5 @@
 #source: load1.s
-#as: --x32 -mrelax-relocations=yes
+#as: --x32
 #ld: -melf32_x86_64
 #objdump: -dw --sym
 #notarget: x86_64-*-nacl*
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1a.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1a.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1b.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1b.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1c.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1c.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1d.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1d.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1e.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1e.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1f.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1f.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1g.dd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-1g.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-check1.S
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt.exp
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-extern1.S
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-func1.c
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: no-plt-main1.c
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pass.out
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr18591.d
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr18591.s
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr19615.d
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr19615.s
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr19827a.S
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr19827b.S
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr19827-nacl.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr19827.rd
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr20093-1.d
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr20093-1.s
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr20093-2.d
Only in binutils-2.26.1-src/ld/testsuite/ld-x86-64: pr20093-2.s
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/ld-x86-64/x86-64.exp binutils-2.26-avr/ld/testsuite/ld-x86-64/x86-64.exp
--- binutils-2.26.1-src/ld/testsuite/ld-x86-64/x86-64.exp	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/ld/testsuite/ld-x86-64/x86-64.exp	2016-11-16 03:51:00.000000000 -0800
@@ -148,14 +148,6 @@
      "--64" {pr17709a.s} {} "libpr17709.so"}
     {"PR ld/17709 (2)" "-melf_x86_64 tmpdir/libpr17709.so" ""
      "--64" {pr17709b.s} {{readelf -rW pr17709.rd}} "pr17709"}
-    {"Build pr19827a.o" "" ""
-     "--64" { pr19827a.S }}
-    {"Build pr19827b.so" "-melf_x86_64 -shared" ""
-     "--64" { pr19827b.S } {} "pr19827b.so"}
-    {"Build pr19827" "-melf_x86_64 -pie tmpdir/pr19827a.o tmpdir/pr19827b.so" ""
-     "--64" { dummy.s } {{readelf {-rW} pr19827.rd}} "pr19827"}
-    {"Build pr19827.so" "-melf_x86_64 -shared -Bsymbolic" ""
-     "--64" { pr19827a.S }  {{readelf {-rW} pr19827.rd}} "pr19827.so"}
 }
 
 # So as to avoid rewriting every last test case here in a nacl variant,
@@ -247,8 +239,6 @@
 run_dump_test "pr14207"
 run_dump_test "gotplt1"
 run_dump_test "pie1"
-run_dump_test "pr20093-1"
-run_dump_test "pr20093-2"
 
 if { ![istarget "x86_64-*-linux*"] && ![istarget "x86_64-*-nacl*"]} {
     return
@@ -363,8 +353,6 @@
 run_dump_test "pr19013-nacl"
 run_dump_test "pr19162"
 run_dump_test "pr19175"
-run_dump_test "pr18591"
-run_dump_test "pr19615"
 
 # Add $PLT_CFLAGS if PLT is expected.
 global PLT_CFLAGS
@@ -403,7 +391,7 @@
 	[list \
 	    "Build libplt-main1.a" \
 	    "" \
-	    "-fPIC -Wa,-mrelax-relocations=yes" \
+	    "-fPIC" \
 	    { plt-main1.c } \
 	    {{readelf {-Wr} plt-main1.rd}} \
 	    "libplt-main1.a" \
@@ -411,7 +399,7 @@
 	[list \
 	    "Build libplt-main2.a" \
 	    "" \
-	    "-fPIC -Wa,-mrelax-relocations=yes" \
+	    "-fPIC" \
 	    { plt-main2.c } \
 	    {{readelf {-Wr} plt-main2.rd}} \
 	    "libplt-main2.a" \
@@ -419,7 +407,7 @@
 	[list \
 	    "Build libplt-main3.a" \
 	    "" \
-	    "-fPIC -Wa,-mrelax-relocations=yes $PLT_CFLAGS" \
+	    "-fPIC $PLT_CFLAGS" \
 	    { plt-main3.c } \
 	    {{readelf {-Wr} plt-main3.rd}} \
 	    "libplt-main3.a" \
@@ -427,7 +415,7 @@
 	[list \
 	    "Build libplt-main4.a" \
 	    "" \
-	    "-fPIC -Wa,-mrelax-relocations=yes $PLT_CFLAGS" \
+	    "-fPIC $PLT_CFLAGS" \
 	    { plt-main4.c } \
 	    {{readelf {-Wr} plt-main4.rd}} \
 	    "libplt-main4.a" \
@@ -459,26 +447,18 @@
 	    "copyreloc-lib.so" \
 	] \
 	[list \
-	    "Build libcopyreloc-main.a" \
-	    "" \
-	    "" \
-	    { copyreloc-main.S } \
-	    {} \
-	    "libcopyreloc-main.a" \
-	] \
-	[list \
 	    "Build copyreloc-main with PIE without -fPIE (1)" \
-	    "tmpdir/copyreloc-main.o tmpdir/copyreloc-lib.so -pie" \
+	    "tmpdir/copyreloc-lib.so -pie" \
 	    "" \
-	    { dummy.s } \
+	    { copyreloc-main.S } \
 	    {{readelf {-Wr} copyreloc-main1.rd}} \
 	    "copyreloc-main" \
 	] \
 	[list \
 	    "Build copyreloc-main with PIE without -fPIE (2)" \
-	    "tmpdir/copyreloc-main.o tmpdir/copyreloc-lib.so -pie" \
+	    "tmpdir/copyreloc-lib.so -pie" \
 	    "" \
-	    { dummy.s } \
+	    { copyreloc-main.S } \
 	    {{readelf {-Wr} copyreloc-main2.rd}} \
 	    "copyreloc-main" \
 	] \
@@ -499,33 +479,26 @@
 	    "pr17689now.so" \
 	] \
 	[list \
-	    "Build pr17689b.o" \
-	    "" \
-	    "" \
-	    { pr17689b.S } \
-	    {} \
-	] \
-	[list \
 	    "Build pr17689 with PIE without -fPIE" \
-	    "tmpdir/pr17689b.o tmpdir/pr17689.so -pie" \
+	    "tmpdir/pr17689.so -pie" \
 	    "" \
-	    { dummy.s } \
+	    { pr17689b.S } \
 	    {{readelf {-Wr} pr17689.rd}} \
 	    "pr17689" \
 	] \
 	[list \
 	    "Build pr17689 with PIE -z now without -fPIE" \
-	    "tmpdir/pr17689b.o tmpdir/pr17689.so -pie -Wl,-z,now" \
+	    "tmpdir/pr17689.so -pie -Wl,-z,now" \
 	    "" \
-	    { dummy.s } \
+	    { pr17689b.S } \
 	    {{readelf {-Wr} pr17689now.rd}} \
 	    "pr17689now" \
 	] \
 	[list \
 	    "Build pr17827 with PIE without -fPIE" \
-	    "-Wl,--as-needed tmpdir/pr17689b.o tmpdir/pr17689.so -pie" \
+	    "tmpdir/pr17689.so -pie" \
 	    "" \
-	    { dummy.s } \
+	    { pr17689b.S } \
 	    {{readelf {-Wr} pr17827.rd}} \
 	    "pr17827" \
 	] \
@@ -538,26 +511,18 @@
 	    "pr18900.so" \
 	] \
 	[list \
-	    "Build pr18900.o" \
-	    "-r -nostdlib" \
-	    "" \
-	    { pr18900b.c pr18900c.c } \
-	    "" \
-	    "pr18900.o" \
-	] \
-	[list \
 	    "Build pr18900a" \
-	    "tmpdir/pr18900.o tmpdir/pr18900.so" \
+	    "tmpdir/pr18900.so" \
 	    "" \
-	    { dummy.s } \
+	    { pr18900b.c pr18900c.c } \
 	    {{readelf {-Wrd} pr18900a.rd}} \
 	    "pr18900a" \
 	] \
 	[list \
 	    "Build pr18900b" \
-	    "-Wl,--as-needed tmpdir/pr18900.o tmpdir/pr18900.so" \
+	    "tmpdir/pr18900.so" \
 	    "" \
-	    { dummy.s } \
+	    { pr18900b.c pr18900c.c } \
 	    {{readelf {-Wrd} pr18900b.rd}} \
 	    "pr18900b" \
 	] \
@@ -578,18 +543,10 @@
 	    "gotpcrel1d.so" \
 	] \
 	[list \
-	    "Build libgotpcrel1.a" \
-	    "" \
+	    "Build gotpcrel1" \
+	    "tmpdir/gotpcrel1d.so" \
 	    "" \
 	    { gotpcrel1a.S gotpcrel1b.c gotpcrel1c.c } \
-	    "" \
-	    "libgotpcrel1.a" \
-	] \
-	[list \
-	    "Build gotpcrel1" \
-	    "-Wl,--as-needed tmpdir/gotpcrel1a.o tmpdir/gotpcrel1b.o tmpdir/gotpcrel1c.o tmpdir/gotpcrel1d.so" \
-	    "-Wa,-mrelax-relocations=yes" \
-	    { dummy.s } \
 	    {{objdump {-dw} gotpcrel1.dd}} \
 	    "gotpcrel1" \
 	] \
@@ -633,33 +590,33 @@
 	] \
 	[list \
 	    "Run copyreloc-main with PIE without -fPIE" \
-	    "--as-needed tmpdir/copyreloc-main.o tmpdir/copyreloc-lib.so -pie" \
+	    "tmpdir/copyreloc-lib.so -pie" \
 	    "" \
-	    { dummy.s } \
+	    { copyreloc-main.S } \
 	    "copyreloc-main" \
 	    "copyreloc-main.out" \
 	] \
 	[list \
 	    "Run pr17689 with PIE without -fPIE" \
-	    "tmpdir/pr17689b.o tmpdir/pr17689.so -pie" \
+	    "tmpdir/pr17689.so -pie" \
 	    "" \
-	    { dummy.s } \
+	    { pr17689b.S } \
 	    "pr17689" \
 	    "pr17689.out" \
 	] \
 	[list \
 	    "Run pr17689 with PIE -z now without -fPIE" \
-	    "--as-needed tmpdir/pr17689b.o tmpdir/pr17689.so -pie -z now" \
+	    "tmpdir/pr17689.so -pie -z now" \
 	    "" \
-	    { dummy.s } \
+	    { pr17689b.S } \
 	    "pr17689now" \
 	    "pr17689.out" \
 	] \
 	[list \
 	    "Run pr18900" \
-	    "tmpdir/pr18900.o tmpdir/pr18900.so" \
+	    "tmpdir/pr18900.so" \
 	    "" \
-	    { dummy.s } \
+	    { pr18900b.c pr18900c.c } \
 	    "pr18900" \
 	    "pr18900.out" \
 	] \
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/ld/testsuite/lib/ld-lib.exp binutils-2.26-avr/ld/testsuite/lib/ld-lib.exp
--- binutils-2.26.1-src/ld/testsuite/lib/ld-lib.exp	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/ld/testsuite/lib/ld-lib.exp	2016-11-16 03:51:00.000000000 -0800
@@ -229,9 +229,11 @@
 
 # Link a program using ld, without including any libraries.
 #
-proc default_ld_simple_link { ld target objects } {
+proc default_ld_simple_link { ldcmd target objects } {
     global host_triplet
     global exec_output
+    global HOSTING_EMU
+    global ld
 
     set flags ""
     if [is_endian_output_format $objects] then {
@@ -239,7 +241,12 @@
     }
 
     remote_file host delete $target
-    set exec_output [run_host_cmd "$ld" "$flags -o $target $objects"]
+    if { [ string match $ld $ldcmd ] } {
+      set exec_output [run_host_cmd "$ldcmd" "$HOSTING_EMU $flags -o $target $objects"]
+    } else {
+      set exec_output [run_host_cmd "$ldcmd" "$flags -o $target $objects"]
+    }
+
     set exec_output [prune_warnings $exec_output]
 
     # We don't care if we get a warning about a non-existent start
@@ -586,6 +593,7 @@
     global subdir srcdir
     global OBJDUMP NM AS OBJCOPY READELF LD
     global OBJDUMPFLAGS NMFLAGS ASFLAGS OBJCOPYFLAGS READELFFLAGS LDFLAGS
+    global HOSTING_EMU
     global host_triplet runtests
     global env verbose
 
@@ -910,7 +918,7 @@
 
 	# Add -L$srcdir/$subdir so that the linker command can use
 	# linker scripts in the source directory.
-	set cmd "$LD $LDFLAGS -L$srcdir/$subdir \
+	set cmd "$LD $LDFLAGS $HOSTING_EMU -L$srcdir/$subdir \
 		   $opts(ld) -o $objfile $objfiles $opts(ld_after_inputfiles)"
 
         # If needed then check for, or add a -Map option.
Only in binutils-2.26-avr: libdecnumber
Only in binutils-2.26.1-src: md5.sum
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/opcodes/avr-dis.c binutils-2.26-avr/opcodes/avr-dis.c
--- binutils-2.26.1-src/opcodes/avr-dis.c	2015-11-13 00:27:42.000000000 -0800
+++ binutils-2.26-avr/opcodes/avr-dis.c	2016-11-16 03:51:00.000000000 -0800
@@ -184,17 +184,23 @@
       break;
 
     case 'i':
-      sprintf (buf, "0x%04X", insn2);
+      {
+        unsigned int val = insn2 | 0x800000;
+        *sym = 1;
+        *sym_addr = val;
+        sprintf (buf, "0x%04X", insn2);
+        strcpy (comment, comment_start);
+      }
       break;
 
     case 'j':
       {
         unsigned int val = ((insn & 0xf) | ((insn & 0x600) >> 5)
                                          | ((insn & 0x100) >> 2));
-        if (val > 0 && !(insn & 0x100))
-          val |= 0x80;
+        *sym = 1;
+        *sym_addr = val | 0x800000;
         sprintf (buf, "0x%02x", val);
-        sprintf (buf, "%d", val);
+        strcpy (comment, comment_start);
       }
       break;
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/opcodes/ChangeLog binutils-2.26-avr/opcodes/ChangeLog
--- binutils-2.26.1-src/opcodes/ChangeLog	2016-06-29 00:59:50.000000000 -0700
+++ binutils-2.26-avr/opcodes/ChangeLog	2016-11-16 03:51:00.000000000 -0800
@@ -1,57 +1,7 @@
-2016-06-29  Tristan Gingold  <gingold@adacore.com>
+2016-06-03  Pitchumani Sivanupandi  <pitchumani.s@atmel.com>
 
-	* configure: Regenerate.
-
-2016-06-23  Peter Bergner  <bergner@vnet.ibm.com>
-
-	Apply from master.
-	2016-06-22  Peter Bergner  <bergner@vnet.ibm.com>
-
-	* ppc-opc.c (RM, DRM, VXASH, VXASH_MASK, XMMF, XMMF_MASK): New defines.
-	(powerpc_opcodes) <brd, brh, brw, mffsce, mffscdrn, mffscdrni,
-	mffscrn, mffscrni, mffsl, nandxor, rldixor, setbool,
-	xor3>: New mnemonics.
-	<setb>: Change to a VX form instruction.
-	(insert_sh6): Add support for rldixor.
-	(extract_sh6): Likewise.
-
-2016-06-03  Peter Bergner  <bergner@vnet.ibm.com>
-
-	Backport from master
-	2016-06-03  Peter Bergner <bergner@vnet.ibm.com>
-
-	PR binutils/20196
-	* ppc-opc.c (powerpc_opcodes <lbarx, lharx, stbcx., sthcx.>): Enable
-	opcodes for E6500.
-
-2016-06-01  Peter Bergner  <bergner@vnet.ibm.com>
-
-	Backport from master
-	2016-05-26  Peter Bergner <bergner@vnet.ibm.com>
-
-	* ppc-opc.c (CY): New define.  Document it.
-	(powerpc_opcodes) <addex[.], lwzmx, vmsumudm>: New mnemonics.
-
-2016-02-26  Alan Modra  <amodra@gmail.com>
-
-	Apply from master.
-	2015-12-12  Alan Modra  <amodra@gmail.com>
-	PR 19359
-	* ppc-opc.c (insert_fxm): Remove "ignored" from error message.
-	(powerpc_opcodes): Remove single-operand mfcr.
-
-2016-02-15  H.J. Lu  <hongjiu.lu@intel.com>
-
-	Backport from master
-	2016-02-15  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-dis.c (print_insn): Parenthesize expression to prevent
-	truncated addresses.
-	(OP_J): Likewise.
-
-2016-01-25  Tristan Gingold  <gingold@adacore.com>
-
-	* configure: Regenerate.
+	* avr-dis.c (avr_operand): Add default data address space origin (0x800000)
+	 to the address and set as symbol address for LDS/ STS immediate operands.
 
 2016-01-25  Tristan Gingold  <gingold@adacore.com>
 
@@ -865,7 +815,7 @@
 
 2015-05-11  H.J. Lu  <hongjiu.lu@intel.com>
 
-	* i386-opc.tbl (call): Remove Disp16|Disp32 from 64-bit
+	* opcodes/i386-opc.tbl (call): Remove Disp16|Disp32 from 64-bit
 	direct branch.
 	(jmp): Likewise.
 	* i386-tbl.h: Regenerated.
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/opcodes/configure binutils-2.26-avr/opcodes/configure
--- binutils-2.26.1-src/opcodes/configure	2016-06-29 00:59:50.000000000 -0700
+++ binutils-2.26-avr/opcodes/configure	2016-11-16 03:51:00.000000000 -0800
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.64 for opcodes 2.26.1.
+# Generated by GNU Autoconf 2.64 for opcodes 2.26.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software
@@ -556,8 +556,8 @@
 # Identity of this package.
 PACKAGE_NAME='opcodes'
 PACKAGE_TARNAME='opcodes'
-PACKAGE_VERSION='2.26.1'
-PACKAGE_STRING='opcodes 2.26.1'
+PACKAGE_VERSION='2.26'
+PACKAGE_STRING='opcodes 2.26'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
@@ -1319,7 +1319,7 @@
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures opcodes 2.26.1 to adapt to many kinds of systems.
+\`configure' configures opcodes 2.26 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1390,7 +1390,7 @@
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of opcodes 2.26.1:";;
+     short | recursive ) echo "Configuration of opcodes 2.26:";;
    esac
   cat <<\_ACEOF
 
@@ -1497,7 +1497,7 @@
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-opcodes configure 2.26.1
+opcodes configure 2.26
 generated by GNU Autoconf 2.64
 
 Copyright (C) 2009 Free Software Foundation, Inc.
@@ -1907,7 +1907,7 @@
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by opcodes $as_me 2.26.1, which was
+It was created by opcodes $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   $ $0 $@
@@ -3715,7 +3715,7 @@
 
 # Define the identity of the package.
  PACKAGE='opcodes'
- VERSION='2.26.1'
+ VERSION='2.26'
 
 
 cat >>confdefs.h <<_ACEOF
@@ -13223,7 +13223,7 @@
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by opcodes $as_me 2.26.1, which was
+This file was extended by opcodes $as_me 2.26, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -13287,7 +13287,7 @@
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_version="\\
-opcodes config.status 2.26.1
+opcodes config.status 2.26
 configured by $0, generated by GNU Autoconf 2.64,
   with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/opcodes/i386-dis.c binutils-2.26-avr/opcodes/i386-dis.c
--- binutils-2.26.1-src/opcodes/i386-dis.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/opcodes/i386-dis.c	2016-11-16 03:51:00.000000000 -0800
@@ -13644,7 +13644,7 @@
     if (op_index[i] != -1 && op_riprel[i])
       {
 	(*info->fprintf_func) (info->stream, "        # ");
-	(*info->print_address_func) ((bfd_vma) (start_pc + (codep - start_codep)
+	(*info->print_address_func) ((bfd_vma) (start_pc + codep - start_codep
 						+ op_address[op_index[i]]), info);
 	break;
       }
@@ -16158,7 +16158,7 @@
 	     the displacement is added!  */
 	  mask = 0xffff;
 	  if ((prefixes & PREFIX_DATA) == 0)
-	    segment = ((start_pc + (codep - start_codep))
+	    segment = ((start_pc + codep - start_codep)
 		       & ~((bfd_vma) 0xffff));
 	}
       if (address_mode != mode_64bit
Only in binutils-2.26-avr/opcodes/po: .cvsignore
diff '--exclude=/gdb*' '--exclude=/libdecnumber**' '--exclude=/readline*' '--exclude=/sim*' -ur binutils-2.26.1-src/opcodes/ppc-opc.c binutils-2.26-avr/opcodes/ppc-opc.c
--- binutils-2.26.1-src/opcodes/ppc-opc.c	2016-06-29 00:28:37.000000000 -0700
+++ binutils-2.26-avr/opcodes/ppc-opc.c	2016-11-16 03:51:00.000000000 -0800
@@ -238,11 +238,7 @@
 #define BOE BO + 1
   { 0x1e, 21, insert_boe, extract_boe, 0 },
 
-  /* The RM field in an X form instruction.  */
-#define RM BOE + 1
-  { 0x3, 11, NULL, NULL, 0 },
-
-#define BH RM + 1
+#define BH BOE + 1
   { 0x3, 11, NULL, NULL, PPC_OPERAND_OPTIONAL },
 
   /* The BT field in an X or XL form instruction.  */
@@ -782,9 +778,8 @@
 #define EVUIMM_8 EVUIMM_4 + 1
   { 0xf8, 8, NULL, NULL, PPC_OPERAND_PARENS },
 
-  /* The WS or DRM field in an X form instruction.  */
+  /* The WS field.  */
 #define WS EVUIMM_8 + 1
-#define DRM WS
   { 0x7, 11, NULL, NULL, 0 },
 
   /* PowerPC paired singles extensions.  */
@@ -812,9 +807,7 @@
 #define X_R A_L
   { 0x1, 16, NULL, NULL, PPC_OPERAND_OPTIONAL },
 
-  /* The RMC or CY field in a Z23 form instruction.  */
 #define RMC A_L + 1
-#define CY RMC
   { 0x3, 9, NULL, NULL, 0 },
 
 #define R RMC + 1
@@ -1441,7 +1434,7 @@
       /* A value of -1 means we used the one operand form of
 	 mfcr which is valid.  */
       if (value != -1)
-        *errmsg = _("invalid mfcr mask");
+        *errmsg = _("ignoring invalid mfcr mask");
       value = 0;
     }
 
@@ -2014,11 +2007,7 @@
 	    ppc_cpu_t dialect ATTRIBUTE_UNUSED,
 	    const char **errmsg ATTRIBUTE_UNUSED)
 {
-  /* SH6 operand in the rldixor instructions.  */
-  if (PPC_OP (insn) == 4)
-    return insn | ((value & 0x1f) << 6) | ((value & 0x20) >> 5);
-  else
-    return insn | ((value & 0x1f) << 11) | ((value & 0x20) >> 4);
+  return insn | ((value & 0x1f) << 11) | ((value & 0x20) >> 4);
 }
 
 static long
@@ -2026,11 +2015,7 @@
 	     ppc_cpu_t dialect ATTRIBUTE_UNUSED,
 	     int *invalid ATTRIBUTE_UNUSED)
 {
-  /* SH6 operand in the rldixor instructions.  */
-  if (PPC_OP (insn) == 4)
-    return ((insn >> 6) & 0x1f) | ((insn << 5) & 0x20);
-  else
-    return ((insn >> 11) & 0x1f) | ((insn << 4) & 0x20);
+  return ((insn >> 11) & 0x1f) | ((insn << 4) & 0x20);
 }
 
 /* The SPR field in an XFX form instruction.  This is flipped--the
@@ -2613,9 +2598,6 @@
 /* A VX form instruction with a VA tertiary opcode.  */
 #define VXVA(op, xop, vaop) (VX(op,xop) | (((vaop) & 0x1f) << 16))
 
-#define VXASH(op, xop) (OP (op) | ((((unsigned long)(xop)) & 0x1f) << 1))
-#define VXASH_MASK VXASH (0x3f, 0x1f)
-
 /* An X form instruction.  */
 #define X(op, xop) (OP (op) | ((((unsigned long)(xop)) & 0x3ff) << 1))
 
@@ -2652,9 +2634,6 @@
 /* A X form instruction for Quad-Precision FP Instructions with RC bit.  */
 #define XVARC(op, xop, vaop, rc) (XVA ((op), (xop), (vaop)) | ((rc) & 1))
 
-/* An X form instruction with the RA bits specified as two ops.  */
-#define XMMF(op, xop, mop0, mop1) (X ((op), (xop)) | ((mop0) & 3) << 19 | ((mop1) & 7) << 16)
-
 /* A Z form instruction with the RC bit specified.  */
 #define ZRC(op, xop, rc) (Z ((op), (xop)) | ((rc) & 1))
 
@@ -2707,9 +2686,6 @@
 /* An X form wait instruction with everything filled in except the WC field.  */
 #define XWC_MASK (XRC (0x3f, 0x3ff, 1) | (7 << 23) | RA_MASK | RB_MASK)
 
-/* The mask for an XMMF form instruction.  */
-#define XMMF_MASK (XMMF (0x3f, 0x3ff, 3, 7) | (1))
-
 /* The mask for a Z form instruction.  */
 #define Z_MASK ZRC (0x3f, 0x1ff, 1)
 #define Z2_MASK ZRC (0x3f, 0xff, 1)
@@ -3154,7 +3130,6 @@
 {"machhwu.",	XO (4,	12,0,1),XO_MASK,     MULHW|PPCVLE, PPCNONE,	{RT, RA, RB}},
 {"ps_muls1",	A  (4,	13,0),	AFRB_MASK,   PPCPS,	PPCNONE,	{FRT, FRA, FRC}},
 {"ps_muls1.",	A  (4,	13,1),	AFRB_MASK,   PPCPS,	PPCNONE,	{FRT, FRA, FRC}},
-{"rldixor",     VXASH(4,26),    VXASH_MASK,  POWER9,	PPCNONE,	{RA, RS, SH6, RB}},
 {"ps_madds0",	A  (4,	14,0),	A_MASK,      PPCPS,	PPCNONE,	{FRT, FRA, FRC, FRB}},
 {"ps_madds0.",	A  (4,	14,1),	A_MASK,      PPCPS,	PPCNONE,	{FRT, FRA, FRC, FRB}},
 {"ps_madds1",	A  (4,	15,0),	A_MASK,      PPCPS,	PPCNONE,	{FRT, FRA, FRC, FRB}},
@@ -3162,7 +3137,6 @@
 {"vmhaddshs",	VXA(4,	32),	VXA_MASK,    PPCVEC|PPCVLE, PPCNONE,	{VD, VA, VB, VC}},
 {"vmhraddshs",	VXA(4,	33),	VXA_MASK,    PPCVEC|PPCVLE, PPCNONE,	{VD, VA, VB, VC}},
 {"vmladduhm",	VXA(4,	34),	VXA_MASK,    PPCVEC|PPCVLE, PPCNONE,	{VD, VA, VB, VC}},
-{"vmsumudm",	VXA(4,	35),	VXA_MASK,    PPCVEC3,	PPCNONE,	{VD, VA, VB, VC}},
 {"ps_div",	A  (4,	18,0),	AFRC_MASK,   PPCPS,	PPCNONE,	{FRT, FRA, FRB}},
 {"vmsumubm",	VXA(4,	36),	VXA_MASK,    PPCVEC|PPCVLE, PPCNONE,	{VD, VA, VB, VC}},
 {"ps_div.",	A  (4,	18,1),	AFRC_MASK,   PPCPS,	PPCNONE,	{FRT, FRA, FRB}},
@@ -3201,8 +3175,6 @@
 {"ps_nmadd",	A  (4,	31,0),	A_MASK,      PPCPS,	PPCNONE,	{FRT, FRA, FRC, FRB}},
 {"ps_nmadd.",	A  (4,	31,1),	A_MASK,      PPCPS,	PPCNONE,	{FRT, FRA, FRC, FRB}},
 {"ps_cmpo0",	X  (4,	32),    XBF_MASK,    PPCPS,	PPCNONE,	{BF, FRA, FRB}},
-{"xor3",	VXA(4,  54),	VXA_MASK,    POWER9,	PPCNONE,	{RA, RS, RB, RC}},
-{"nandxor",	VXA(4,  55),	VXA_MASK,    POWER9,	PPCNONE,	{RA, RS, RB, RC}},
 {"vpermr",	VXA(4,	59),	VXA_MASK,    PPCVEC3,	PPCNONE,	{VD, VA, VB, VC}},
 {"vaddeuqm",	VXA(4,	60),	VXA_MASK,    PPCVEC2,	PPCNONE,	{VD, VA, VB, VC}},
 {"vaddecuq",	VXA(4,	61),	VXA_MASK,    PPCVEC2,	PPCNONE,	{VD, VA, VB, VC}},
@@ -4770,7 +4742,8 @@
 {"tlbilxva",	XTO(31,18,3),	XTO_MASK, E500MC|PPCA2,	PPCNONE,	{RA0, RB}},
 {"tlbilx",	X(31,18),	X_MASK,   E500MC|PPCA2,	PPCNONE,	{T, RA0, RB}},
 
-{"mfcr",	XFXM(31,19,0,0), XFXFXM_MASK, COM|PPCVLE, PPCNONE,	{RT, FXM4}},
+{"mfcr",	XFXM(31,19,0,0), XFXFXM_MASK, POWER4,	PPCNONE,	{RT, FXM4}},
+{"mfcr",	XFXM(31,19,0,0), XRARB_MASK, COM|PPCVLE, POWER4,	{RT}},
 {"mfocrf",	XFXM(31,19,0,1), XFXFXM_MASK, COM|PPCVLE, PPCNONE,	{RT, FXM}},
 
 {"lwarx",	X(31,20),	XEH_MASK,    PPC|PPCVLE, PPCNONE,	{RT, RA0, RB, EH}},
@@ -4841,7 +4814,7 @@
 {"mfvrd",	X(31,51)|1,	XX1RB_MASK|1, PPCVSX2,	PPCNONE,	{RA, VS}},
 {"eratilx",	X(31,51),	X_MASK,	     PPCA2,	PPCNONE,	{ERAT_T, RA, RB}},
 
-{"lbarx",	X(31,52),	XEH_MASK,    POWER8|E6500|PPCVLE, PPCNONE, {RT, RA0, RB, EH}},
+{"lbarx",	X(31,52),	XEH_MASK,    POWER8|PPCVLE, PPCNONE,	{RT, RA0, RB, EH}},
 
 {"ldux",	X(31,53),	X_MASK,      PPC64|PPCVLE, PPCNONE,	{RT, RAL, RB}},
 
@@ -4921,7 +4894,7 @@
 {"mfvrwz",	X(31,115)|1,	XX1RB_MASK|1, PPCVSX2,	PPCNONE,	{RA, VS}},
 {"mfvsrwz",	X(31,115),	XX1RB_MASK,   PPCVSX2,	PPCNONE,	{RA, XS6}},
 
-{"lharx",	X(31,116),	XEH_MASK,    POWER8|E6500|PPCVLE, PPCNONE, {RT, RA0, RB, EH}},
+{"lharx",	X(31,116),	XEH_MASK,    POWER8|PPCVLE, PPCNONE,	{RT, RA0, RB, EH}},
 
 {"clf",		X(31,118),	XTO_MASK,    POWER,	PPCNONE,	{RA, RB}},
 
@@ -4936,8 +4909,7 @@
 
 {"dcbfep",	XRT(31,127,0),	XRT_MASK,    E500MC|PPCA2|PPCVLE, PPCNONE, {RA0, RB}},
 
-{"setb",	VX(31,256),	VXVB_MASK|(3<<16), POWER9, PPCNONE,	{RT, BFA}},
-{"setbool",	VX(31,257),	VXVB_MASK,         POWER9, PPCNONE,	{RT, BA}},
+{"setb",	X(31,128),	XRB_MASK|(3<<16), POWER9, PPCNONE,	{RT, BFA}},
 
 {"wrtee",	X(31,131),	XRARB_MASK,  PPC403|BOOKE|PPCA2|PPC476|PPCVLE, PPCNONE, {RS}},
 
@@ -4987,8 +4959,6 @@
 
 {"prtyw",	X(31,154),	XRB_MASK, POWER6|PPCA2|PPC476, PPCNONE,	{RA, RS}},
 
-{"brw",		X(31,155),	XRB_MASK,    POWER9,	PPCNONE,	{RA, RS}},
-
 {"stdepx",	X(31,157),	X_MASK,	     E500MC|PPCA2|PPCVLE, PPCNONE, {RS, RA0, RB}},
 
 {"stwepx",	X(31,159),	X_MASK,	     E500MC|PPCA2|PPCVLE, PPCNONE, {RS, RA0, RB}},
@@ -5000,9 +4970,6 @@
 {"stvehx",	X(31,167),	X_MASK,      PPCVEC,	PPCNONE,	{VS, RA0, RB}},
 {"sthfcmx",	APU(31,167,0), 	APU_MASK,    PPC405,	PPCNONE,	{FCRT, RA, RB}},
 
-{"addex",	ZRC(31,170,0),	Z2_MASK,     POWER9,	PPCNONE,	{RT, RA, RB, CY}},
-{"addex.",	ZRC(31,170,1),	Z2_MASK,     POWER9,	PPCNONE,	{RT, RA, RB, CY}},
-
 {"msgclrp",	XRTRA(31,174,0,0), XRTRA_MASK, POWER8,	PPCNONE,	{RB}},
 {"dcbtlse",	X(31,174),	X_MASK,      PPCCHLK,	E500MC,		{CT, RA0, RB}},
 
@@ -5026,8 +4993,6 @@
 
 {"prtyd",	X(31,186),	XRB_MASK, POWER6|PPCA2,	PPCNONE,	{RA, RS}},
 
-{"brd",		X(31,187),	XRB_MASK,    POWER9,    PPCNONE,	{RA, RS}},
-
 {"cmprb",	X(31,192),	XCMP_MASK,   POWER9,	PPCNONE,	{BF, L, RA, RB}},
 
 {"icblq.",	XRC(31,198,1),	X_MASK,      E6500,	PPCNONE,	{CT, RA0, RB}},
@@ -5066,8 +5031,6 @@
 {"sleq",	XRC(31,217,0),	X_MASK,      M601,	PPCNONE,	{RA, RS, RB}},
 {"sleq.",	XRC(31,217,1),	X_MASK,      M601,	PPCNONE,	{RA, RS, RB}},
 
-{"brh",		X(31,219),	XRB_MASK,    POWER9,	PPCNONE,	{RA, RS}},
-
 {"stbepx",	X(31,223),	X_MASK,      E500MC|PPCA2|PPCVLE, PPCNONE, {RS, RA0, RB}},
 
 {"cmpeqb",	X(31,224),	XCMPL_MASK,   POWER9,	PPCNONE,	{BF, RA, RB}},
@@ -5534,8 +5497,6 @@
 
 {"mtvsrdd",	X(31,435),	XX1_MASK,    PPCVSX3,	PPCNONE,	{XT6, RA0, RB}},
 
-{"lwzmx",	X(31,437),	X_MASK,      POWER9,	PPCNONE,  	{RT, RA0, RB}},
-
 {"ecowx",	X(31,438),	X_MASK,      PPC,	E500|TITAN,  	{RT, RA0, RB}},
 
 {"sthux",	X(31,439),	X_MASK,      COM|PPCVLE, PPCNONE,	{RS, RAS, RB}},
@@ -5978,7 +5939,7 @@
 {"tendall.",	XRC(31,686,1)|(1<<25), XRTRARB_MASK, PPCHTM, PPCNONE,	{0}},
 {"tend.",	XRC(31,686,1), XRTARARB_MASK, PPCHTM,	PPCNONE,	{HTM_A}},
 
-{"stbcx.",	XRC(31,694,1),	X_MASK,      POWER8|E6500, PPCNONE,	{RS, RA0, RB}},
+{"stbcx.",	XRC(31,694,1),	X_MASK,      POWER8,	PPCNONE,	{RS, RA0, RB}},
 
 {"stfsux",	X(31,695),	X_MASK,      COM,	PPCEFS,		{FRS, RAS, RB}},
 
@@ -6010,7 +5971,7 @@
 {"stswi",	X(31,725),	X_MASK, PPCCOM|PPCVLE,	E500|E500MC,	{RS, RA0, NB}},
 {"stsi",	X(31,725),	X_MASK,      PWRCOM,	PPCNONE,	{RS, RA0, NB}},
 
-{"sthcx.",	XRC(31,726,1),	X_MASK,      POWER8|E6500, PPCNONE,	{RS, RA0, RB}},
+{"sthcx.",	XRC(31,726,1),	X_MASK,      POWER8,	PPCNONE,	{RS, RA0, RB}},
 
 {"stfdx",	X(31,727),	X_MASK,      COM,	PPCEFS,		{FRS, RA0, RB}},
 
@@ -6939,13 +6900,6 @@
 {"mffs",	XRC(63,583,0),	XRARB_MASK,  COM,	PPCEFS,		{FRT}},
 {"mffs.",	XRC(63,583,1),	XRARB_MASK,  COM,	PPCEFS,		{FRT}},
 
-{"mffsce",	XMMF(63,583,0,1), XMMF_MASK|RB_MASK, POWER9, PPCNONE,	{FRT}},
-{"mffscdrn",	XMMF(63,583,2,4), XMMF_MASK,         POWER9, PPCNONE,	{FRT, FRB}},
-{"mffscdrni",	XMMF(63,583,2,5), XMMF_MASK|(3<<14), POWER9, PPCNONE,	{FRT, DRM}},
-{"mffscrn",	XMMF(63,583,2,6), XMMF_MASK,         POWER9, PPCNONE,	{FRT, FRB}},
-{"mffscrni",	XMMF(63,583,2,7), XMMF_MASK|(7<<13), POWER9, PPCNONE,	{FRT, RM}},
-{"mffsl",	XMMF(63,583,3,0), XMMF_MASK|RB_MASK, POWER9, PPCNONE,	{FRT}},
-
 {"dcmpuq",	X(63,642),	X_MASK,      POWER6,	PPCNONE,	{BF, FRAp, FRBp}},
 
 {"xscmpuqp",	X(63,644),      XBF_MASK,    PPCVSX3,	PPCNONE,	{BF, VA, VB}},
Only in binutils-2.26-avr: readline
Only in binutils-2.26-avr: sim
